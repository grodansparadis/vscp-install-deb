head	1.186;
access;
symbols
	Release-7-1-1:1.182.0.2
	Root_Release-7-1-1:1.182
	Root_Release_7-0-1:1.179
	Release_7-0-1:1.179.0.2
	Release_7-0-0:1.178.0.2
	Root_Release_7-0-0:1.178
	Release-6-2-2:1.174.0.2
	Release-6-1-2-3:1.164
	Root_Release-6-1-2-3:1.164
	Release-6-1-2-2:1.164.0.2
	Root_Release-6-1-2-2:1.164
	debian_version_6_1_2_1-1:1.163
	upstream_version_6_1_2_1:1.163
	Release-6-1-2-1_new:1.163.0.4
	Root_Release-6-1-2-1_new:1.163
	Release-6-1-2-1:1.163.0.2
	Root_Release-6-1-2-1:1.163
	upstream_version_6_1_2:1.162
	debian_version_6_1_2-1:1.162
	Release-6-1-2:1.162.0.2
	Root_Release-6-1-2:1.162
	debian_version_6_1_1-2:1.161
	debian_version_6_1_1-1:1.161
	upstream_version_6_1_1:1.161
	Release-6-1-1:1.161.0.2
	Root_Release-6-1-1:1.161
	Release-6-0-4:1.159.0.2
	Root_Release-6-0-4:1.159
	Release-6-0-3_NEW:1.158.0.2
	Root_Release-6-0-3_NEW:1.158
	Release-6-0-3:1.158.0.4
	Root_Release-6-0-3:1.158
	Release-6-0-0:1.157.0.2
	Root_Release-6-0-0:1.158
	Release-5-5-4-1:1.153.0.2
	Root_Release-5-5-4-1:1.153
	Release-5-5-4:1.152.0.2
	Root_Release-5-5-4:1.152
	Release-5-5-3:1.151.0.2
	ROOT_Release-5-5-3:1.151
	Release-5-5-2:1.149.0.2
	Root_Release-5-5-2:1.149
	debian_version_5_5_1-1:1.149
	Release-5-5-1:1.146.0.2
	upstream_version_5_5_1:1.146
	ROOT_Release-5-5-1:1.146
	debian_version_5_5-1:1.145
	upstream_version_5_5:1.145
	ROOT_Release-5-5:1.145
	Release-5-5:1.145.0.2
	debian_version_5_4_4_2-3:1.144
	Release-5-4-4-2-1:1.144.0.2
	debian_version_5_4_4_2-2:1.144
	debian_version_5_4_4_2-1:1.144
	upstream_version_5_4_4_2:1.144
	debian_version_5_4_4_1-1:1.138
	upstream_version_5_4_4_1:1.138
	debian_version_5_4_4-1:1.137
	upstream_version_5_4_4:1.137
	Release-5-4-4:1.137.0.4
	Root_Release-5-4-4:1.137
	debian_version_5_4_3_2-1:1.136
	upstream_version_5_4_3_2:1.136
	Release_5-4-3-2:1.136.0.2
	Root_Release_5-4-3-2:1.136
	upstream_version_5_4_3_1:1.134
	debian_version_5_4_3_1-1:1.134
	Release-5-4-3:1.132.0.2
	Root_Release-5-4-3:1.132
	Root_Release-5-4-1:1.131
	Release-5-4-1:1.131.0.2
	Root_Release-5-4:1.130
	Release-5-4:1.130.0.2
	upstream_version_5_3_4:1.127
	debian_version_5_3_4-1:1.127
	ROOT_Release-5-3-4:1.127
	Release-5-3-4:1.127.0.2
	ROOT_Release-5-3-3:1.125
	Release-5-3-3:1.125.0.2
	debian_version_5_3_2_1_2-1:1.124
	upstream_version_5_3_2_1_2:1.124
	debian_version_5_3_2_1_1-1:1.123
	debian_version_5_3_2_1_1:1.123
	upstream_version_5_3_2_1_1:1.123
	Root_Release-5-3-2-1:1.122
	Release-5-3-2-1:1.122
	ROOT_RELEASE-5-3-2-1:1.122
	RELEASE-5-3-2-1:1.122.0.4
	Release-5-3-2:1.121.0.2
	Root_Release-5-3-2:1.121
	Root_Release-5-3-1:1.120
	Release-5-3-1:1.120.0.2
	Release-5-2-3-1:1.119.0.2
	Root_Release-5-2-3-1:1.119
	Release-5-2-2-4:1.117.0.2
	Root_Release-5-2-2-4:1.117
	Release-5-2-2-1:1.116.0.2
	Root_Release-5-2-2-1:1.116
	upstream_version_5_2_2:1.115
	debian_version_5_2_2-1:1.115
	Release-5-2-2:1.115.0.2
	ROOT_Release-5-2-2:1.115
	ROOT_Release-5-2-1:1.114
	Release-5-2-1:1.114.0.2
	Release-5-2-0:1.113.0.2
	ROOT_Release-5-2-0:1.113
	ROOT_Release-5-1-2:1.112
	Release-5-1-2:1.112.0.2
	Version-5-1-1:1.111.0.2
	ROOT_Version-5-1-1:1.111
	debian_version_5_1_0-1:1.110
	upstream_version_5_1_0:1.110
	ROOT_Release-5-1-0:1.110
	Release-5-1-0:1.110.0.2
	ROOT_Release-5-0-0:1.109
	Release-5-0-0:1.109.0.2
	Release-4-3-3:1.108.0.2
	ROOT_Release-4-3-3:1.108
	upstream_version_4_3_2:1.107
	debian_version_4_3_2-1:1.107
	ROOT_Release-4-3-2:1.107
	Release-4-3-2:1.107.0.2
	Release-4-3-1:1.105.0.2
	ROOT_Release-4-3-1:1.105
	debian_version_4_3_0-1:1.104
	upstream_version_4_3_0:1.104
	ROOT_Release-4-3-0:1.104
	Release-4-3-0:1.104.0.2
	debian_version_3_2_1b-2:1.82.2.2
	debian_version_4_2_2-1:1.102
	upstream_version_4_2_2:1.102
	debian_version_3_2_1b-1:1.82.2.2
	upstream_version_3_2_1b:1.82.2.2
	Release-4-1-2:1.96.0.2
	Release-4-0-8:1.91.0.2
	debian_version_4_0_8a-1:1.91
	upstream_version_4_0_8a:1.91
	jostb-debian-ubuntu-patch:1.90.0.2
	debian_version_4_0_8-1:1.89
	upstream_version_4_0_8:1.89
	debian_version_4_0_7-1:1.88
	upstream_version_4_0_7:1.88
	debian_version_4_0_6-1:1.87
	upstream_version_4_0_6:1.87
	debian_version_4_0_2-1:1.85
	upstream_version_4_0_2:1.85
	Release-4-0-2_Root:1.85
	Release-4-0-2:1.85.0.2
	upstream_version_4_0_1:1.84
	debian_version_4_0_1-2:1.84
	Release-3-2-1:1.82.0.2
	Release-3-1-8:1.77.0.2
	Release-3-0-8_root:1.57.2.1
	Release-3-0-8_Root:1.60
	Release-3-0-8:1.57.0.2
	Release-2-0-8:1.38.0.2
	Release-2-0-7_Root:1.27
	Release-2-0-7:1.27.0.2
	Release-2-0-6-branch:1.22.0.2
	Version-1:1.15.0.6
	Version-2:1.15.0.4
	Release-2:1.15.0.2
	PHP-5:1.3.0.6
	Release-1-0-6:1.4.0.2
	sparc-64-test:1.3.0.2;
locks; strict;
comment	@-- @;


1.186
date	2017.04.23.15.11.38;	author jost_boekemeier;	state Exp;
branches;
next	1.185;

1.185
date	2017.04.17.12.30.19;	author jost_boekemeier;	state Exp;
branches;
next	1.184;

1.184
date	2017.04.15.21.53.38;	author jost_boekemeier;	state Exp;
branches;
next	1.183;

1.183
date	2017.04.14.17.34.12;	author jost_boekemeier;	state Exp;
branches;
next	1.182;

1.182
date	2017.04.09.13.58.34;	author jost_boekemeier;	state Exp;
branches;
next	1.181;

1.181
date	2017.03.11.14.55.05;	author jost_boekemeier;	state Exp;
branches;
next	1.180;

1.180
date	2017.03.02.17.40.37;	author jost_boekemeier;	state Exp;
branches;
next	1.179;

1.179
date	2017.02.25.16.28.47;	author jost_boekemeier;	state Exp;
branches;
next	1.178;

1.178
date	2017.02.06.23.31.57;	author jost_boekemeier;	state Exp;
branches;
next	1.177;

1.177
date	2017.02.05.23.31.26;	author jost_boekemeier;	state Exp;
branches;
next	1.176;

1.176
date	2017.02.05.21.52.18;	author jost_boekemeier;	state Exp;
branches;
next	1.175;

1.175
date	2017.02.01.19.34.49;	author jost_boekemeier;	state Exp;
branches;
next	1.174;

1.174
date	2017.01.30.22.51.23;	author jost_boekemeier;	state Exp;
branches;
next	1.173;

1.173
date	2010.10.31.11.13.44;	author jost_boekemeier;	state Exp;
branches;
next	1.172;

1.172
date	2010.10.30.17.37.31;	author jost_boekemeier;	state Exp;
branches;
next	1.171;

1.171
date	2010.10.10.09.20.06;	author jost_boekemeier;	state Exp;
branches;
next	1.170;

1.170
date	2010.09.25.11.19.52;	author jost_boekemeier;	state Exp;
branches;
next	1.169;

1.169
date	2010.09.25.11.02.38;	author jost_boekemeier;	state Exp;
branches;
next	1.168;

1.168
date	2010.09.04.11.17.11;	author jost_boekemeier;	state Exp;
branches;
next	1.167;

1.167
date	2010.08.28.12.43.46;	author jost_boekemeier;	state Exp;
branches;
next	1.166;

1.166
date	2010.08.28.09.57.21;	author jost_boekemeier;	state Exp;
branches;
next	1.165;

1.165
date	2010.05.31.19.58.24;	author jost_boekemeier;	state Exp;
branches;
next	1.164;

1.164
date	2010.05.22.13.12.10;	author jost_boekemeier;	state Exp;
branches;
next	1.163;

1.163
date	2010.04.25.06.41.51;	author jost_boekemeier;	state Exp;
branches;
next	1.162;

1.162
date	2010.04.12.16.17.15;	author jost_boekemeier;	state Exp;
branches;
next	1.161;

1.161
date	2010.03.24.18.03.15;	author jost_boekemeier;	state Exp;
branches;
next	1.160;

1.160
date	2010.03.16.16.46.23;	author jost_boekemeier;	state Exp;
branches;
next	1.159;

1.159
date	2010.03.06.11.12.45;	author jost_boekemeier;	state Exp;
branches;
next	1.158;

1.158
date	2010.02.28.15.23.49;	author jost_boekemeier;	state Exp;
branches;
next	1.157;

1.157
date	2010.02.21.16.24.10;	author jost_boekemeier;	state Exp;
branches;
next	1.156;

1.156
date	2010.01.29.17.15.33;	author jost_boekemeier;	state Exp;
branches;
next	1.155;

1.155
date	2010.01.25.16.45.14;	author jost_boekemeier;	state Exp;
branches;
next	1.154;

1.154
date	2010.01.23.10.09.35;	author jost_boekemeier;	state Exp;
branches;
next	1.153;

1.153
date	2009.12.06.19.49.13;	author jost_boekemeier;	state Exp;
branches;
next	1.152;

1.152
date	2009.10.17.17.40.22;	author jost_boekemeier;	state Exp;
branches;
next	1.151;

1.151
date	2009.09.27.17.39.22;	author jost_boekemeier;	state Exp;
branches;
next	1.150;

1.150
date	2009.09.14.16.52.39;	author jost_boekemeier;	state Exp;
branches;
next	1.149;

1.149
date	2009.08.28.15.50.11;	author jost_boekemeier;	state Exp;
branches
	1.149.2.1;
next	1.148;

1.148
date	2009.08.28.15.49.29;	author jost_boekemeier;	state Exp;
branches;
next	1.147;

1.147
date	2009.08.28.15.45.49;	author jost_boekemeier;	state Exp;
branches;
next	1.146;

1.146
date	2009.08.22.16.43.26;	author jost_boekemeier;	state Exp;
branches;
next	1.145;

1.145
date	2009.07.25.13.56.02;	author jost_boekemeier;	state Exp;
branches;
next	1.144;

1.144
date	2009.04.25.12.25.23;	author jost_boekemeier;	state Exp;
branches;
next	1.143;

1.143
date	2009.04.19.17.24.30;	author jost_boekemeier;	state Exp;
branches;
next	1.142;

1.142
date	2009.04.18.14.57.04;	author jost_boekemeier;	state Exp;
branches;
next	1.141;

1.141
date	2009.04.13.11.32.02;	author jost_boekemeier;	state Exp;
branches;
next	1.140;

1.140
date	2009.04.12.12.10.23;	author jost_boekemeier;	state Exp;
branches;
next	1.139;

1.139
date	2009.04.11.14.29.11;	author jost_boekemeier;	state Exp;
branches;
next	1.138;

1.138
date	2009.03.15.15.33.22;	author jost_boekemeier;	state Exp;
branches;
next	1.137;

1.137
date	2009.03.08.14.34.47;	author jost_boekemeier;	state Exp;
branches;
next	1.136;

1.136
date	2009.02.15.22.15.46;	author jost_boekemeier;	state Exp;
branches;
next	1.135;

1.135
date	2009.02.07.16.10.30;	author jost_boekemeier;	state Exp;
branches;
next	1.134;

1.134
date	2009.01.20.22.29.17;	author jost_boekemeier;	state Exp;
branches;
next	1.133;

1.133
date	2009.01.06.17.05.09;	author jost_boekemeier;	state Exp;
branches;
next	1.132;

1.132
date	2008.12.29.21.58.14;	author jost_boekemeier;	state Exp;
branches;
next	1.131;

1.131
date	2008.12.21.16.24.34;	author jost_boekemeier;	state Exp;
branches;
next	1.130;

1.130
date	2008.12.12.17.39.27;	author jost_boekemeier;	state Exp;
branches;
next	1.129;

1.129
date	2008.12.11.21.05.45;	author jost_boekemeier;	state Exp;
branches;
next	1.128;

1.128
date	2008.12.09.12.55.03;	author jost_boekemeier;	state Exp;
branches;
next	1.127;

1.127
date	2008.11.30.17.08.48;	author jost_boekemeier;	state Exp;
branches;
next	1.126;

1.126
date	2008.11.27.21.00.26;	author jost_boekemeier;	state Exp;
branches;
next	1.125;

1.125
date	2008.10.25.17.34.28;	author jost_boekemeier;	state Exp;
branches;
next	1.124;

1.124
date	2008.10.12.16.15.53;	author jost_boekemeier;	state Exp;
branches;
next	1.123;

1.123
date	2008.10.08.19.48.35;	author jost_boekemeier;	state Exp;
branches;
next	1.122;

1.122
date	2008.10.06.20.01.35;	author jost_boekemeier;	state Exp;
branches;
next	1.121;

1.121
date	2008.10.05.17.37.42;	author jost_boekemeier;	state Exp;
branches;
next	1.120;

1.120
date	2008.10.03.15.48.14;	author jost_boekemeier;	state Exp;
branches;
next	1.119;

1.119
date	2008.09.29.16.32.20;	author jost_boekemeier;	state Exp;
branches;
next	1.118;

1.118
date	2008.09.28.21.56.52;	author jost_boekemeier;	state Exp;
branches;
next	1.117;

1.117
date	2008.09.24.22.24.40;	author jost2345;	state Exp;
branches;
next	1.116;

1.116
date	2008.09.20.15.00.57;	author jost_boekemeier;	state Exp;
branches;
next	1.115;

1.115
date	2008.03.30.17.01.33;	author jost_boekemeier;	state Exp;
branches;
next	1.114;

1.114
date	2008.03.22.12.04.54;	author jost_boekemeier;	state Exp;
branches;
next	1.113;

1.113
date	2008.03.02.21.36.49;	author jost_boekemeier;	state Exp;
branches;
next	1.112;

1.112
date	2008.02.09.19.49.58;	author jost_boekemeier;	state Exp;
branches;
next	1.111;

1.111
date	2008.02.04.19.32.53;	author jost_boekemeier;	state Exp;
branches;
next	1.110;

1.110
date	2008.01.21.19.23.28;	author jost_boekemeier;	state Exp;
branches;
next	1.109;

1.109
date	2008.01.06.20.59.19;	author jost_boekemeier;	state Exp;
branches;
next	1.108;

1.108
date	2007.12.28.13.56.41;	author jost_boekemeier;	state Exp;
branches;
next	1.107;

1.107
date	2007.12.09.15.13.11;	author jost_boekemeier;	state Exp;
branches;
next	1.106;

1.106
date	2007.12.04.22.07.09;	author jost_boekemeier;	state Exp;
branches;
next	1.105;

1.105
date	2007.12.02.18.05.07;	author jost_boekemeier;	state Exp;
branches;
next	1.104;

1.104
date	2007.09.30.16.07.52;	author jost_boekemeier;	state Exp;
branches;
next	1.103;

1.103
date	2007.09.19.10.12.27;	author jost_boekemeier;	state Exp;
branches;
next	1.102;

1.102
date	2007.08.04.17.34.23;	author jost_boekemeier;	state Exp;
branches;
next	1.101;

1.101
date	2007.07.22.12.54.43;	author jost_boekemeier;	state Exp;
branches;
next	1.100;

1.100
date	2007.07.19.16.19.15;	author jost_boekemeier;	state Exp;
branches;
next	1.99;

1.99
date	2007.07.09.14.35.06;	author jost_boekemeier;	state Exp;
branches;
next	1.98;

1.98
date	2007.07.03.15.50.52;	author jost_boekemeier;	state Exp;
branches;
next	1.97;

1.97
date	2007.06.28.18.10.48;	author jost_boekemeier;	state Exp;
branches;
next	1.96;

1.96
date	2007.06.18.16.56.00;	author jost_boekemeier;	state Exp;
branches;
next	1.95;

1.95
date	2007.06.16.18.29.49;	author jost_boekemeier;	state Exp;
branches;
next	1.94;

1.94
date	2007.06.15.18.02.18;	author jost_boekemeier;	state Exp;
branches;
next	1.93;

1.93
date	2007.06.14.12.23.19;	author jost_boekemeier;	state Exp;
branches;
next	1.92;

1.92
date	2007.06.13.19.51.47;	author jost_boekemeier;	state Exp;
branches;
next	1.91;

1.91
date	2007.04.15.11.24.48;	author jost_boekemeier;	state Exp;
branches;
next	1.90;

1.90
date	2007.04.10.13.30.47;	author jost_boekemeier;	state Exp;
branches;
next	1.89;

1.89
date	2007.04.07.16.22.39;	author jost_boekemeier;	state Exp;
branches;
next	1.88;

1.88
date	2007.03.30.11.49.04;	author jost_boekemeier;	state Exp;
branches;
next	1.87;

1.87
date	2007.03.26.14.32.05;	author jost_boekemeier;	state Exp;
branches;
next	1.86;

1.86
date	2007.03.25.16.28.20;	author jost_boekemeier;	state Exp;
branches;
next	1.85;

1.85
date	2007.03.19.13.03.16;	author jost_boekemeier;	state Exp;
branches;
next	1.84;

1.84
date	2007.03.09.20.28.07;	author andremachado;	state Exp;
branches;
next	1.83;

1.83
date	2006.12.22.16.02.39;	author jost2345;	state Exp;
branches;
next	1.82;

1.82
date	2006.12.16.16.21.53;	author jost2345;	state Exp;
branches
	1.82.2.1;
next	1.81;

1.81
date	2006.12.15.10.31.25;	author jost2345;	state Exp;
branches;
next	1.80;

1.80
date	2006.12.09.09.35.01;	author jost2345;	state Exp;
branches;
next	1.79;

1.79
date	2006.12.02.16.26.45;	author jost2345;	state Exp;
branches;
next	1.78;

1.78
date	2006.11.25.17.00.31;	author jost2345;	state Exp;
branches;
next	1.77;

1.77
date	2006.09.10.17.31.11;	author jost2345;	state Exp;
branches;
next	1.76;

1.76
date	2006.09.05.20.40.32;	author jost2345;	state Exp;
branches;
next	1.75;

1.75
date	2006.08.28.18.05.11;	author jost2345;	state Exp;
branches;
next	1.74;

1.74
date	2006.08.27.14.40.11;	author jost2345;	state Exp;
branches;
next	1.73;

1.73
date	2006.08.21.17.41.52;	author jost2345;	state Exp;
branches;
next	1.72;

1.72
date	2006.08.19.13.20.00;	author jost2345;	state Exp;
branches;
next	1.71;

1.71
date	2006.08.19.12.34.00;	author jost2345;	state Exp;
branches;
next	1.70;

1.70
date	2006.08.13.21.48.35;	author jost2345;	state Exp;
branches;
next	1.69;

1.69
date	2006.08.08.17.20.45;	author jost2345;	state Exp;
branches;
next	1.68;

1.68
date	2006.07.27.16.16.29;	author jost2345;	state Exp;
branches;
next	1.67;

1.67
date	2006.07.23.20.32.47;	author jost2345;	state Exp;
branches;
next	1.66;

1.66
date	2006.07.19.15.25.34;	author jost2345;	state Exp;
branches;
next	1.65;

1.65
date	2006.07.16.20.29.25;	author jost2345;	state Exp;
branches;
next	1.64;

1.64
date	2006.07.02.20.28.42;	author jost2345;	state Exp;
branches;
next	1.63;

1.63
date	2006.06.27.20.44.33;	author jost2345;	state Exp;
branches;
next	1.62;

1.62
date	2006.06.21.19.53.09;	author jost2345;	state Exp;
branches;
next	1.61;

1.61
date	2006.06.19.20.37.14;	author jost2345;	state Exp;
branches;
next	1.60;

1.60
date	2006.04.30.17.01.55;	author jost2345;	state Exp;
branches;
next	1.59;

1.59
date	2006.04.20.17.16.08;	author jost2345;	state Exp;
branches;
next	1.58;

1.58
date	2006.04.12.17.46.46;	author jost2345;	state Exp;
branches;
next	1.57;

1.57
date	2006.03.19.14.42.44;	author jost2345;	state Exp;
branches
	1.57.2.1;
next	1.56;

1.56
date	2006.03.18.18.56.40;	author jost2345;	state Exp;
branches;
next	1.55;

1.55
date	2006.03.16.20.27.00;	author jost2345;	state Exp;
branches;
next	1.54;

1.54
date	2006.03.07.18.59.27;	author jost2345;	state Exp;
branches;
next	1.53;

1.53
date	2006.03.01.19.31.38;	author jost2345;	state Exp;
branches;
next	1.52;

1.52
date	2006.02.18.15.42.48;	author jost2345;	state Exp;
branches;
next	1.51;

1.51
date	2006.02.13.18.34.16;	author jost2345;	state Exp;
branches;
next	1.50;

1.50
date	2006.02.05.18.47.00;	author jost2345;	state Exp;
branches;
next	1.49;

1.49
date	2006.02.03.17.41.36;	author jost2345;	state Exp;
branches;
next	1.48;

1.48
date	2006.01.30.19.39.53;	author jost2345;	state Exp;
branches;
next	1.47;

1.47
date	2006.01.15.21.05.30;	author jost2345;	state Exp;
branches;
next	1.46;

1.46
date	2006.01.08.23.44.40;	author jost2345;	state Exp;
branches;
next	1.45;

1.45
date	2006.01.04.19.35.07;	author jost2345;	state Exp;
branches;
next	1.44;

1.44
date	2005.12.28.22.44.32;	author jost2345;	state Exp;
branches;
next	1.43;

1.43
date	2005.12.20.21.26.26;	author jost2345;	state Exp;
branches;
next	1.42;

1.42
date	2005.12.18.18.17.48;	author jost2345;	state Exp;
branches;
next	1.41;

1.41
date	2005.12.11.22.24.40;	author jost2345;	state Exp;
branches;
next	1.40;

1.40
date	2005.12.08.18.41.56;	author jost2345;	state Exp;
branches;
next	1.39;

1.39
date	2005.11.17.17.24.19;	author jost2345;	state Exp;
branches;
next	1.38;

1.38
date	2005.09.19.12.41.23;	author jost2345;	state Exp;
branches;
next	1.37;

1.37
date	2005.09.17.13.00.13;	author jost2345;	state Exp;
branches;
next	1.36;

1.36
date	2005.09.16.20.28.51;	author jost2345;	state Exp;
branches;
next	1.35;

1.35
date	2005.09.15.19.17.38;	author jost2345;	state Exp;
branches;
next	1.34;

1.34
date	2005.09.13.16.46.47;	author jost2345;	state Exp;
branches;
next	1.33;

1.33
date	2005.09.07.21.13.45;	author jost2345;	state Exp;
branches;
next	1.32;

1.32
date	2005.09.01.20.58.24;	author jost2345;	state Exp;
branches;
next	1.31;

1.31
date	2005.08.29.16.10.10;	author jost2345;	state Exp;
branches;
next	1.30;

1.30
date	2005.08.23.18.20.56;	author jost2345;	state Exp;
branches;
next	1.29;

1.29
date	2005.08.18.18.47.43;	author jost2345;	state Exp;
branches;
next	1.28;

1.28
date	2005.07.12.15.23.09;	author jost2345;	state Exp;
branches;
next	1.27;

1.27
date	2005.07.08.17.57.23;	author jost2345;	state Exp;
branches
	1.27.2.1;
next	1.26;

1.26
date	2005.07.03.20.13.31;	author jost2345;	state Exp;
branches;
next	1.25;

1.25
date	2005.07.01.17.39.05;	author jost2345;	state Exp;
branches;
next	1.24;

1.24
date	2005.06.21.20.17.30;	author jost2345;	state Exp;
branches;
next	1.23;

1.23
date	2005.06.19.20.45.40;	author jost2345;	state Exp;
branches;
next	1.22;

1.22
date	2005.04.30.14.47.02;	author jost2345;	state Exp;
branches;
next	1.21;

1.21
date	2005.04.17.21.13.11;	author jost2345;	state Exp;
branches;
next	1.20;

1.20
date	2005.04.07.17.31.31;	author jost2345;	state Exp;
branches;
next	1.19;

1.19
date	2005.03.13.13.23.13;	author jost2345;	state Exp;
branches;
next	1.18;

1.18
date	2005.03.09.17.24.26;	author jost2345;	state Exp;
branches;
next	1.17;

1.17
date	2005.03.07.19.36.51;	author jost2345;	state Exp;
branches;
next	1.16;

1.16
date	2005.02.20.12.19.44;	author jost2345;	state Exp;
branches;
next	1.15;

1.15
date	2005.02.05.11.26.30;	author jost2345;	state Exp;
branches;
next	1.14;

1.14
date	2005.02.03.16.56.07;	author jost2345;	state Exp;
branches;
next	1.13;

1.13
date	2005.01.31.16.18.46;	author jost2345;	state Exp;
branches;
next	1.12;

1.12
date	2005.01.28.16.32.52;	author jost2345;	state Exp;
branches;
next	1.11;

1.11
date	2005.01.02.17.45.12;	author jost2345;	state Exp;
branches;
next	1.10;

1.10
date	2004.12.12.09.57.25;	author jost2345;	state Exp;
branches;
next	1.9;

1.9
date	2004.11.27.13.45.48;	author jost2345;	state Exp;
branches;
next	1.8;

1.8
date	2004.11.24.23.18.16;	author jost2345;	state Exp;
branches;
next	1.7;

1.7
date	2004.11.20.16.19.14;	author jost2345;	state Exp;
branches;
next	1.6;

1.6
date	2004.11.19.16.54.33;	author jost2345;	state Exp;
branches;
next	1.5;

1.5
date	2004.11.18.21.39.55;	author jost2345;	state Exp;
branches;
next	1.4;

1.4
date	2004.10.31.17.08.13;	author jost2345;	state Exp;
branches;
next	1.3;

1.3
date	2004.10.04.16.32.50;	author jost2345;	state Exp;
branches;
next	1.2;

1.2
date	2004.09.21.12.21.30;	author jost2345;	state Exp;
branches;
next	1.1;

1.1
date	2004.09.19.18.45.13;	author jost2345;	state Exp;
branches;
next	;

1.27.2.1
date	2005.07.12.16.24.17;	author jost2345;	state Exp;
branches;
next	;

1.57.2.1
date	2006.04.23.19.09.08;	author jost2345;	state Exp;
branches;
next	;

1.82.2.1
date	2007.07.31.15.50.57;	author jost_boekemeier;	state Exp;
branches;
next	1.82.2.2;

1.82.2.2
date	2007.07.31.16.09.48;	author jost_boekemeier;	state Exp;
branches;
next	;

1.149.2.1
date	2009.09.11.16.19.17;	author jost_boekemeier;	state Exp;
branches;
next	;


desc
@@


1.186
log
@Version-7.1.4
@
text
@#-*- mode: rpm-spec; tab-width:4 -*-
%define version 7.1.4
%define release 1
%define PHP_MAJOR_VERSION %(((LANG=C rpm -q --queryformat "%{VERSION}" php) || echo "4.0.0") | tail -1 | sed 's/\\\..*$//')
%define PHP_MINOR_VERSION %(((LANG=C rpm -q --queryformat "%{VERSION}" php) || echo "4.0.0") | tail -1 | LANG=C cut -d. -f2)
%define PHP_RELEASE_VERSION %(((LANG=C rpm -q --queryformat "%{VERSION}" php) || echo "4.0.0") | tail -1 | LANG=C cut -d. -f3)
%define have_j2 %((rpm -q --whatprovides j2sdk) >/dev/null && echo 1 || echo 0)
%define have_j3 %((rpm -q --whatprovides jdk) >/dev/null && echo 1 || echo 0)
%define have_policy_modules %(if test -f /etc/selinux/config && ( test -d /etc/selinux/%{__policy_tree}/modules || test 2 -lt `echo %{_selinux_policy_version} | awk -F. '{print $1}'` ); then echo 1; else echo 0; fi)
%define have_policy_devel %(if test -f %{_datadir}/selinux/devel/Makefile; then echo 1; else echo 0; fi)

%define tomcat_name			tomcat
%define tomcat_webapps		%{_localstatedir}/lib/%{tomcat_name}/webapps
%define shared_java			%{_datadir}/java
%define shared_pear			%{_datadir}/pear
%global debug_package %{nil}

Name: php-java-bridge
Summary: PHP Hypertext Preprocessor to Java Bridge
Group: Development/Languages
Version: %{version}
Release: %{release}
License: LGPL
URL: http://www.sourceforge.net/projects/php-java-bridge
Source0: https://downloads.sourceforge.net/project/php-java-bridge/src/php-java-bridge_%{version}/php-java-bridge_%{version}.tar.gz

BuildRequires: httpd
BuildRequires: phpdoc >= 1.4.2
BuildRequires: ant >= 1.7.1
BuildRequires: ed

%if %{have_j3} == 1
BuildRequires: jdk >= 1.4.2
%else
%if %{have_j2} == 1
BuildRequires: j2sdk >= 1.4.2
%else
BuildRequires: java-devel >= 1.4.2
%endif
%endif
%if %{have_policy_modules} == 1
BuildRequires: selinux-policy
BuildRequires: policycoreutils checkpolicy coreutils
%if %{have_policy_devel} == 0
BuildRequires: selinux-policy-devel
%endif
%endif

# PHP 4 or PHP 5 or PHP 5.1
%if %{PHP_MAJOR_VERSION} == 4
Requires: php >= 4.3.2
Requires: php < 5.0.0
%else
%if %{PHP_MAJOR_VERSION} == 5
Requires: php >= 5.1.1
Requires: php < 6.0.0
%if (%{PHP_MINOR_VERSION} == 2 && %{PHP_RELEASE_VERSION} > 6) || (%{PHP_MINOR_VERSION} > 2)
%endif
%else
Requires: php >= 5.2.0
%endif
%endif
Requires: httpd 
Requires: %{tomcat_name}
%if %{have_policy_modules} == 1
Requires: policycoreutils coreutils
%endif


BuildRoot: %{_tmppath}/%{name}-root

%description 
Java module/extension for the PHP script language.  Contains the basic
files: java extension for PHP/Apache HTTP server and a simple back-end
which automatically starts and stops when the HTTP server
starts/stops. The bridge log appears in the http server error log.


%package devel
Group: Development/Libraries
Summary: PHP/Java Bridge development files and documentation
Requires: php-java-bridge = %{version}
%description devel
Contains the development documentation
and the development files needed to create java applications with
embedded PHP scripts.


%prep
echo Building for PHP %{PHP_MAJOR_VERSION}.

%setup -q

%build
set -x
PATH=/bin:%{_bindir}
LD_LIBRARY_PATH=/lib:%{_libdir}

# calculate java dir
%if %{have_j3} == 1
pkgid=`rpm -q --whatprovides jdk --queryformat "%{PKGID} %{VERSION}\n" | sed 's/\./0/g;s/_/./' |sort -r -k 2,2 -n | head -1 | awk '{print $1}'`
%else
%if %{have_j2} == 1
pkgid=`rpm -q --whatprovides j2sdk --queryformat "%{PKGID} %{VERSION}\n" | sed 's/\./0/g;s/_/./' |sort -r -k 2,2 -n | head -1 | awk '{print $1}'`
%else
pkgid=`rpm -q --whatprovides java-devel --queryformat "%{PKGID} %{VERSION}\n" | sed 's/\./0/g;s/_/./' |sort -r -k 2,2 -n | head -1 | awk '{print $1}'`
%endif
%endif
jdk=`rpm  -q --pkgid $pkgid`
java=`rpm -ql $jdk | grep 'bin/java$' | head -1`
java_dir=`dirname $java`
java_dir=`dirname $java_dir`
if test X`basename $java_dir` = Xjre; then
  java_dir=`dirname $java_dir`;
fi
echo "using java_dir: $java_dir"
if test X$java_dir = X; then echo "ERROR: java not installed" >2; exit 1; fi

ant clean &&
ant PhpDoc 2>/dev/null >/dev/null && 
ant && 
ant SrcZip

%if %{have_policy_modules} == 1
(cd security/module; make -f %{_datadir}/selinux/devel/Makefile; rm -rf tmp;)
%endif

%install
#rm -rf $RPM_BUILD_ROOT
echo >filelist
echo >filelist-devel

mod_dir=`pwd`/dist
mkdir -p $RPM_BUILD_ROOT/%{shared_java}
cp $mod_dir/JavaBridge.jar $RPM_BUILD_ROOT/%{shared_java}/JavaBridge-%{version}.jar; 
(cd $RPM_BUILD_ROOT/%{shared_java}; ln -fs JavaBridge-%{version}.jar JavaBridge.jar); 
echo %{shared_java}/JavaBridge.jar >>filelist-devel

files="PHPDebugger.php Client.inc GlobalRef.inc Java.inc JavaBridge.inc JavaProxy.inc NativeParser.inc Options.inc Parser.inc Protocol.inc SimpleParser.inc"
mkdir -p $RPM_BUILD_ROOT/%{shared_pear}/java
for i in $files; 
  do cp WebContent/META-INF/java/$i $RPM_BUILD_ROOT/%{shared_pear}/java/$i; 
  echo %{shared_pear}/java/$i >>filelist
done

files=JavaBridge.war
mkdir -p $RPM_BUILD_ROOT/%{tomcat_webapps}
for i in $files; 
  do cp $mod_dir/$i $RPM_BUILD_ROOT/%{tomcat_webapps}
  rm -f $mod_dir/$i; 
done

# server also contains the server documentation
mv server server.backup
mkdir server
(cd server.backup; find php -name "*.java" -print | cpio -dp ../server)
cp dist/src.zip server

%clean
rm -rf $RPM_BUILD_ROOT

%post
if test -f /etc/selinux/config; then
  if test %{have_policy_modules} -eq 1; then 
	/sbin/service httpd stop > /dev/null 2>&1
	/sbin/service %{tomcat_name} stop > /dev/null 2>&1
	%{_sbindir}/semodule -i %{_docdir}/%{name}/security/module/php-java-bridge.pp
	%{_sbindir}/semodule -i %{_docdir}/%{name}/security/module/php-java-bridge-tomcat.pp
	/sbin/service httpd start > /dev/null 2>&1
	/sbin/service %{tomcat_name} start > /dev/null 2>&1
  else
	te=/etc/selinux/%{__policy_tree}/src/policy/domains/program/php-java-bridge.te
	fc=/etc/selinux/%{__policy_tree}/src/policy/file_contexts/program/php-java-bridge.fc
	echo "SECURITY ENHANCED LINUX"
	echo "-----------------------"
	echo "You are running a SELinx system. Please install the policy sources:"
	echo "rpm -i selinux-policy-%{__policy_tree}-sources-*.rpm"
	echo "sh %{_docdir}/%{name}-%{version}/security/update_policy.sh \\"
	echo "					/etc/selinux/%{__policy_tree}/src/policy"
	echo "Please see README document for more information."
	echo
	echo "Or type: setenforce 0  to disable SEL temporarily."
	echo
  fi
fi
if test -d /var/www/html &&  ! test -e /var/www/html/JavaBridge; then
  cp -r %{tomcat_webapps}/JavaBridge /var/www/html/;
  ed /var/www/html/JavaBridge/java/Java.inc <<\EOF
1,11s/# define ("JAVA_HOSTS", "127.0.0.1:8787");/define ("JAVA_HOSTS", "127.0.0.1:8080");/
w
q
EOF
fi
echo "PHP/Java Bridge installed. Start with:"
echo "service %{tomcat_name} restart"
echo "service httpd restart"
echo "Then visit: http://localhost/JavaBridge or http://localhost:8080/JavaBridge"
echo
exit 0

%post devel
exit 0

%preun
if [ $1 = 0 ]; then
	/sbin/service httpd stop > /dev/null 2>&1
	if test %{have_policy_modules} -eq 1; then 
		%{_sbindir}/semodule -r php-java-bridge
		%{_sbindir}/semodule -r php-java-bridge-tomcat
	fi
	if test -e /var/www/html/JavaBridge && test -e %{tomcat_webapps}/JavaBridge && test %{tomcat_webapps}/JavaBridge -ef /var/www/html/JavaBridge; then
		rm -f /var/www/html/JavaBridge;
	fi
	rm -rf %{tomcat_webapps}/JavaBridge %{tomcat_webapps}/work/*
	/sbin/service httpd start > /dev/null 2>&1
fi

%preun devel
if [ $1 = 0 ]; then
	/bin/true
fi


%files -f filelist
%defattr(-,root,root)
%attr(-,tomcat,tomcat) %{tomcat_webapps}/JavaBridge.war
%doc README FAQ.html COPYING CREDITS NEWS test.php INSTALL.J2EE security 

%files devel -f filelist-devel
%defattr(-,root,root)
%attr(755,root,root) %{shared_java}/JavaBridge-%{version}.jar 
%doc FAQ.html CREDITS ChangeLog README PROTOCOL.TXT COPYING server documentation examples php_java_lib NEWS
@


1.185
log
@Release-7.1.3
@
text
@d2 1
a2 1
%define version 7.1.3
@


1.184
log
@Release-7.1.2
@
text
@d2 1
a2 1
%define version 7.1.2
@


1.183
log
@Release-7.1.2
@
text
@a120 1
ant JavaDoc &&
d129 1
a129 1
rm -rf $RPM_BUILD_ROOT
d134 1
a134 1

d139 1
a139 1
files="PHPDebugger.php Client.inc GlobalRef.inc Java.inc JavaBridge.inc JavaProxy.inc NativeParser.inc Options.inc Parser.inc Protocol.inc SimpleParser.inc JavaProxy.php"
d142 1
a142 1
  do cp server/META-INF/java/$i $RPM_BUILD_ROOT/%{shared_pear}/java/$i; 
a155 1
cp -r server.backup/documentation server
@


1.182
log
@Release-7.1.1
@
text
@d2 1
a2 1
%define version 7.1.1
@


1.181
log
@Renamed PHP_FCGI_CHILDREN to PHP_JAVA_BRIDGE_FCGI_CHILDREN to avoid PHP7 spawning PHP_FCGI_CHILDREN  childs by itself
@
text
@d2 1
a2 1
%define version 7.0.2
a135 9
files="php-script script-api"
mkdir -p $RPM_BUILD_ROOT/%{shared_java}
for i in $files; 
  do cp $mod_dir/${i}.jar $RPM_BUILD_ROOT/%{shared_java}/${i}-%{version}.jar; 
  (cd $RPM_BUILD_ROOT/%{shared_java}; ln -fs ${i}-%{version}.jar ${i}.jar;)
  rm -f $mod_dir/$i; 
  echo %{shared_java}/${i}-%{version}.jar >>filelist-devel
  echo %{shared_java}/${i}.jar >>filelist-devel
done
@


1.180
log
@Release-7.0.1
@
text
@d2 1
a2 1
%define version 7.0.1
@


1.179
log
@Version 7.0.0 for PHP 7 released
@
text
@d2 1
a2 1
%define version 7.0.0
@


1.178
log
@updated SEL
@
text
@d2 1
a2 1
%define version 6.2.3
@


1.177
log
@updated RPM
@
text
@d9 1
a9 1
%define have_policy_modules %(if test -f /etc/selinux/config && test -d /etc/selinux/%{__policy_tree}/modules; then echo 1; else echo 0; fi)
d175 1
a175 1
  if test -d /etc/selinux/%{__policy_tree}/modules; then 
d178 2
a179 2
	%{_sbindir}/semodule -i %{_docdir}/%{name}-%{version}/security/module/php-java-bridge.pp
	%{_sbindir}/semodule -i %{_docdir}/%{name}-%{version}/security/module/php-java-bridge-tomcat.pp
d218 3
a220 3
	if test -d /etc/selinux/%{__policy_tree}/modules; then 
		%{_sbindir}/semodule -r javabridge
		%{_sbindir}/semodule -r javabridge_tomcat
@


1.176
log
@updated RPM
@
text
@d30 1
d193 2
d198 6
a203 1
  ln -fs %{tomcat_webapps}/JavaBridge /var/www/html/;
d208 1
@


1.175
log
@fixed crash in WriterOutputStream.java
@
text
@d12 1
a12 1
%define tomcat_name			tomcat6
d16 1
d25 1
a25 2
Source0: http://osdn.dl.sourceforge.net/sourceforge/php-java-bridge/php-java-bridge_%{version}.tar.gz

a159 1
#  echo %{tomcat_webapps}/$i >>filelist
@


1.174
log
@*** empty log message ***
@
text
@d2 1
a2 1
%define version 6.2.2
@


1.173
log
@Release-6-2-1
@
text
@d2 1
a2 1
%define version 6.2.1
@


1.172
log
@Check PHP version during startup to avoid problems reported with PHP < 5.3
@
text
@d2 1
a2 1
%define version 6.2.1rc6
@


1.171
log
@*** empty log message ***
@
text
@d2 1
a2 1
%define version 6.2.1rc5
@


1.170
log
@Release-6-2-1
@
text
@d2 1
a2 1
%define version 6.2.1
@


1.169
log
@version 6-2-1
@
text
@d2 1
a2 1
%define version 6.2.1rc4
@


1.168
log
@Release-6-2-1
@
text
@d2 1
a2 1
%define version 6.2.1rc3
@


1.167
log
@*** empty log message ***
@
text
@d2 1
a2 1
%define version 6.2.1rc2
@


1.166
log
@*** empty log message ***
@
text
@d2 1
a2 1
%define version 6.2.1-rc1
@


1.165
log
@Release-6-2-1
@
text
@d2 1
a2 1
%define version 6.2.1
@


1.164
log
@Release-6-1-2-2
@
text
@d2 1
a2 1
%define version 6.1.2.2
@


1.163
log
@Release-6-1-2-1
@
text
@d2 1
a2 1
%define version 6.1.2.1
@


1.162
log
@Release-6-1-2
@
text
@d2 1
a2 1
%define version 6.1.2
@


1.161
log
@Release-6-1-1
@
text
@d2 1
a2 1
%define version 6.1.1
d118 1
a118 1
ant && 
d121 1
@


1.160
log
@Release-6-1-0
@
text
@d2 1
a2 1
%define version 6.1.0
@


1.159
log
@Release-6-0-4
@
text
@d2 1
a2 1
%define version 6.0.4
@


1.158
log
@Release-6-0-3
@
text
@d2 1
a2 1
%define version 6.0.3
d12 1
a12 1
%define tomcat_name			tomcat5
d27 1
a27 10
BuildRequires: php-devel >= 4.3.4
BuildRequires: gcc >= 3.2.3
BuildRequires: mono-core >= 1.1.8
BuildRequires: gcc-c++
BuildRequires: gcc-java >= 3.3.3
BuildRequires: libstdc++-devel
BuildRequires: httpd make 
BuildRequires: libtool >= 1.4.3
BuildRequires: automake >= 1.6.3
BuildRequires: autoconf >= 2.57
a56 1
Requires: php-process
a59 1
Requires: php-process
a63 1
Requires: libgcj
a77 10
%package mono
Group: Development/Languages
Summary: Mono module/extension for the PHP script language.
Requires: mono-core >= 1.1.8
%description mono
Java module/extension for the PHP script language.  Contains the basic
files: java extension for PHP/Apache HTTP server and a simple back-end
which automatically starts and stops when the HTTP server
starts/stops. The bridge log appears in the http server error log.

d118 5
a122 3
phpize
./configure --libdir=%{_libdir} --prefix=%{_exec_prefix} --with-java=$java_dir --with-mono
make
a128 2

%makeinstall | tee install.log
a129 1
echo >filelist-mono
d132 1
a132 1
mod_dir=`cat install.log | sed -n '/Installing shared extensions:/s///p' | awk '{print $1}'`
d147 1
a147 1
files="Client.inc GlobalRef.inc Java.inc JavaBridge.inc JavaProxy.inc NativeParser.inc Options.inc Parser.inc Protocol.inc SimpleParser.inc JavaProxy.php"
a153 32
files='java libnatcJavaBridge.so java.so'
mkdir -p $RPM_BUILD_ROOT/$mod_dir
for i in $files; do
 if test -f $mod_dir/$i; then
  cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i
  rm -f $mod_dir/$i
  echo $mod_dir/$i >>filelist
 fi
done
i=JavaBridge.jar
cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i
rm -f $mod_dir/$i

files="Mono.inc"
mkdir -p $RPM_BUILD_ROOT/%{shared_pear}/mono
for i in $files; 
  do cp server/META-INF/java/$i $RPM_BUILD_ROOT/%{shared_pear}/mono/$i; 
  echo %{shared_pear}/mono/$i >>filelist-mono
done

files='ICSharpCode.SharpZipLib.dll IKVM.AWT.WinForms.dll IKVM.GNU.Classpath.dll IKVM.Runtime.dll'
for i in $files; do
 if test -f $mod_dir/$i; then
  cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i
  rm -f $mod_dir/$i
  echo $mod_dir/$i >>filelist-mono
 fi
done
i=MonoBridge.exe
cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i
rm -f $mod_dir/$i

a161 7
mkdir -p $RPM_BUILD_ROOT/etc/php.d
cat java.ini  >$RPM_BUILD_ROOT/etc/php.d/java.ini
echo /etc/php.d/java.ini >>filelist

mkdir $RPM_BUILD_ROOT/$mod_dir/lib
echo $mod_dir/lib >>filelist

a165 1
cp server.backup/natcJavaBridge.c server
d167 1
a167 1
cp server.backup/src.zip server
a178 1
	chcon -t bin_t %{_libdir}/php/modules/java
a227 1
%attr(755,root,root) %{_libdir}/php/modules/JavaBridge.jar
d229 1
a229 6
%doc README README.GCJ FAQ.html COPYING CREDITS NEWS test.php INSTALL.J2EE INSTALL.LINUX security 

%files mono -f filelist-mono
%defattr(-,root,root)
%attr(755,root,root) %{_libdir}/php/modules/MonoBridge.exe
%doc README.MONO+NET COPYING CREDITS NEWS tests.mono+net
d234 1
a234 1
%doc FAQ.html CREDITS README.MONO+NET ChangeLog README PROTOCOL.TXT COPYING server documentation examples php_java_lib NEWS INSTALL.LINUX
@


1.157
log
@Release-6-0-0
@
text
@d2 1
a2 1
%define version 6.0.0
@


1.156
log
@Release-5-5-5
@
text
@d2 1
a2 1
%define version 5.5.5
@


1.155
log
@Release-5-5-5
@
text
@d298 1
@


1.154
log
@Release-5-5-5
@
text
@a28 1
BuildRequires: gcj >= 4.1.2
a185 3
i=RunJavaBridge
cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i
rm -f $mod_dir/$i
a204 3
i=RunMonoBridge
cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i
rm -f $mod_dir/$i
a227 2
cp server.backup/RunJavaBridge.c server
cp server.backup/RunMonoBridge.c server
a241 1
	chcon -t javabridge_exec_t %{_libdir}/php/modules/RunJavaBridge
a291 1
%attr(6111,apache,apache) %{_libdir}/php/modules/RunJavaBridge
a297 2
%attr(111,root,root) %{_libdir}/php/modules/RunMonoBridge
%attr(755,root,root) %{_libdir}/php/modules/MonoBridge.exe
@


1.153
log
@*** empty log message ***
@
text
@d2 1
a2 1
%define version 5.5.4.1
d29 1
@


1.152
log
@Release-5-5-4
@
text
@d2 1
a2 1
%define version 5.5.4
@


1.151
log
@Release 5.5.3
@
text
@d2 1
a2 1
%define version 5.5.3
@


1.150
log
@Merged Release-5-5-2 branch into HEAD
@
text
@d2 1
a2 1
%define version 5.5.2
@


1.149
log
@Fedora 11 SEL updates
@
text
@d2 1
a2 1
%define version 5.5.1
@


1.149.2.1
log
@Release-5-5-2
@
text
@d2 1
a2 1
%define version 5.5.2
@


1.148
log
@Fedora 11 SEL updates
@
text
@d3 1
a3 1
%define release 2
@


1.147
log
@Fedora 11 SEL updates
@
text
@a77 1
Requires: php-process
@


1.146
log
@Release-5-5-1
@
text
@d3 1
a3 1
%define release 1
d6 1
d65 3
d70 1
d78 1
@


1.145
log
@Release-5-5
@
text
@d2 1
a2 1
%define version 5.5
@


1.144
log
@Release-5.4.4.2
@
text
@d2 1
a2 1
%define version 5.4.4.2
d36 3
d152 1
a152 1
files="php-script.jar script-api.jar"
d155 2
a156 1
  do cp $mod_dir/$i $RPM_BUILD_ROOT/%{shared_java}/$i; 
d158 2
a159 1
  echo %{shared_java}/$i >>filelist-devel
d161 3
a163 2
cp $mod_dir/JavaBridge.jar $RPM_BUILD_ROOT/%{shared_java}/JavaBridge.jar; 
#echo %{shared_java}/JavaBridge.jar >>filelist-devel
d215 1
a215 1
  echo %{tomcat_webapps}/$i >>filelist
d309 1
a309 1
%attr(755,root,root) %{shared_java}/JavaBridge.jar
@


1.143
log
@Release-5-4-4-2
@
text
@d2 1
a2 1
%define version 5.4.4.2rc1
@


1.142
log
@Release-5-4-4-2
@
text
@d2 1
a2 1
%define version 5.4.4.2rc
@


1.141
log
@Release-5-4-4-2
@
text
@d2 1
a2 1
%define version 5.4.4.2_test3
@


1.140
log
@Release-5-4-4-2
@
text
@d2 1
a2 1
%define version 5.4.4.2_test2
@


1.139
log
@Release-5-4-4-2
@
text
@d2 1
a2 1
%define version 5.4.4.2
@


1.138
log
@*** empty log message ***
@
text
@d2 1
a2 1
%define version 5.4.4.1
@


1.137
log
@Release-5-4-4
@
text
@d2 1
a2 1
%define version 5.4.4
@


1.136
log
@eclipse birt integration
@
text
@d2 1
a2 1
%define version 5.4.3.2
@


1.135
log
@Version 5.4.3.2
@
text
@a222 1
cp -r server.backup/javabridge.policy server 
@


1.134
log
@Release-5-4-3-1
@
text
@d2 1
a2 1
%define version 5.4.3.1
@


1.133
log
@Release-5-4-3
@
text
@d2 1
a2 1
%define version 5.4.3
@


1.132
log
@Release-5-4-2
@
text
@d2 1
a2 1
%define version 5.4.2
@


1.131
log
@Release-5-4-1
@
text
@d2 1
a2 1
%define version 5.4.1
@


1.130
log
@Backward compatibility with BEA WL 8.1
@
text
@d2 1
a2 1
%define version 5.4.0
d166 1
a166 1
files='java libnatcJavaBridge.so'
d213 2
d294 1
a294 1
%doc README FAQ.html COPYING CREDITS NEWS test.php INSTALL.J2EE INSTALL.LINUX security 
@


1.129
log
@java autostart removed
@
text
@d166 1
a166 1
files='java libnatcJavaBridge.so java.so'
d189 1
a189 1
files='mono.so ICSharpCode.SharpZipLib.dll IKVM.AWT.WinForms.dll IKVM.GNU.Classpath.dll IKVM.Runtime.dll'
a212 3
cat java.ini  >$RPM_BUILD_ROOT/etc/php.d/java.ini
cat mono.ini  >$RPM_BUILD_ROOT/etc/php.d/mono.ini
echo /etc/php.d/java.ini >>filelist
d237 1
a237 1
	%{_sbindir}/semodule -i %{_docdir}/%{name}-tomcat-%{version}/security/module/php-java-bridge-tomcat.pp
a295 1
%attr(-,root,root) /etc/php.d/mono.ini
d298 1
a298 1
%doc README.MONO+NET COPYING CREDITS NEWS
@


1.128
log
@Backward compatibility with BEA WL 8.1
@
text
@d2 1
a2 1
%define version 5.3.4.1
d66 1
a91 28

%package lucene
Group: System Environment/Daemons
Summary: lucene library for PHP
Requires: php-java-bridge
Requires: lucene
%description lucene
Lucene search library for PHP

%package itext
Group: System Environment/Daemons
Summary: itext library for PHP
Requires: php-java-bridge
%description itext
PDF manipulation library for PHP


%package tomcat
Group: System Environment/Daemons
Summary: Tomcat/J2EE back-end for the PHP/Java Bridge
Requires: php-java-bridge = %{version}
Requires: tomcat5
%description tomcat
Deploys the j2ee back-end into the tomcat servlet engine.  The tomcat
back-end is more than 2 times faster than the standalone back-end but
less secure; it uses named pipes instead of abstract local "unix
domain" sockets.

a144 3
echo >filelist-itext
echo >filelist-lucene
echo >filelist-tomcat
d159 1
a159 1
files="Client.inc GlobalRef.inc Java.inc JavaBridge.inc JavaProxy.inc NativeParser.inc Options.inc Parser.inc Protocol.inc SimpleParser.inc"
a203 8
mkdir -p $RPM_BUILD_ROOT/%{_datadir}/pear/itext
cp unsupported/itext.jar $RPM_BUILD_ROOT/%{_datadir}/pear/itext
echo %{_datadir}/pear/itext >>filelist-itext

mkdir -p $RPM_BUILD_ROOT/%{_datadir}/pear/lucene
echo %{_datadir}/pear/lucene >>filelist-lucene


d209 1
a209 1
  echo %{tomcat_webapps}/$i >>filelist-tomcat
a212 1
cat java-servlet.ini  >$RPM_BUILD_ROOT/etc/php.d/java-servlet.ini
d238 1
d240 1
d244 1
d254 1
a254 27
	echo "Please see INSTALL and README documents for more information."
	echo
  fi
fi
echo "PHP/Java Bridge installed."
echo "Now install the tomcat or J2EE back-end or the native (lucene/itext) libs."
echo
exit 0

%post tomcat
if test -f /etc/selinux/config; then
  if test -d /etc/selinux/%{__policy_tree}/modules; then 
	/sbin/service httpd stop > /dev/null 2>&1
	/sbin/service tomcat5 stop > /dev/null 2>&1
	%{_sbindir}/semodule -i %{_docdir}/%{name}-tomcat-%{version}/security/module/php-java-bridge-tomcat.pp
	/sbin/service httpd start > /dev/null 2>&1
	/sbin/service tomcat5 start > /dev/null 2>&1
  else
	te=/etc/selinux/%{__policy_tree}/src/policy/domains/program/php-java-bridge.te
	fc=/etc/selinux/%{__policy_tree}/src/policy/file_contexts/program/php-java-bridge.fc
	echo "SECURITY ENHANCED LINUX"
	echo "-----------------------"
	echo "You are running a SELinx system. Please install the policy sources:"
	echo "rpm -i selinux-policy-%{__policy_tree}-sources-*.rpm"
	echo "sh %{_docdir}/%{name}-tomcat-%{version}/security/update_policy.sh \\"
	echo "							/etc/selinux/%{__policy_tree}/src/policy"
	echo "Please see INSTALL and README documents for more information."
d261 2
a262 2
echo "PHP/Java Bridge tomcat back-end installed. Start with:"
echo "service tomcat5 restart"
d275 1
a276 5
	/sbin/service httpd start > /dev/null 2>&1
fi

%preun tomcat
if [ $1 = 0 ]; then
d281 1
a281 3
	if test -d /etc/selinux/%{__policy_tree}/modules; then 
		%{_sbindir}/semodule -r javabridge_tomcat
	fi
d294 2
a295 1
%doc README FAQ.html COPYING CREDITS NEWS test.php INSTALL.LINUX security 
a303 13
%files itext -f filelist-itext
%defattr(-,root,root)
%doc examples/office

%files lucene -f filelist-lucene
%defattr(-,root,root)
%doc examples/search

%files tomcat -f filelist-tomcat
%defattr(-,tomcat,tomcat)
%attr(-,root,root) /etc/php.d/java-servlet.ini
%doc %attr(-,root,root) README FAQ.html INSTALL.J2EE COPYING security  

d307 1
a307 1
%doc FAQ.html CREDITS README.GNU_JAVA README.MONO+NET ChangeLog README PROTOCOL.TXT COPYING server documentation examples php_java_lib NEWS INSTALL.LINUX INSTALL
@


1.127
log
@Release 5.3.4
@
text
@d2 1
a2 1
%define version 5.3.4
@


1.126
log
@Release 5.3.3.1
@
text
@d2 1
a2 1
%define version 5.3.3.1
@


1.125
log
@Apache/IIS and JSR 223 integration
@
text
@d2 1
a2 1
%define version 5.3.3
d11 1
a11 1
%define tomcat_name        tomcat5
d13 2
a14 2
%define shared_java        %{_datadir}/java
%define shared_pear        %{_datadir}/pear
d132 1
a132 1
%setup
d160 1
a160 1
./configure --prefix=%{_exec_prefix} --with-java=$java_dir --with-mono
d262 7
a268 6
mv server.backup/documentation server
mv server.backup/javabridge.policy server 
mv server.backup/WEB-INF server
rm -rf server/WEB-INF/lib server/WEB-INF/classes server/WEB-INF/cgi
mv server.backup/test server
(cd documentation; ln -s ../server/documentation/API .)
d277 3
a279 3
    %{_sbindir}/semodule -i %{_docdir}/%{name}-%{version}/security/module/php-java-bridge.pp
    chcon -t javabridge_exec_t %{_libdir}/php/modules/RunJavaBridge
    chcon -t bin_t %{_libdir}/php/modules/java
d284 2
a285 2
    echo "SECURITY ENHANCED LINUX"
    echo "-----------------------"
d289 1
a289 1
    echo "                          /etc/selinux/%{__policy_tree}/src/policy"
d291 1
a291 1
    echo
d304 1
a304 1
    %{_sbindir}/semodule -i %{_docdir}/%{name}-tomcat-%{version}/security/module/php-java-bridge-tomcat.pp
d310 2
a311 2
    echo "SECURITY ENHANCED LINUX"
    echo "-----------------------"
d315 1
a315 1
    echo "                          /etc/selinux/%{__policy_tree}/src/policy"
d317 1
a317 1
    echo
d335 1
a335 1
    if test -d /etc/selinux/%{__policy_tree}/modules; then 
d344 2
a345 2
      rm -f /var/www/html/JavaBridge;
    fi
d347 1
a347 1
    if test -d /etc/selinux/%{__policy_tree}/modules; then 
d354 1
a354 1
   /bin/true
d369 1
a369 1
%doc README.MONO+NET COPYING CREDITS NEWS tests.mono+net
d387 1
a387 1
%doc FAQ.html CREDITS README.GNU_JAVA README.MONO+NET ChangeLog README PROTOCOL.TXT COPYING server documentation examples tests.php5 php_java_lib NEWS INSTALL.LINUX INSTALL
@


1.124
log
@PR#2157571
@
text
@d2 1
a2 1
%define version 5.3.2.1.2
@


1.123
log
@Release-5-3-2-1-1
@
text
@d2 1
a2 1
%define version 5.3.2.1.1
@


1.122
log
@Release-5-3-2-1
@
text
@d2 1
a2 1
%define version 5.3.2.1
@


1.121
log
@Release-5-3-2
@
text
@d2 1
a2 1
%define version 5.3.2
@


1.120
log
@Release-5-3-1
@
text
@d2 1
a2 1
%define version 5.3.1
@


1.119
log
@Release-5-2-3-1
@
text
@d2 1
a2 1
%define version 5.2.3.1
@


1.118
log
@Release-5-2-3
@
text
@d2 1
a2 1
%define version 5.2.3
@


1.117
log
@*** empty log message ***
@
text
@d2 1
a2 1
%define version 5.2.2.4
@


1.116
log
@Release-5-2-2-1
@
text
@d2 1
a2 1
%define version 5.2.2.1
d187 1
a187 1
echo %{shared_java}/JavaBridge.jar >>filelist-devel
a328 3
mkdir -p %{_exec_prefix}/java/packages/lib/ext/ 2>/dev/null
ln -fs %{shared_java}/JavaBridge.jar %{_exec_prefix}/java/packages/lib/ext/
ln -fs %{shared_java}/php-script.jar %{_exec_prefix}/java/packages/lib/ext/
d353 1
a353 1
	rm -f %{_exec_prefix}/java/packages/lib/ext/JavaBridge.jar %{_exec_prefix}/java/packages/lib/ext/php-java.jar
a360 1
%attr(755,root,root) %{shared_java}/JavaBridge.jar
d385 1
@


1.115
log
@Release-5-2-2
@
text
@d2 1
a2 1
%define version 5.2.2
@


1.114
log
@Release-5-2-1
@
text
@d2 1
a2 1
%define version 5.2.1
@


1.113
log
@Release-5-2-0
@
text
@d2 1
a2 1
%define version 5.2.0
d212 7
@


1.112
log
@Release-5-1-2
@
text
@d2 1
a2 1
%define version 5.1.2
@


1.111
log
@Version-5-1-1
@
text
@d2 1
a2 1
%define version 5.1.1
@


1.110
log
@Release-5-0-1
@
text
@d2 1
a2 1
%define version 5.1.0
@


1.109
log
@Release-5-0-0
@
text
@d2 1
a2 1
%define version 5.0.0
@


1.108
log
@Release-4-3-3
@
text
@d2 1
a2 1
%define version 4.3.3
d95 2
a96 1
Requires: php-java-bridge = %{version}
d103 1
a103 1
Requires: php-java-bridge = %{version}
d163 1
a163 1
(cd security/module; make; rm -rf tmp;)
a231 1
cp unsupported/lucene.jar $RPM_BUILD_ROOT/%{_datadir}/pear/lucene
@


1.107
log
@Release-4-3-2
@
text
@d2 1
a2 1
%define version 4.3.2
d382 1
a382 1
%doc FAQ.html CREDITS README.GNU_JAVA README.MONO+NET ChangeLog README PROTOCOL.TXT COPYING server documentation examples tests.php5 tests.php4 php_java_lib NEWS INSTALL.LINUX INSTALL
@


1.106
log
@Release-4-3-1a
@
text
@d2 1
a2 1
%define version 4.3.1a
d6 2
a7 1
%define have_j2 %((rpm -q --whatprovides j2re || rpm -q --whatprovides j2sdk) >/dev/null && echo 1 || echo 0)
d36 3
d44 1
d139 3
d147 1
@


1.105
log
@Release-4-3-1
@
text
@d2 1
a2 1
%define version 4.3.1
@


1.104
log
@Release-4-3-0
@
text
@d2 1
a2 1
%define version 4.3.0
@


1.103
log
@Release-4-3-0
@
text
@d2 1
a2 1
%define version 4.3.0test1
d27 1
d75 27
d150 1
a150 1
./configure --prefix=%{_exec_prefix} --with-java=$java_dir
d161 3
d202 24
d237 1
d351 15
@


1.102
log
@Release-4-2-2
@
text
@d2 1
a2 1
%define version 4.2.2
a220 1
%{_libdir}/php/modules/java --convert %{_datadir}/pear ""
a263 1
	rm -rf %{_datadir}/pear/java/Bridge.php %{_datadir}/pear/rt
@


1.101
log
@Release-4-2-1
@
text
@d2 1
a2 1
%define version 4.2.1
@


1.100
log
@Release-4-2-0
@
text
@d2 1
a2 1
%define version 4.2.0
@


1.99
log
@Release-4-1-8
@
text
@d2 1
a2 1
%define version 4.1.8
@


1.98
log
@Release-4-1-7
@
text
@d2 1
a2 1
%define version 4.1.7
@


1.97
log
@Release-4-1-5
@
text
@d2 1
a2 1
%define version 4.1.5
@


1.96
log
@Release-4-1-2
@
text
@d2 1
a2 1
%define version 4.1.2
@


1.95
log
@Release-4-1-1
@
text
@d2 1
a2 1
%define version 4.1.1
@


1.94
log
@Release-4-1-0b
@
text
@d2 1
a2 1
%define version 4.1.0b
@


1.93
log
@Release-4-1-0a
@
text
@d2 1
a2 1
%define version 4.1.0a
d52 1
a52 4
%if %{PHP_MAJOR_VERSION} == 6
Requires: php >= 6.0.0
%else
%if %{PHP_MINOR_VERSION} == 1
d54 1
d56 1
a56 3
Requires: php >= 5.0.4
Requires: php < 5.1.0
%endif
@


1.92
log
@Release-4-1-0
@
text
@d2 1
a2 1
%define version 4.1.0
@


1.91
log
@Release-3-0-8
@
text
@d2 1
a2 1
%define version 4.0.8a
@


1.90
log
@Release-3-0-8
@
text
@d2 1
a2 1
%define version 4.0.8
@


1.89
log
@Release-3-0-8
@
text
@d2 1
a2 1
%define version 4.0.8_
@


1.88
log
@Release-4-0-7
@
text
@d2 1
a2 1
%define version 4.0.7
@


1.87
log
@Release-4-0-6
@
text
@d2 1
a2 1
%define version 4.0.6
@


1.86
log
@Release-4-0-5
@
text
@d2 1
a2 1
%define version 4.0.5
@


1.85
log
@Release-4-0-2
@
text
@d2 1
a2 1
%define version 4.0.2
@


1.84
log
@Files update 3.2.2 to 4.0.1. Extracted from the src.tar.gz downloaded from sf.net, uploaded by Jost Boekemeier. Update to repository by Andre Felipe Machado.
@
text
@d2 1
a2 1
%define version 4.0.1
d152 1
a152 1
files="Client.inc GlobalRef.inc Java.inc JavaProxy.inc NativeParser.inc Options.inc Parser.inc Protocol.inc SimpleParser.inc"
d299 1
a299 1
%doc README COPYING CREDITS NEWS test.php INSTALL.LINUX security 
d304 1
a304 1
%doc %attr(-,root,root) README INSTALL.J2EE COPYING security  
d308 1
a308 1
%doc CREDITS README.GNU_JAVA README.MONO+NET ChangeLog README PROTOCOL.TXT COPYING server documentation examples tests.php5 tests.php4 php_java_lib NEWS INSTALL.LINUX INSTALL
@


1.83
log
@Release-3-2-2
@
text
@d2 1
a2 1
%define version 3.2.2
d152 1
a152 1
files="Client.php GlobalRef.php Java.php JavaProxy.php NativeParser.php Options.php Parser.php Protocol.php SimpleParser.php"
d155 1
a155 1
  do cp java/$i $RPM_BUILD_ROOT/%{shared_pear}/java/$i; 
d304 1
a304 1
%doc %attr(-,root,root) README INSTALL.J2EE INSTALL.ORACLE INSTALL.WEBSPHERE COPYING security  
d308 1
a308 1
%doc CREDITS ABOUT.HTM README.GNU_JAVA README.MONO+NET ChangeLog README PROTOCOL.TXT COPYING server documentation examples tests.php5 tests.php4 php_java_lib NEWS INSTALL.LINUX INSTALL
@


1.82
log
@Release-3-2-1
@
text
@d2 1
a2 1
%define version 3.2.1
@


1.82.2.1
log
@Release-3-2-1b
@
text
@d2 1
a2 1
%define version 3.2.1a
@


1.82.2.2
log
@Release-3-2-1b
@
text
@d2 1
a2 1
%define version 3.2.1b
@


1.81
log
@Release-3-2-1
@
text
@d304 1
a304 1
%doc %attr(-,root,root) README INSTALL.J2EE INSTALL.J2SE INSTALL.ORACLE INSTALL.WEBSPHERE COPYING security  
@


1.80
log
@Release-3-2-1
@
text
@d304 1
a304 1
%doc %attr(-,root,root) README INSTALL.J2EE INSTALL.ORACLE INSTALL.WEBSPHERE COPYING security  
@


1.79
log
@Release-3-2-1
@
text
@d22 1
a22 1
Source0: http://osdn.dl.sourceforge.net/sourceforge/php-java-bridge/php-java-bridge_%{version}.tar.bz2
d28 1
a28 1
BuildRequires: gcc-java
d159 1
a159 1
files='java libnatcJavaBridge.so JavaBridge.jar java.so'
d171 3
d297 2
a298 2
%attr(731,root,root) %{_libdir}/php/modules/JavaBridge.jar
%attr(731,root,root) %{shared_java}/JavaBridge.jar
@


1.78
log
@Release-3-2-1
@
text
@d8 1
d40 1
d42 3
@


1.77
log
@Release-3-1-8
@
text
@d2 1
a2 1
%define version 3.1.8
d289 2
@


1.76
log
@Release-3-1-8rc3
@
text
@d2 1
a2 1
%define version 3.1.8rc3
d274 1
a274 1
	rm -rf %{tomcat_webapps}/JavaBridge
@


1.75
log
@Release-3-1-8rc1
@
text
@d2 1
a2 1
%define version 3.1.8rc1
d19 1
a19 1
License: The PHP license (see "LICENSE" file included in distribution)
d289 1
a289 1
%doc README LICENSE CREDITS NEWS test.php INSTALL.LINUX security 
d294 1
a294 1
%doc %attr(-,root,root) README INSTALL.J2EE INSTALL.ORACLE INSTALL.WEBSPHERE LICENSE security  
d298 1
a298 1
%doc CREDITS ABOUT.HTM README.GNU_JAVA README.MONO+NET ChangeLog README PROTOCOL.TXT LICENSE server documentation examples tests.php5 tests.php4 php_java_lib NEWS INSTALL.LINUX INSTALL
@


1.74
log
@Release-3-1-8rc
@
text
@d2 1
a2 1
%define version 3.1.8rc
@


1.73
log
@Release-3-1-8devel1
@
text
@d2 1
a2 1
%define version 3.1.8devel1
d12 1
d147 7
@


1.72
log
@Release-3-1-8devel
@
text
@d2 1
a2 1
%define version 3.1.8devel
@


1.71
log
@Release-3-2-0devel
@
text
@d2 1
a2 1
%define version 3.2.0devel
@


1.70
log
@Release-3-1-8devel
@
text
@d2 1
a2 1
%define version 3.1.8devel
d253 1
a253 1
	rm -rf %{_datadir}/pear/php_Java.php %{_datadir}/pear/rt
@


1.69
log
@Release-3-1-7
@
text
@d2 1
a2 1
%define version 3.1.7
@


1.68
log
@Release-3-1-7
@
text
@d2 1
a2 1
%define version 3.1.7devel
d26 1
d58 1
a58 5
%if %{have_j2} == 1
Requires: j2re >= 1.4.2
%else
Requires: jre >= 1.4.0
%endif
a71 18
%package standalone
Group: System Environment/Daemons
Summary: Standalone back-end for the PHP/Java Bridge
Requires: php-java-bridge = %{version}
Requires: ed
# php4 is stored in %{_libdir}/php4, php5 and above in %{_libdir}/php
%if %{PHP_MAJOR_VERSION} == 4
Requires: php >= 4.3.2
Requires: php < 5.0.0
%else
Requires: php >= 5.0.4
%endif

%description standalone
Starts a standalone java daemon for apache and the PHP/Java Bridge.
Contains the standalone service script. The standalone back-end is
started with the apache uid.

a76 1
Conflicts: php-java-bridge-standalone
d120 1
a120 1
./configure --prefix=%{_exec_prefix} --with-java=${java_dir}
a125 1

a130 1
echo >filelist-standalone
d146 1
a146 1
files='JavaBridge.jar java.so'
d148 4
a151 3
for i in $files; 
  do cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i; 
  rm -f $mod_dir/$i; 
d153 1
d155 3
a157 13

i=libnatcJavaBridge.so
if test -f $mod_dir/$i; then
  cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i; 
  rm -f $mod_dir/$i; 
  echo $mod_dir/$i >>filelist
fi

files=RunJavaBridge
for i in $files; 
  do cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i;
  rm -f $mod_dir/$i; 
done
a171 14
echo $mod_dir/RunJavaBridge >filelist-standalone
cat java-standalone.ini | sed 's|^;java\.java_home[\t =].*$|java.java_home = @@JAVA_HOME@@|; s|^;java\.java[\t =].*$|java.java = @@JAVA_JAVA@@|' >$RPM_BUILD_ROOT/etc/php.d/java-standalone.ini
#echo /etc/php.d/java-standalone.ini >>filelist-standalone

mkdir -p $RPM_BUILD_ROOT%{_sbindir}
cp php-java-bridge $RPM_BUILD_ROOT%{_sbindir}
chmod +x $RPM_BUILD_ROOT%{_sbindir}/php-java-bridge
#echo %{_sbindir}/php-java-bridge >>filelist-standalone

mkdir -p $RPM_BUILD_ROOT/etc/init.d
cp php-java-bridge.service $RPM_BUILD_ROOT/etc/init.d/php-java-bridge
chmod +x $RPM_BUILD_ROOT/etc/init.d/php-java-bridge
#echo /etc/init.d/php-java-bridge >>filelist-standalone

a188 6
echo "PHP/Java Bridge installed."
echo "Now install the standalone, tomcat or J2EE back-end."
echo
exit 0

%post tomcat
d191 5
a195 1
    %{_sbindir}/semodule -i %{_docdir}/%{name}-tomcat-%{version}/security/module/php-java-bridge-tomcat.pp
d203 1
a203 1
	echo "sh %{_docdir}/%{name}-tomcat-%{version}/security/update_policy.sh \\"
d209 3
a211 6
if test -d /var/www/html &&  ! test -e /var/www/html/JavaBridge; then
  ln -fs %{tomcat_webapps}/JavaBridge /var/www/html/;
fi
echo "PHP/Java Bridge tomcat back-end installed. Start with:"
echo "service tomcat5 restart"
echo "service httpd restart"
d215 1
a215 28
%post standalone
# calculate java_dir again
for i in jre j2re jdk j2sdk java; do 
package=`rpm -q --whatprovides $i --queryformat "%{PKGID} %{VERSION}\n"` && break
done
pkgid=`echo $package| sed 's/\./0/g;s/_/./' | sort -r -k 2,2 -n | head -1 | awk '{print $1}'`

jre=`rpm  -q --pkgid $pkgid`
java=`rpm -ql $jre | grep 'bin/java$' | head -1`
java_dir=`dirname $java`
java_dir=`dirname $java_dir`
if test X`basename $java_dir` = Xjre; then
  java_dir=`dirname $java_dir`;
fi
export java_dir java
ed -s /etc/php.d/java-standalone.ini <<EOF2
/@@JAVA_HOME@@/s||${java_dir-UNKNOWN}|
/@@JAVA_JAVA@@/s||${java-UNKNOWN}|
w
q
EOF2

# only run on install, not upgrade 
if [ "$1" = "1" ]; then
	/sbin/chkconfig --add php-java-bridge
	/sbin/chkconfig php-java-bridge on
fi

d218 5
a222 2
    %{_sbindir}/semodule -i %{_docdir}/%{name}-standalone-%{version}/security/module/php-java-bridge.pp
    chcon -t javabridge_exec_t %{_libdir}/php/modules/RunJavaBridge
d230 1
a230 1
	echo "sh %{_docdir}/%{name}-standalone-%{version}/security/update_policy.sh \\"
d236 5
a240 2
echo "PHP/Java Bridge standalone back-end installed. Start with:"
echo "service php-java-bridge restart"
d251 1
a251 1
%preun standalone
d253 2
a254 3
	/sbin/service php-java-bridge stop > /dev/null 2>&1
	/sbin/chkconfig php-java-bridge off
	/sbin/chkconfig --del php-java-bridge
d258 1
d268 1
a268 1
		%{_sbindir}/semodule -r javabridge
d280 2
a281 8
%doc README LICENSE CREDITS NEWS test.php INSTALL.LINUX

%files standalone -f filelist-standalone
%defattr(6111,apache,apache)
%attr(-,root,root) /etc/php.d/java-standalone.ini
%attr(-,root,root) %{_sbindir}/php-java-bridge 
%attr(-,root,root) /etc/init.d/php-java-bridge
%doc %attr(-,root,root) README INSTALL INSTALL.LINUX LICENSE security 
a290 1

@


1.67
log
@Release-3-1-6
@
text
@d2 1
a2 1
%define version 3.1.6.1
@


1.66
log
@Release-3-1-6
@
text
@d2 1
a2 1
%define version 3.1.6
d364 1
a364 1
%doc %attr(-,root,root) README INSTALL.J2EE LICENSE security  
@


1.65
log
@Release-3-1-6
@
text
@d2 1
a2 1
%define version 3.1.6devel
@


1.64
log
@Release-3-1-4
@
text
@d2 1
a2 1
%define version 3.1.4
d80 1
a80 1
# php4 is stored in /usr/lib/php4, php5 and above in /usr/lib/php
d122 2
a123 2
PATH=/bin:/usr/bin
LD_LIBRARY_PATH=/lib:/usr/lib
d142 1
a142 1
./configure --prefix=/usr --with-java=${java_dir}
d208 4
a211 4
mkdir -p $RPM_BUILD_ROOT/usr/sbin
cp php-java-bridge $RPM_BUILD_ROOT/usr/sbin
chmod +x $RPM_BUILD_ROOT/usr/sbin/php-java-bridge
#echo /usr/sbin/php-java-bridge >>filelist-standalone
d243 1
a243 1
    /usr/sbin/semodule -i %{_docdir}/%{name}-tomcat-%{version}/security/module/php-java-bridge-tomcat.pp
d296 2
a297 2
    /usr/sbin/semodule -i %{_docdir}/%{name}-standalone-%{version}/security/module/php-java-bridge.pp
    chcon -t javabridge_exec_t /usr/lib/php/modules/RunJavaBridge
d318 3
a320 3
mkdir -p /usr/java/packages/lib/ext/ 2>/dev/null
ln -fs /usr/share/java/JavaBridge.jar /usr/java/packages/lib/ext/
ln -fs /usr/share/java/php-script.jar /usr/java/packages/lib/ext/
d329 1
a329 1
		/usr/sbin/semodule -r javabridge
d335 1
a335 1
	if test -e /var/www/html/JavaBridge && test %{tomcat_webapps}/JavaBridge -ef /var/www/html/JavaBridge; then
a337 1
    rm -f /var/www/html/JavaBridge
d340 1
a340 1
		/usr/sbin/semodule -r javabridge
d346 1
a346 1
	rm -f /usr/java/packages/lib/ext/JavaBridge.jar /usr/java/packages/lib/ext/php-java.jar
d357 1
a357 1
%attr(-,root,root) /usr/sbin/php-java-bridge 
@


1.63
log
@Release-3-1-3
@
text
@d2 1
a2 1
%define version 3.1.3
@


1.62
log
@Release-3-1-2
@
text
@d2 1
a2 1
%define version 3.1.2
@


1.61
log
@Release-3-1-0
@
text
@d2 1
a2 1
%define version 3.1.0
@


1.60
log
@Release-3-1-0
@
text
@d2 1
a2 1
%define version 3.1.0devel
d71 1
a71 1
files: java extension for PHP/Apache HTTP server and a simple backend
d77 1
a77 1
Summary: Standalone backend for the PHP/Java Bridge
d90 1
a90 1
Contains the standalone service script. The standalone backend is
d95 1
a95 1
Summary: Tomcat/J2EE backend for the PHP/Java Bridge
d100 2
a101 2
Deploys the j2ee backend into the tomcat servlet engine.  The tomcat
backend is more than 2 times faster than the standalone backend but
d170 1
a170 1
files='JavaBridge.jar java.so libnatcJavaBridge.so'
d177 8
d221 10
d236 1
a236 1
echo "Now install the standalone, tomcat or J2EE backend."
d260 1
a260 1
echo "PHP/Java Bridge tomcat backend installed. Start with:"
d311 1
a311 1
echo "PHP/Java Bridge standalone backend installed. Start with:"
d353 1
a353 1
%doc README LICENSE CREDITS NEWS test.php test.php4 INSTALL.LINUX
d369 1
a369 1
%doc CREDITS ABOUT.HTM README.GNU_JAVA README.MONO+NET ChangeLog README PROTOCOL.TXT LICENSE server/documentation documentation server/test examples tests.php5 tests.php4 php_java_lib NEWS INSTALL.LINUX INSTALL
@


1.59
log
@3.1-branch
@
text
@d2 1
a2 1
%define version 3.1.0
@


1.58
log
@Release-3.0.8
@
text
@d2 1
a2 1
%define version 3.0.8
@


1.57
log
@Release-3.0.8rc
@
text
@d2 1
a2 1
%define version 3.0.8rc
d5 1
d7 2
d36 3
d40 1
a40 1
# PHP 4 or PHP 5
d45 6
d52 3
a56 1

d62 4
d79 9
d144 4
d179 1
a179 1
  do cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i; 
d220 1
a222 4
echo "PHP/Java Bridge tomcat backend installed. Start with:"
echo "service tomcat5 restart"
echo "service httpd restart"
echo
d224 3
d233 1
a233 1
	echo "sh %{_docdir}/%{name}-tomcat-%{version}/update_policy.sh \\"
d237 4
d242 5
d270 6
a275 5
chkconfig php-java-bridge on
echo "PHP/Java Bridge standalone backend installed. Start with:"
echo "service php-java-bridge restart"
echo "service httpd restart"
echo
d277 4
d287 1
a287 1
	echo "sh %{_docdir}/%{name}-standalone-%{version}/update_policy.sh \\"
d291 1
d293 5
d303 1
d308 1
d310 3
d316 10
a325 1
rm -rf %{tomcat_webapps}/JavaBridge
d328 3
a330 1
rm -f /usr/java/packages/lib/ext/JavaBridge.jar /usr/java/packages/lib/ext/php-java.jar
d342 1
a342 1
%doc %attr(-,root,root) README INSTALL INSTALL.LINUX LICENSE php-java-bridge.te php-java-bridge.fc update_policy.sh 
d347 1
a347 1
%doc %attr(-,root,root) README INSTALL.J2EE LICENSE php-java-bridge.te php-java-bridge-tomcat.te php-java-bridge.fc update_policy.sh 
@


1.57.2.1
log
@Release-3-0-8-1
@
text
@d2 1
a2 1
%define version 3.0.8.1
a4 1
%define PHP_MINOR_VERSION %(((LANG=C rpm -q --queryformat "%{VERSION}" php) || echo "4.0.0") | tail -1 | LANG=C cut -d. -f2)
a5 2
%define have_policy_modules %(if test -f /etc/selinux/config && test -d /etc/selinux/%{__policy_tree}/modules; then echo 1; else echo 0; fi)

a32 3
%if %{have_policy_modules} == 1
BuildRequires: policycoreutils checkpolicy coreutils
%endif
d34 1
a34 1
# PHP 4 or PHP 5 or PHP 5.1
a38 6
%if %{PHP_MAJOR_VERSION} == 6
Requires: php >= 6.0.0
%else
%if %{PHP_MINOR_VERSION} == 1
Requires: php >= 5.1.1
%else
a39 3
Requires: php < 5.1.0
%endif
%endif
d42 1
a47 4
%if %{have_policy_modules} == 1
Requires: policycoreutils coreutils
%endif

a60 9
Requires: ed
# php4 is stored in /usr/lib/php4, php5 and above in /usr/lib/php
%if %{PHP_MAJOR_VERSION} == 4
Requires: php >= 4.3.2
Requires: php < 5.0.0
%else
Requires: php >= 5.0.4
%endif

a116 4
%if %{have_policy_modules} == 1
(cd security/module; make; rm -rf tmp;)
%endif

d148 1
a148 1
  do cp $mod_dir/$i $RPM_BUILD_ROOT/$mod_dir/$i;
a188 1
exit 0
d191 4
a195 3
  if test -d /etc/selinux/%{__policy_tree}/modules; then 
    /usr/sbin/semodule -i %{_docdir}/%{name}-tomcat-%{version}/security/module/php-java-bridge-tomcat.pp
  else
d202 1
a202 1
	echo "sh %{_docdir}/%{name}-tomcat-%{version}/security/update_policy.sh \\"
a205 4
  fi
fi
if test -d /var/www/html &&  ! test -e /var/www/html/JavaBridge; then
  ln -fs %{tomcat_webapps}/JavaBridge /var/www/html/;
a206 5
echo "PHP/Java Bridge tomcat backend installed. Start with:"
echo "service tomcat5 restart"
echo "service httpd restart"
echo
exit 0
d230 5
a234 6
# only run on install, not upgrade 
if [ "$1" = "1" ]; then
	/sbin/chkconfig --add php-java-bridge
	/sbin/chkconfig php-java-bridge on
fi

a235 4
  if test -d /etc/selinux/%{__policy_tree}/modules; then 
    /usr/sbin/semodule -i %{_docdir}/%{name}-standalone-%{version}/security/module/php-java-bridge.pp
    chcon -t javabridge_exec_t /usr/lib/php/modules/RunJavaBridge
  else
d242 1
a242 1
	echo "sh %{_docdir}/%{name}-standalone-%{version}/security/update_policy.sh \\"
a245 1
  fi
a246 5
echo "PHP/Java Bridge standalone backend installed. Start with:"
echo "service php-java-bridge restart"
echo "service httpd restart"
echo
exit 0
a251 1
exit 0
a255 1
	/sbin/chkconfig php-java-bridge off
a256 3
    if test -d /etc/selinux/%{__policy_tree}/modules; then 
		/usr/sbin/semodule -r javabridge
	fi
d260 1
a260 10
if [ $1 = 0 ]; then
	if test -e /var/www/html/JavaBridge && test %{tomcat_webapps}/JavaBridge -ef /var/www/html/JavaBridge; then
      rm -f /var/www/html/JavaBridge;
    fi
    rm -f /var/www/html/JavaBridge
	rm -rf %{tomcat_webapps}/JavaBridge
    if test -d /etc/selinux/%{__policy_tree}/modules; then 
		/usr/sbin/semodule -r javabridge
	fi
fi
d263 1
a263 3
if [ $1 = 0 ]; then
	rm -f /usr/java/packages/lib/ext/JavaBridge.jar /usr/java/packages/lib/ext/php-java.jar
fi
d275 1
a275 1
%doc %attr(-,root,root) README INSTALL INSTALL.LINUX LICENSE security 
d280 1
a280 1
%doc %attr(-,root,root) README INSTALL.J2EE LICENSE security  
@


1.56
log
@Release-3.0.8test1
@
text
@d2 1
a2 1
%define version 3.0.8test2
@


1.55
log
@Release-3.0.8test1
@
text
@d2 1
a2 1
%define version 3.0.8test1
@


1.54
log
@Release-3.0.8pre2
@
text
@d2 1
a2 1
%define version 3.0.8pre2
@


1.53
log
@Release-3.0.8pre
@
text
@d248 5
d262 4
@


1.52
log
@Release-3.0.7a
@
text
@d2 1
a2 1
%define version 3.0.7a
@


1.51
log
@Release-3.0.7
@
text
@d2 1
a2 1
%define version 3.0.7
@


1.50
log
@Release-3.0.7
@
text
@d2 1
a2 1
%define version 3.0.7rc
a33 1

a87 1

d115 1
a115 1
./configure --prefix=/usr --with-java=$java_dir
d139 1
a139 1
files='JavaBridge.jar java.so libnatcJavaBridge.so RunJavaBridge'
d146 5
d186 3
a188 8
if test -f /etc/selinux/config; then
	echo "You are running SELinx. Please install the standalone or servlet backend."
    echo
else
    echo "PHP/Java Bridge installed. Start with:"
    echo "service httpd restart"
    echo
fi
d259 1
a259 1
%doc README README.GNU_JAVA README.MONO+NET LICENSE CREDITS NEWS ChangeLog test.php test.php4 examples tests.php5 php_java_lib INSTALL.LINUX 
d266 1
a266 1
%doc %attr(-,root,root) README INSTALL LICENSE php-java-bridge.te php-java-bridge.fc update_policy.sh 
d275 1
a275 1
%doc README PROTOCOL.TXT LICENSE server/documentation documentation server/test
@


1.49
log
@Release-3.0.7
@
text
@d53 4
a56 1
Java module/extension for the PHP script language.
d63 3
a65 1
Standalone backend for the PHP/Java Bridge
d74 4
a77 1
Tomcat/J2EE backend for the PHP/Java Bridge
d84 4
a87 1
PHP/Java Bridge development files and documentation
d162 1
d164 1
a164 1
echo /etc/php.d/java-standalone.ini >>filelist-standalone
d169 1
a169 1
echo /usr/sbin/php-java-bridge >>filelist-standalone
d174 1
a174 1
echo /etc/init.d/php-java-bridge >>filelist-standalone
d264 5
a268 2
%defattr(-,root,root)
%doc INSTALL LICENSE php-java-bridge.te php-java-bridge.fc update_policy.sh 
d273 1
a273 1
%doc %attr(-,root,root) INSTALL.J2EE LICENSE php-java-bridge.te php-java-bridge-tomcat.te php-java-bridge.fc update_policy.sh 
d277 1
a277 1
%doc PROTOCOL.TXT LICENSE server/documentation documentation server/test
@


1.48
log
@Release-3.0.7
@
text
@d2 1
a2 1
%define version 3.0.7pre
d5 1
a5 7
# NOTE: If /etc/sysconfig/java contains a line which points to JAVA_HOME, e.g. 
# /usr/java/jdk1.5.0
# the RPM assumes that IBM or SUN java is installed and checks j2re and j2sdk.
# If /etc/sysconfig/java is empty or does not exist, it is assumed that
# GNU java or Sun java is installed and the code searches for RPMs providing
# jre and java-devel instead.
%define have_sysconfig_java %(test -s /etc/sysconfig/java && echo 1 || echo 0)
d8 1
a8 1
%define shared_java        /usr/share/java
d28 2
a29 2
%if %{have_sysconfig_java} == 1
BuildRequires: j2sdk >= 1.4.1
d44 2
a45 2
%if %{have_sysconfig_java} == 1
Requires: j2re >= 1.4.1
a48 1
Provides: php-java-bridge
d72 1
a72 1
Group: Development/Documentation
d80 1
a80 1
echo Building for PHP %{PHP_MAJOR_VERSION}. have_sysconfig_java: %{have_sysconfig_java}.
d90 3
a92 3
if test -s /etc/sysconfig/java; then
java_dir=`head -1 /etc/sysconfig/java`
else
d94 1
a101 1
fi
d183 14
d223 1
d232 1
a232 1
	echo "sh %{_docdir}/php-java-bridge-%{version}/update_policy.sh \\"
d235 1
d249 1
a249 1
%doc README README.GNU_JAVA README.MONO+NET LICENSE CREDITS NEWS ChangeLog test.php test.php4 php-java-bridge.te php-java-bridge.fc update_policy.sh examples tests.php5 php_java_lib
d253 1
a253 1
%doc INSTALL LICENSE
d258 1
a258 1
%doc %attr(-,root,root) INSTALL.SERVLET LICENSE
@


1.47
log
@Release-3.0.6
@
text
@d2 1
a2 1
%define version 3.0.6
d12 3
d57 1
d59 2
d62 22
a83 1
BuildRoot: /var/tmp/php-java-bridge-%{version}
a84 2
%description 
Java module/extension for the PHP script language.
d113 1
a113 1
./configure --prefix=/usr --with-java=$java_dir --disable-servlet --disable-script --disable-faces
d121 3
d126 11
d145 8
d154 2
a155 1
cat java.ini | sed 's|^;java\.java_home[\t =].*$|java.java_home = @@JAVA_HOME@@|; s|^;java\.java[\t =].*$|java.java = @@JAVA_JAVA@@|' >$RPM_BUILD_ROOT/etc/php.d/java.ini
d158 3
d164 1
a164 1
echo /usr/sbin/php-java-bridge >>filelist
d169 1
a169 1
echo /etc/init.d/php-java-bridge >>filelist
d176 1
d178 14
d206 1
a206 1
ed -s /etc/php.d/java.ini <<EOF2
d214 1
a214 1
echo "PHP/Java Bridge installed. Start with:"
d229 8
a236 2
%preun
chkconfig php-java-bridge off
d240 15
a254 1
%doc README README.GNU_JAVA README.MONO+NET PROTOCOL.TXT INSTALL.MONO+NET INSTALL INSTALL.SERVLET LICENSE CREDITS NEWS ChangeLog test.php test.php4 php-java-bridge.te php-java-bridge.fc update_policy.sh server/documentation documentation examples tests.php5 php_java_lib
@


1.46
log
@Release-3.0.5
@
text
@d2 1
a2 1
%define version 3.0.5
d168 1
a168 1
%doc README README.GNU_JAVA README.MONO+NET PROTOCOL.TXT INSTALL.MONO+NET INSTALL INSTALL.SERVLET LICENSE CREDITS NEWS ChangeLog test.php test.php4 php-java-bridge.te php-java-bridge.fc update_policy.sh server/documentation documentation examples tests.php5
@


1.45
log
@Release-3.0.5(pre)
@
text
@d2 1
a2 1
%define version 3.0.5pre
d168 1
a168 1
%doc README README.GNU_JAVA README.MONO+NET PROTOCOL.TXT INSTALL.MONO+NET INSTALL INSTALL.SERVLET LICENSE CREDITS NEWS ChangeLog test.php php-java-bridge.te php-java-bridge.fc update_policy.sh server/documentation documentation
@


1.44
log
@Release-3.0.4
@
text
@d2 1
a2 1
%define version 3.0.4
@


1.43
log
@Release-3.0.4
@
text
@d2 1
a2 1
%define version 3.0.3a
@


1.42
log
@Release-3.0.3
@
text
@d2 1
a2 1
%define version 3.0.3
d4 7
a10 1
%define PHP_MAJOR_VERSION %(LANG=C rpm -q --queryformat "%{VERSION}" php | sed 's/\\\..*$//')
d23 1
a23 1
BuildRequires: php-devel >= 4.3.2
d25 2
d46 4
d51 1
d127 5
a131 1
pkgid=`rpm -q --whatprovides jre --queryformat "%{PKGID} %{VERSION}\n" | sed 's/\./0/g;s/_/./' |sort -r -k 2,2 -n | head -1 | awk '{print $1}'`
@


1.41
log
@Release-3-0-2
@
text
@d2 1
a2 1
%define version 3.0.2
@


1.40
log
@Release-3-0-2
@
text
@d2 1
a2 1
%define version 3.0.1
@


1.39
log
@Version-3.0.0pre
@
text
@d2 1
a2 1
%define version 3.0.0pre1
d75 1
a75 1
./configure --prefix=/usr --with-java=$java_dir --disable-servlet
d151 1
a151 1
%doc README README.GNU_JAVA README.MONO+NET PROTOCOL.TXT INSTALL.MONO+NET INSTALL LICENSE ChangeLog test.php php-java-bridge.te php-java-bridge.fc update_policy.sh server/doc
@


1.38
log
@Release-2.0.8
@
text
@d2 1
a2 1
%define version 2.0.8
@


1.37
log
@documentation added
@
text
@d2 1
a2 1
%define version 2.0.8RC5
@


1.36
log
@Version 2.0.8RC5 fixes PR1286136 and 1291175
@
text
@d151 1
a151 1
%doc README README.GNU_JAVA INSTALL INSTALL.WINDOWS LICENSE ChangeLog test.php php-java-bridge.te php-java-bridge.fc update_policy.sh
@


1.35
log
@Version 2.0.8RC4 fixes PR1291191, PR 1291175 and PR1286643
@
text
@d2 1
a2 1
%define version 2.0.8RC4
@


1.34
log
@2.0.8RC3 fixes PR1283154 and 1286139 and 1288025 (partially).
@
text
@d2 1
a2 1
%define version 2.0.8RC3
@


1.33
log
@2.0.8RC2 fixes PR1283148 and 1281189.
@
text
@d2 1
a2 1
%define version 2.0.8RC2
@


1.32
log
@2.0.8RC1 fixes PR1276889, 1275899, 1274526, 1202896
@
text
@d2 1
a2 1
%define version 2.0.8RC1
@


1.31
log
@Release-2.0.8RC
@
text
@d2 1
a2 1
%define version 2.0.8RC
@


1.30
log
@Release-2.0.8(pre4)
@
text
@d2 1
a2 1
%define version 2.0.8pre4
@


1.29
log
@Merged from Version-2-0-7 trunc; 2.0.7 closed
@
text
@d2 1
a2 1
%define version 2.0.8pre3
@


1.28
log
@Release-2.0.8pre
@
text
@d2 1
a2 1
%define version 2.0.8pre
@


1.27
log
@Release-2.0.7
@
text
@d2 1
a2 1
%define version 2.0.7pre3
@


1.27.2.1
log
@Release-2.0.7RC
@
text
@d2 1
a2 1
%define version 2.0.7RC
@


1.26
log
@Release-2.0.7pre
@
text
@d2 1
a2 1
%define version 2.0.7pre
d4 3
d15 17
a31 3
BuildRequires: php-devel >= 4.3.6
BuildRequires: gcc >= 3.3.3
BuildRequires: httpd
d33 4
d49 1
@


1.25
log
@Release-2.0.7(pre)
@
text
@d101 1
a101 1
ed /etc/php.d/java.ini <<EOF2 >/dev/null
@


1.24
log
@Release-2.0.7pre
@
text
@d9 1
a9 1
Copyright: The PHP license (see "LICENSE" file included in distribution)
d14 1
a14 1
BuildRequires: httpd j2sdk
d17 1
a17 1
Requires: j2re >= 1.4.0
d37 1
d39 13
d72 1
a72 12
cat <<EOF >$RPM_BUILD_ROOT/etc/php.d/java.ini
extension = java.so
[java]
java.log_level=1
java.log_file=/var/log/php-java-bridge.log

# Comment out the following line if you want to start java
# automatically as a sub-process of the Apache 2.0 service or if you
# have already started multicast backends for failover/load balancing.
java.socketname=/var/run/.php-java-bridge_socket

EOF
d92 1
a92 1
pkgid=`rpm -q --whatprovides j2re --queryformat "%{PKGID} %{VERSION}\n" | sed 's/\./0/g;s/_/./' |sort -r -k 2,2 -n | head -1 | awk '{print $1}'`
d95 11
a105 20

# Do not rely on sysconfig anymore but use the most recent rpm, see
# pkgid above. The reason is that we prefer 1.4.2 or jdk1.5 over
# old 1.4.1 installations. When IBM/RedHat ships a 1.4.2_02 or 1.5
# RPM, we'll change it back.

# if test -s /etc/sysconfig/java; then
# # IBM and RedHat 
# 	java_dir=`head -1 /etc/sysconfig/java`
# else
# Sun JDK RPM nonsense
	java_dir=`dirname $java`
	java_dir=`dirname $java_dir`
	if test X`basename $java_dir` = Xjre; then
		java_dir=`dirname $java_dir`;
	fi
# fi
cat <<EOF2 >>/etc/php.d/java.ini
java.java_home=$java_dir
java.java=$java
@


1.23
log
@Release-2.0.7-pre
@
text
@d39 1
a39 1
./configure --prefix=/usr --with-java=$java_dir
@


1.22
log
@Release-2.0.6pre
@
text
@d2 1
a2 1
%define version 2.0.6
@


1.21
log
@Version 2.0.6
@
text
@d64 3
a66 3
# comment out the following line if you want to start java
# automatically as a sub-process of the Apache 2.0 
# service -- not recommended.
@


1.20
log
@version
@
text
@d2 1
a2 1
%define version 2.0.5
@


1.19
log
@LOCALE fixes
@
text
@d2 1
a2 1
%define version 2.0.4
@


1.18
log
@Release-2.0.2
@
text
@d2 1
a2 1
%define version 2.0.2
@


1.17
log
@Release-2.0.1
@
text
@d2 1
a2 1
%define version 2.0.1
@


1.16
log
@Release-2.0-beta
@
text
@d2 1
a2 1
%define version 2.0.0
d135 1
a135 1
%doc README README.GNU_JAVA INSTALL LICENSE ChangeLog test.php php-java-bridge.te php-java-bridge.fc update_policy.sh
@


1.15
log
@*** empty log message ***
@
text
@d2 1
a2 1
%define version 1.0.8
d17 1
a17 1
Requires: j2re >= 1.4.2
d49 1
a49 1
files='JavaBridge.class JavaBridge$1.class JavaBridge$2.class JavaBridge$3.class JavaBridge$4.class JavaBridge$PhpMap.class java.so libnatcJavaBridge.so RunJavaBridge'
@


1.14
log
@Release-1.0.8
@
text
@d72 4
a75 4
mkdir -p $RPM_BUILD_ROOT/usr/bin
cp php-java-bridge $RPM_BUILD_ROOT/usr/bin
chmod +x $RPM_BUILD_ROOT/usr/bin/php-java-bridge
echo /usr/bin/php-java-bridge >>filelist
@


1.13
log
@Release-1.0.8
@
text
@d82 2
a83 2
mkdir -p $RPM_BUILD_ROOT/var/log/php-java-bridge
echo /var/log/php-java-bridge >>filelist
d115 14
a128 1
service php-java-bridge start
a130 1
service php-java-bridge stop
d135 1
a135 1
%doc README README.GNU_JAVA INSTALL LICENSE ChangeLog test.php php-java-bridge.te php-java-bridge.fc 
@


1.12
log
@Release-1.0.8
@
text
@d123 1
a123 2
%doc README README.GNU_JAVA INSTALL LICENSE ChangeLog test.php php-java-bridge.te php-java-bridge.fc

@


1.11
log
@ZTS
@
text
@d49 1
a49 1
files='JavaBridge.class JavaBridge$1.class JavaBridge$2.class JavaBridge$3.class JavaBridge$4.class JavaBridge$PhpMap.class java.so libnatcJavaBridge.so'
d82 2
d123 1
a123 1
%doc README INSTALL LICENSE ChangeLog test.php
@


1.10
log
@secure mode
@
text
@d39 1
a39 3
# FIXME: Will work only on a NPTL kernel or >= 2.6
#./configure --prefix=/usr --with-java=$java_dir --enable-secure-mode
./configure --prefix=/usr --with-java=$java_dir --disable-secure-mode
@


1.9
log
@PHP5
@
text
@d2 1
a2 1
%define version 1.0.7
d16 2
a17 1
Requires: httpd j2re
d39 4
a42 2
./configure --prefix=/usr --with-java=$java_dir
make CFLAGS="-DNDEBUG"
d89 2
a90 1
jre=`rpm -q --whatprovides j2re | head -1`
d92 10
a101 4
if test -s /etc/sysconfig/java; then
# IBM and RedHat 
	java_dir=`head -1 /etc/sysconfig/java`
else
d108 1
a108 1
fi
@


1.8
log
@PHP5 iterator/array
@
text
@d113 1
a113 1
%doc README INSTALL LICENSE ChangeLog
@


1.7
log
@php 4/5
@
text
@d48 1
a48 1
files='JavaBridge.class JavaBridge$1.class java.so libnatcJavaBridge.so'
@


1.6
log
@php 4/5
@
text
@d2 1
a2 1
%define version 1.1.0
d23 2
a24 1
%description Java module/extension for the PHP script language.
a67 1

@


1.5
log
@Version 1.1
@
text
@d23 1
a23 2
%description 
The PHP/Java bridge allows one to access java based applications running in a java application server.  The PHP/Java bridge communicates with the application server through local sockets using an efficient communication protocol.  This means that only one JVM runs to serve all clients within a multi-process HTTP-Server.  Each client process communicates with a corresponding thread spawned by the running application server.  
d86 13
a98 3
jre=`rpm -q --whatprovides j2re`
java=`rpm -ql $jre | grep 'bin/java$'`
java_dir=`head -1 /etc/sysconfig/java`
@


1.4
log
@Release-1.0.6
@
text
@d2 1
a2 1
%define version 1.0.6
@


1.3
log
@version
@
text
@d2 1
a2 1
%define version `cat VERSION`
d24 1
a24 1
The PHP/Java bridge allows one to access java based applications running in a java application server running on the local host.  The PHP/Java bridge communicates with the application server through local sockets using an efficient communication protocol.  This means that only one JVM runs to serve all clients within a multi-process HTTP-Server.  Each client process communicates with a corresponding thread spawned by the running application server.  
d48 1
a48 1
files="JavaBridge.class java.so libnatcJavaBridge.so"
d66 1
a66 1
java.socketname=/tmp/.php-java-bridge
@


1.2
log
@Fixed a typo that caused a massive memory leak on the java side
@
text
@d2 1
a2 1
%define version 1.0.5
@


1.1
log
@Start java in a separate process and give pval's a proper reference count.
@
text
@d2 1
a2 1
%define version 1.0.4
d104 1
a104 1
%doc README INSTALL LICENSE
@

