head	1.7;
access;
symbols
	Release-2-0-6-branch:1.5.0.2;
locks; strict;
comment	@ * @;


1.7
date	2005.06.15.20.30.22;	author jost2345;	state dead;
branches;
next	1.6;

1.6
date	2005.06.15.15.18.02;	author jost2345;	state Exp;
branches;
next	1.5;

1.5
date	2005.05.12.19.11.29;	author jost2345;	state Exp;
branches;
next	1.4;

1.4
date	2005.05.11.17.28.48;	author jost2345;	state Exp;
branches;
next	1.3;

1.3
date	2005.04.18.16.46.33;	author jost2345;	state Exp;
branches;
next	1.2;

1.2
date	2005.04.17.21.01.22;	author jost2345;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.27.15.45.45;	author jost2345;	state Exp;
branches;
next	;


desc
@@


1.7
log
@*** empty log message ***
@
text
@@


1.6
log
@Tomcat 5 support / multicasts removed
@
text
@@


1.5
log
@load balancer rewrite part#2 and loop problem fixed
@
text
@a0 23
/*-*- mode: C; tab-width:4 -*-*/

#ifndef JAVA_MULTICAST_H
#define JAVA_MULTICAST_H

#include <time.h>

#define GROUP_ADDR "239.255.6.10"
#define GROUP_PORT 9168
#define MAX_LOAD 12  // ignore servers with a load higher than this value
#define LOAD_PENALTY 8 // in ms, see Listener.java
#define MAX_PENALTY (MAX_LOAD*LOAD_PENALTY)
#define MAX_TRIES MAX_LOAD // # of times we try to reach backends until we
					  // # throw an error

extern int php_java_recv_multicast(int sock, unsigned char spec, time_t time);
extern void php_java_send_multicast(int sock, unsigned char spec, time_t time);
extern int php_java_init_multicast();
extern void php_java_sleep_ms(int ms);
extern short php_java_multicast_backends_available();

#endif

@


1.4
log
@load balancer rewrite
@
text
@d13 1
a13 1
#define MAX_TRIES 120 // # of times we try to reach backends until we
@


1.3
log
@make multicasts 32 bit clean
@
text
@d9 1
a9 1
#define GROUP_PORT 9167
d11 4
d19 2
@


1.2
log
@multicast: ignore outdated packets
@
text
@d6 2
d12 2
a13 2
extern int php_java_recv_multicast(int sock, unsigned char spec, int time);
extern void php_java_send_multicast(int sock, unsigned char spec, int time);
@


1.1
log
@mono
@
text
@d8 1
a8 1
#define MAX_LOAD 20  // ignore servers with a load higher than this value
d10 2
a11 2
extern int php_java_recv_multicast(int sock, unsigned char spec);
extern void php_java_send_multicast(int sock, unsigned char spec);
@

