head	1.7;
access;
symbols
	Release-4-3-3:1.6.0.22
	ROOT_Release-4-3-3:1.6
	upstream_version_4_3_2:1.6
	debian_version_4_3_2-1:1.6
	ROOT_Release-4-3-2:1.6
	Release-4-3-2:1.6.0.20
	Release-4-3-1:1.6.0.18
	ROOT_Release-4-3-1:1.6
	debian_version_4_3_0-1:1.6
	upstream_version_4_3_0:1.6
	ROOT_Release-4-3-0:1.6
	Release-4-3-0:1.6.0.16
	debian_version_3_2_1b-2:1.6
	debian_version_4_2_2-1:1.6
	upstream_version_4_2_2:1.6
	debian_version_3_2_1b-1:1.6
	upstream_version_3_2_1b:1.6
	Release-4-1-2:1.6.0.14
	Release-4-0-8:1.6.0.12
	debian_version_4_0_8a-1:1.6
	upstream_version_4_0_8a:1.6
	jostb-debian-ubuntu-patch:1.6.0.10
	debian_version_4_0_8-1:1.6
	upstream_version_4_0_8:1.6
	debian_version_4_0_7-1:1.6
	upstream_version_4_0_7:1.6
	debian_version_4_0_6-1:1.6
	upstream_version_4_0_6:1.6
	debian_version_4_0_2-1:1.6
	upstream_version_4_0_2:1.6
	Release-4-0-2_Root:1.6
	Release-4-0-2:1.6.0.8
	upstream_version_4_0_1:1.6
	debian_version_4_0_1-2:1.6
	Release-3-2-1:1.6.0.6
	Release-3-1-8:1.6.0.4
	Release-3-0-8_root:1.6
	Release-3-0-8_Root:1.6
	Release-3-0-8:1.6.0.2
	Release-2-0-8:1.5.0.6
	Release-2-0-7_Root:1.5
	Release-2-0-7:1.5.0.2
	Release-2-0-6-branch:1.4.0.2
	Version-1:1.1.0.6
	Version-2:1.1.0.4
	Release-2:1.1.0.2;
locks; strict;
comment	@# @;


1.7
date	2008.01.06.21.07.56;	author jost_boekemeier;	state dead;
branches;
next	1.6;

1.6
date	2006.02.03.17.41.36;	author jost2345;	state Exp;
branches;
next	1.5;

1.5
date	2005.07.01.17.39.05;	author jost2345;	state Exp;
branches;
next	1.4;

1.4
date	2005.04.18.18.39.30;	author jost2345;	state Exp;
branches;
next	1.3;

1.3
date	2005.02.24.18.39.17;	author jost2345;	state Exp;
branches;
next	1.2;

1.2
date	2005.02.20.12.19.44;	author jost2345;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.03.16.57.36;	author jost2345;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Release-5-0-0
@
text
@#!/bin/sh

if test $# != 1; then
  echo "Usage: $0 <policy-src-path>"
  echo "Example: $0 /etc/selinux/targeted/src/policy"
  exit 1;
fi

if ! test -f ${1}/Makefile; then
  echo "ERROR: SEL policy sources not installed. Please install them."
  exit 2;
fi

PATH=/usr/sbin:/sbin:$PATH

enforce=`getenforce`
setenforce 0
domains=${1}/domains
contexts=${1}/file_contexts
cat `dirname $0`/php-java-bridge*.te >$domains/program/php-java-bridge.te &&
cat `dirname $0`/php-java-bridge*.fc >$contexts/program/php-java-bridge.fc &&
make -C $1 install && 
make -C $1 reload &&
EXT=@@EXTENSION_DIR@@
mkdir ${EXT}/lib 2>/dev/null
setfiles -d ${1}/file_contexts/file_contexts ${EXT}/RunJavaBridge ${EXT}/java.so ${EXT}/libnatcJavaBridge.so ${EXT}/lib
err=$?
setenforce $enforce
if test $err != 0; then
    echo "ERROR: $err."
    exit 1
else
    echo "SELinux policy files for php-java-bridge installed."
    exit 0
fi
@


1.6
log
@Release-3.0.7
@
text
@@


1.5
log
@Release-2.0.7(pre)
@
text
@d20 2
a21 2
cp -v `dirname $0`/php-java-bridge.te $domains/program &&
cp -v `dirname $0`/php-java-bridge.fc $contexts/program &&
@


1.4
log
@PR1178795
@
text
@d22 1
d26 1
a26 1
setfiles -v ${1}/file_contexts/file_contexts ${EXT}/RunJavaBridge ${EXT}/java.so ${EXT}/libnatcJavaBridge.so ${EXT}/lib
@


1.3
log
@Replaced Guile/SCHEME with Chicken/SCHEME example
@
text
@d24 2
a25 1
setfiles -v ${1}/file_contexts/file_contexts ${EXT}/RunJavaBridge ${EXT}/java.so ${EXT}/libnatcJavaBridge.so
@


1.2
log
@Release-2.0-beta
@
text
@d23 2
a24 1
setfiles -v ${1}/file_contexts/file_contexts @@EXTENSION_DIR@@/RunJavaBridge @@EXTENSION_DIR@@/java.so @@EXTENSION_DIR@@/libnatcJavaBridge.so
@


1.1
log
@Release-1.0.8
@
text
@d23 1
a23 1
setfiles -v ${1}/file_contexts/file_contexts @@EXTENSION_DIR@@/RunJavaBridge
@

