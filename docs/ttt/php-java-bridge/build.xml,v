head	1.29;
access;
symbols
	Release-7-1-1:1.20.0.2
	Root_Release-7-1-1:1.20
	Root_Release_7-0-1:1.14
	Release_7-0-1:1.14.0.2
	Release_7-0-0:1.13.0.4
	Root_Release_7-0-0:1.13
	Release-6-2-2:1.13.0.2
	Release-6-1-2-3:1.5
	Root_Release-6-1-2-3:1.5
	Release-6-1-2-2:1.5.0.6
	Root_Release-6-1-2-2:1.5
	debian_version_6_1_2_1-1:1.5
	upstream_version_6_1_2_1:1.5
	Release-6-1-2-1_new:1.5.0.4
	Root_Release-6-1-2-1_new:1.5
	Release-6-1-2-1:1.5.0.2
	Root_Release-6-1-2-1:1.5
	upstream_version_6_1_2:1.4
	debian_version_6_1_2-1:1.4
	Release-6-1-2:1.4.0.6
	Root_Release-6-1-2:1.4
	debian_version_6_1_1-2:1.4
	debian_version_6_1_1-1:1.4
	upstream_version_6_1_1:1.4
	Release-6-1-1:1.4.0.4
	Root_Release-6-1-1:1.4
	Release-6-0-4:1.4.0.2
	Root_Release-6-0-4:1.4
	Release-6-0-3_NEW:1.3.0.2
	Root_Release-6-0-3_NEW:1.3
	Release-6-0-3:1.3.0.4
	Root_Release-6-0-3:1.3
	Release-6-0-0:1.2.0.2
	Root_Release-6-0-0:1.3;
locks; strict;
comment	@# @;


1.29
date	2017.04.16.16.07.47;	author jost_boekemeier;	state Exp;
branches;
next	1.28;

1.28
date	2017.04.16.15.56.39;	author jost_boekemeier;	state Exp;
branches;
next	1.27;

1.27
date	2017.04.15.21.53.38;	author jost_boekemeier;	state Exp;
branches;
next	1.26;

1.26
date	2017.04.15.19.05.57;	author jost_boekemeier;	state Exp;
branches;
next	1.25;

1.25
date	2017.04.14.16.03.25;	author jost_boekemeier;	state Exp;
branches;
next	1.24;

1.24
date	2017.04.14.13.01.13;	author jost_boekemeier;	state Exp;
branches;
next	1.23;

1.23
date	2017.04.14.05.48.53;	author jost_boekemeier;	state Exp;
branches;
next	1.22;

1.22
date	2017.04.10.20.03.43;	author jost_boekemeier;	state Exp;
branches;
next	1.21;

1.21
date	2017.04.09.19.25.28;	author jost_boekemeier;	state Exp;
branches;
next	1.20;

1.20
date	2017.04.09.13.58.34;	author jost_boekemeier;	state Exp;
branches;
next	1.19;

1.19
date	2017.03.26.21.30.45;	author jost_boekemeier;	state Exp;
branches;
next	1.18;

1.18
date	2017.03.25.14.15.30;	author jost_boekemeier;	state Exp;
branches;
next	1.17;

1.17
date	2017.03.23.21.37.37;	author jost_boekemeier;	state Exp;
branches;
next	1.16;

1.16
date	2017.03.20.18.00.05;	author jost_boekemeier;	state Exp;
branches;
next	1.15;

1.15
date	2017.03.11.14.55.05;	author jost_boekemeier;	state Exp;
branches;
next	1.14;

1.14
date	2017.02.25.16.28.47;	author jost_boekemeier;	state Exp;
branches;
next	1.13;

1.13
date	2010.10.09.18.05.58;	author jost_boekemeier;	state Exp;
branches;
next	1.12;

1.12
date	2010.09.05.10.17.41;	author jost_boekemeier;	state Exp;
branches;
next	1.11;

1.11
date	2010.09.04.16.52.10;	author jost_boekemeier;	state Exp;
branches;
next	1.10;

1.10
date	2010.09.04.11.17.11;	author jost_boekemeier;	state Exp;
branches;
next	1.9;

1.9
date	2010.08.27.14.36.59;	author jost_boekemeier;	state Exp;
branches;
next	1.8;

1.8
date	2010.07.30.14.41.59;	author jost_boekemeier;	state Exp;
branches;
next	1.7;

1.7
date	2010.07.11.18.08.30;	author jost_boekemeier;	state Exp;
branches;
next	1.6;

1.6
date	2010.05.31.19.31.10;	author jost_boekemeier;	state Exp;
branches;
next	1.5;

1.5
date	2010.05.02.11.49.36;	author jost_boekemeier;	state Exp;
branches;
next	1.4;

1.4
date	2010.03.06.11.12.45;	author jost_boekemeier;	state Exp;
branches;
next	1.3;

1.3
date	2010.02.28.15.23.49;	author jost_boekemeier;	state Exp;
branches;
next	1.2;

1.2
date	2010.02.21.16.24.10;	author jost_boekemeier;	state Exp;
branches;
next	1.1;

1.1
date	2010.02.18.16.31.38;	author jost_boekemeier;	state Exp;
branches;
next	;


desc
@@


1.29
log
@Release-7.1.2
@
text
@<?xml version="1.0"?>
<project name="JavaBridge" basedir="." default="JavaBridgeWar">
	<target name="clean">
		<delete dir="documentation/API" />
		<delete dir="documentation/server" />
		<delete dir="dist" />
		<delete dir="bin" />
		<delete file="WebContent/META-INF/java/Java.inc" />
		<delete file="server/php/java/bridge/generated/JavaInc.java" />
		<delete file="server/php/java/bridge/generated/PhpDebuggerPHP.java" />
		<delete file="server/php/java/bridge/generated/LauncherUnix.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows2.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows3.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows4.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows5.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows6.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows7.java" />
	</target>

	<target name="init" >
		<property name="build.compiler" value="org.eclipse.jdt.core.JDTCompilerAdapter" />
		<property name="javaBaseDir" value="${basedir}/server" />
		<property name="webContentDir" value="${basedir}/WebContent" />
		<property name="javaSourceDir" value="${javaBaseDir}" />
		<property name="javaClassDir" value="${basedir}/bin" />
		<property name="distDir" value="${basedir}/dist" />
		<property name="libDir" value="${basedir}/unsupported" />
		<property name="cgiDir" value="${webContentDir}/WEB-INF/cgi" />
		<property name="sampleWebDir" value="${webContentDir}" />

		<path id="compilePath">
			<fileset dir="${libDir}">
				<include name="*.jar" />
			</fileset>
		</path>

		<mkdir dir="${distDir}" />
		<mkdir dir="${javaClassDir}" />
	</target>

	<target name="compile" depends="init,JavaIncJava,PhpDebuggerPHPJava,LauncherUnix,LauncherWindows">
		<!--- If you get a Class not found: org.eclipse.jdt.core.JDTCompilerAdapter, do a right-click -> run as -> ant build ... -> JRE tab -> select "run in the same jre as the workspace" --> 
		<javac srcdir="${javaSourceDir}" source="1.6" target="1.6" destdir="${javaClassDir}" debug="true" deprecation="false" nowarn="true">
			<exclude name="php/java/test/**/*.java" />
			<classpath refid="compilePath" />
		</javac>
	</target>
	<target name="SrcZip" depends="init,JavaBridgeProperties,JavaInc">
		<zip zipfile="${distDir}/src.zip" compress="true">
			<fileset dir="${javaSourceDir}">
				<include name="php/java/**/*.java" />
				<exclude name="php/java/test/**/*.java" />
				<include name="php/java/bridge/global.properties" />
			</fileset>
			<fileset dir="${webContentDir}">
				<include name="WEB-INF/cgi/launcher.sh" />
				<include name="WEB-INF/cgi/README.sh" />
			</fileset>
			<fileset dir="${javaClassDir}">
				<include name="php/java/bridge/global.properties" />
			</fileset>
			<fileset dir="${webContentDir}/META-INF">
				<include name="java/*.inc" />
				<include name="java/*.php" />
			</fileset>
		</zip>
	</target>
	<target name="JavaBridgeJar" depends="init,compile,JavaInc,JavaBridgeProperties">
		<jar jarfile="${distDir}/JavaBridge.jar" manifest="${javaSourceDir}/META-INF/MANIFEST.MF" compress="true">
			<fileset dir="${javaClassDir}">
				<include name="php/java/bridge/*.class" />
				<include name="php/java/bridge/global.properties" />
				<include name="php/java/bridge/classloader/*.class" />
				<include name="php/java/bridge/generated/*.class" />
				<include name="php/java/bridge/http/*.class" />
				<include name="php/java/bridge/parser/*.class" />
				<include name="php/java/bridge/util/*.class" />
				<include name="php/java/fastcgi/*.class" />
				<include name="php/java/script/*.class" />
											</fileset>
			<metainf dir="${webContentDir}/META-INF">
				<include name="java/*.inc" />
				<include name="java/*.php" />
				<include name="SSLServerSocketHelperKeystore" />
				<include name="services/javax.script.ScriptEngineFactory" />
							</metainf>
		</jar>
	</target>
	<target name="PhpServletJar" depends="init,compile">
		<jar jarfile="${distDir}/php-servlet.jar" compress="true">
			<fileset dir="${javaClassDir}">
				<include name="php/java/servlet/*.class" />
				<include name="php/java/servlet/fastcgi/*.class" />
				<include name="php/java/script/servlet/*.class" />
			</fileset>
		</jar>
	</target>
	<target name="JavaInc" depends="init">
		<apply executable="php" failonerror="true" dir="${webContentDir}" parallel="true">
			<arg value="../server/buildJavaInc.php" />
			<arg value="META-INF/java/Java.inc" />
			<arg value="META-INF/java/JavaBridge.inc" />
			<arg value="META-INF/java/Options.inc" />
			<arg value="META-INF/java/Client.inc" />
			<arg value="META-INF/java/GlobalRef.inc" />
			<arg value="META-INF/java/NativeParser.inc" />
			<arg value="META-INF/java/Parser.inc" />
			<arg value="META-INF/java/Protocol.inc" />
			<arg value="META-INF/java/SimpleParser.inc" />
			<fileset dir="${webContentDir}">
				<include name="META-INF/java/JavaProxy.inc" />
			</fileset>
		</apply>
		<copy file="${webContentDir}/META-INF/java/Java.inc" todir="${distDir}" />
	</target>
	<target name="JavaIncJava" depends="JavaInc,init">
		<apply executable="php" failonerror="true" dir="${webContentDir}" parallel="true">
			<arg value="${javaBaseDir}/buildClassFromTextFile.php" />
			<arg value="${javaBaseDir}/php/java/bridge/generated/JavaInc.java" />
			<arg value="JavaInc" />
			<fileset dir="${webContentDir}">
				<include name="META-INF/java/Java.inc" />
			</fileset>
		</apply>
	</target>
	<target name="PhpDebuggerPHPJava" depends="init">
		<apply executable="php" failonerror="true" dir="${webContentDir}" parallel="true">
			<arg value="${javaBaseDir}/buildClassFromTextFile.php" />
			<arg value="${javaBaseDir}/php/java/bridge/generated/PhpDebuggerPHP.java" />
			<arg value="PhpDebuggerPHP" />
			<fileset dir="${webContentDir}">
				<include name="META-INF/java/PHPDebugger.php" />
			</fileset>
		</apply>
	</target>
	<target name="LauncherUnix" depends="init">
		<apply executable="php" failonerror="true" dir="${javaBaseDir}" parallel="true">
			<arg value="${javaBaseDir}/buildClassFromTextFile.php" />
			<arg value="${javaBaseDir}/php/java/bridge/generated/LauncherUnix.java" />
			<arg value="LauncherUnix" />
			<fileset dir="${webContentDir}">
				<include name="WEB-INF/cgi/launcher.sh" />
			</fileset>
		</apply>
	</target>
	  <target name="LauncherWindows" depends="init">
	    <apply executable = "php" failonerror = "true" dir="${javaBaseDir}" parallel="true">
	      <arg value="${javaBaseDir}/buildLauncherWindows.php" />
	      <fileset dir="${webContentDir}" >
		<include name="WEB-INF/cgi/launcher.exe" />
	      </fileset>
	    </apply>
	  </target>
	<target name="JavaBridgeProperties" depends="init">
		<apply executable="php" failonerror="true" dir="${javaBaseDir}" parallel="true">
			<arg value="${javaBaseDir}/buildJavaBridgeProperties.php" />
			<arg value="${javaBaseDir}/php/java/bridge/global.properties" />
			<fileset dir="${javaBaseDir}">
				<include name="php/java/bridge/global.properties.in" />
			</fileset>
		</apply>
		<move file="${javaBaseDir}/php/java/bridge/global.properties" tofile="${javaClassDir}/php/java/bridge/global.properties" />
	</target>
	<target name="JavaBridgeTemplateWar" depends="JavaBridgeJar,PhpServletJar,JavaInc,init">
		<copy file="${sampleWebDir}/settings.php" tofile="./index.php" />
		<war destfile="${distDir}/JavaBridgeTemplate.war" webxml="${javaBaseDir}/example-web.xml">
			<fileset dir=".">
				<include name="index.php" />
			</fileset>
			<lib dir="${distDir}">
				<include name="JavaBridge.jar" />
				<include name="php-servlet.jar" />
			</lib>
		</war>
		<delete file="./index.php" />
	</target>
	<target name="PhpDoc" depends="init">
		<exec executable="apigen" failonerror="true" dir="${basedir}">
			<arg value="generate" />
		</exec>
	</target>
	<target name="JavaBridgeWar" depends="JavaBridgeJar,PhpServletJar,JavaInc,init">
		<war destfile="${distDir}/JavaBridge.war" webxml="${webContentDir}/WEB-INF/web.xml">
            <manifest>
                <attribute name="Main-Class" value="org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader"/>
                <attribute name="Rsrc-Main-Class" value="php.java.bridge.TestInstallation"/>
                <attribute name="Class-Path" value="."/>
                <attribute name="Rsrc-Class-Path" value="./ WEB-INF/lib/JavaBridge.jar"/>
            </manifest>
            <zipfileset src="unsupported/jar-in-jar-loader.zip"/>
			<zipfileset prefix="WEB-INF/lib" dir="${distDir}" />
		    
						<fileset dir="${webContentDir}">
				<include name="WEB-INF/weblogic.xml" />
			</fileset>
			<fileset dir="${javaClassDir}">
				<include name="*.class" />
			</fileset>
			<fileset dir="${sampleWebDir}">
				<include name="*.php" />
				<include name="*.jsp" />
				<include name="**/*.rptdesign" />
				<include name="**/*.rptlibrary" />
				<include name="locale/**/*" />
			</fileset>
			<fileset dir="${basedir}">
				<include name="*test.php" />
			</fileset>
			<lib dir="${libDir}">
				<include name="*.jar" />
				<exclude name="log4j.jar" />
				<exclude name="servlet-api.jar" />
			</lib>
			<lib dir="${libDir}/eclipse.birt.lib">
				<include name="*" />
			</lib>
			<lib dir="${sampleWebDir}">
				<include name="*.jar" />
			</lib>
			<webinf dir="${webContentDir}/WEB-INF">
				<include name="cgi/**/*" />
				<include name="cgi/README" />
				<exclude name="cgi/launcher.*" />
			</webinf>
			<webinf dir="${libDir}">
				<include name="platform/**/*" />
			</webinf>
		</war>
	</target>
</project>
@


1.28
log
@Release-7.1.2
@
text
@a217 3
			<lib dir="${distDir}">
				<include name="php-servlet.jar" />
			</lib>
@


1.27
log
@Release-7.1.2
@
text
@d4 2
a5 1
		<delete dir="server/documentation" />
d179 3
a181 16
		<apply executable="phpdoc" failonerror="true" dir="${webContentDir}" parallel="true">
			<arg value="-c" />
			<arg value="PHPDocConfig.ini" />
			<fileset dir="${webContentDir}">
				<include name="META-INF/java/JavaBridge.inc" />
				<include name="META-INF/java/Options.inc" />
				<include name="META-INF/java/Client.inc" />
				<include name="META-INF/java/GlobalRef.inc" />
				<include name="META-INF/java/NativeParser.inc" />
				<include name="META-INF/java/Parser.inc" />
				<include name="META-INF/java/Protocol.inc" />
				<include name="META-INF/java/SimpleParser.inc" />
				<include name="META-INF/java/PHPDebugger.php" />
			</fileset>
		</apply>
		<delete file="documentation/API/errors.html" />
d189 1
a189 1
                <attribute name="Rsrc-Class-Path" value="./ JavaBridge.jar"/>
a218 1
				<include name="JavaBridge.jar" />
@


1.26
log
@*** empty log message ***
@
text
@a4 1
		<delete dir="documentation" />
a176 3
	<target name="JavaDoc" depends="init">
		<javadoc access="public" author="true" classpath="unsupported/servlet-api.jar" destdir="server/documentation/API" doctitle="PHP/Java Bridge" nodeprecated="false" nodeprecatedlist="false" noindex="false" nonavbar="false" notree="false" packagenames="php.java.servlet,javax.script,php.java.servlet.fastcgi,php.java.bridge,php.java.script,php.java.script.servlet,php.java.bridge.http" source="1.4" sourcepath="server" splitindex="true" use="true" version="true" />
	</target>
@


1.25
log
@Update birt lib to 4.6.0
Removed obsolete files
@
text
@d21 1
a21 1
	<target name="init" depends="clean" >
@


1.24
log
@Removed JavaProxy.php
@
text
@d43 1
@


1.23
log
@Removed JavaProxy.php
@
text
@d30 1
a30 1
		<property name="sampleWebDir" value="${basedir}/examples/php+jsp" />
@


1.22
log
@New fastcgi implementation
@
text
@a8 1
		<delete file="WebContent/META-INF/java/JavaProxy.php" />
a9 1
		<delete file="server/php/java/bridge/generated/JavaProxy.java" />
d42 1
a42 1
	<target name="compile" depends="init,JavaIncJava,JavaProxyPhpJava,PhpDebuggerPHPJava,LauncherUnix,LauncherWindows">
d48 1
a48 1
	<target name="SrcZip" depends="init,JavaBridgeProperties,JavaInc,JavaProxyPhp">
d68 1
a68 1
	<target name="JavaBridgeJar" depends="init,compile,JavaInc,JavaProxyPhp,JavaBridgeProperties">
a125 19
	<target name="JavaProxyPhp" depends="JavaInc,init">
		<apply executable="php" failonerror="true" dir="${webContentDir}" parallel="true">
			<arg value="${javaBaseDir}/buildJavaProxy.php" />
			<arg value="${webContentDir}/META-INF/java/JavaProxy.php" />
			<fileset dir="${webContentDir}">
				<include name="META-INF/java/Java.inc" />
			</fileset>
		</apply>
	</target>
	<target name="JavaProxyPhpJava" depends="JavaProxyPhp,init">
		<apply executable="php" failonerror="true" dir="${webContentDir}" parallel="true">
			<arg value="${javaBaseDir}/buildClassFromTextFile.php" />
			<arg value="${javaBaseDir}/php/java/bridge/generated/JavaProxy.java" />
			<arg value="JavaProxy" />
			<fileset dir="${webContentDir}">
				<include name="META-INF/java/JavaProxy.php" />
			</fileset>
		</apply>
	</target>
d164 1
a164 1
	<target name="JavaBridgeTemplateWar" depends="JavaBridgeJar,PhpServletJar,JavaInc,JavaProxyPhp,init">
a192 1
				<include name="META-INF/java/JavaProxy.inc" />
d198 1
a198 1
	<target name="JavaBridgeWar" depends="JavaBridgeJar,PhpServletJar,JavaInc,JavaProxyPhp,init">
@


1.21
log
@Release-7.1.1
@
text
@d228 1
a228 1
            <zipfileset src="jar-in-jar-loader.zip"/>
@


1.20
log
@Release-7.1.1
@
text
@d222 10
a231 1
			<fileset dir="${webContentDir}">
@


1.19
log
@New fastcgi implementation
@
text
@d3 21
a23 1
	<target name="init">
d26 1
d31 1
a31 1
		<property name="cgiDir" value="${javaBaseDir}/WEB-INF/cgi" />
d44 2
a45 22
	<target name="clean" depends="init">
		<delete dir="server/documentation" />
		<delete dir="documentation" />
		<delete dir="dist" />
		<delete dir="bin" />
		<delete file="server/META-INF/java/Java.inc" />
		<delete file="server/META-INF/java/JavaProxy.php" />
		<delete file="server/php/java/bridge/generated/JavaInc.java" />
		<delete file="server/php/java/bridge/generated/JavaProxy.java" />
		<delete file="server/php/java/bridge/generated/PhpDebuggerPHP.java" />
		<delete file="server/php/java/bridge/generated/LauncherUnix.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows2.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows3.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows4.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows5.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows6.java" />
		<delete file="server/php/java/bridge/generated/LauncherWindows7.java" />
	</target>

	<target name="compile" depends="init,JavaIncJava,JavaProxyPhpJava,PhpDebuggerPHPJava,LauncherUnix">
		<javac srcdir="${javaSourceDir}" source="1.5" target="1.5" destdir="${javaClassDir}" debug="true" deprecation="true">
a54 1
				<include name="javax/script/*.java" />
d56 2
d64 1
a64 1
			<fileset dir="${javaBaseDir}/META-INF">
d80 4
a83 2
			</fileset>
			<metainf dir="${javaBaseDir}/META-INF">
a86 9
			</metainf>
		</jar>
	</target>
	<target name="PhpScriptJar" depends="init,compile">
		<jar jarfile="${distDir}/php-script.jar" compress="true">
			<fileset dir="${javaClassDir}">
				<include name="php/java/script/*.class" />
			</fileset>
			<metainf dir="${javaBaseDir}/META-INF">
d88 1
a88 8
			</metainf>
		</jar>
	</target>
	<target name="ScriptApiJar" depends="init,compile">
		<jar jarfile="${distDir}/script-api.jar" compress="true">
			<fileset dir="${javaClassDir}">
				<include name="javax/script/*.class" />
			</fileset>
d101 2
a102 2
		<apply executable="php" failonerror="true" dir="${javaBaseDir}" parallel="true">
			<arg value="buildJavaInc.php" />
d112 1
a112 1
			<fileset dir="${javaBaseDir}">
d116 1
a116 1
		<copy file="${javaBaseDir}/META-INF/java/Java.inc" todir="${distDir}" />
d119 1
a119 1
		<apply executable="php" failonerror="true" dir="${javaBaseDir}" parallel="true">
d123 1
a123 1
			<fileset dir="${javaBaseDir}">
d129 1
a129 1
		<apply executable="php" failonerror="true" dir="${javaBaseDir}" parallel="true">
d131 2
a132 2
			<arg value="${javaBaseDir}/META-INF/java/JavaProxy.php" />
			<fileset dir="${javaBaseDir}">
d138 1
a138 1
		<apply executable="php" failonerror="true" dir="${javaBaseDir}" parallel="true">
d142 1
a142 1
			<fileset dir="${javaBaseDir}">
d148 1
a148 1
		<apply executable="php" failonerror="true" dir="${javaBaseDir}" parallel="true">
d152 1
a152 1
			<fileset dir="${javaBaseDir}">
d162 1
a162 1
			<fileset dir="${javaBaseDir}">
d167 8
d185 1
a185 1
	<target name="JavaBridgeTemplateWar" depends="JavaBridgeJar,PhpServletJar,PhpScriptJar,JavaInc,JavaProxyPhp,init">
a192 1
				<include name="php-script.jar" />
d202 1
a202 1
		<apply executable="phpdoc" failonerror="true" dir="${javaBaseDir}" parallel="true">
d205 1
a205 1
			<fileset dir="${javaBaseDir}">
d220 3
a222 3
	<target name="JavaBridgeWar" depends="JavaBridgeJar,PhpServletJar,ScriptApiJar,PhpScriptJar,JavaInc,JavaProxyPhp,init">
		<war destfile="${distDir}/JavaBridge.war" webxml="${javaBaseDir}/WEB-INF/web.xml">
			<fileset dir="${javaBaseDir}">
a247 1
				<include name="php-script.jar" />
a248 1
				<include name="script-api.jar" />
d253 1
a253 1
			<webinf dir="${javaBaseDir}/WEB-INF">
@


1.18
log
@ant: use ecj instead of javac (outside of eclipse add ecj.jar to ant classpath)
@
text
@d43 1
a43 1
	<target name="compile" depends="init,JavaIncJava,JavaProxyPhpJava,PhpDebuggerPHPJava,LauncherUnix,LauncherWindows">
a55 1
				<include name="WEB-INF/cgi/launcher.c" />
a178 8
	<target name="LauncherWindows" depends="init">
		<apply executable="php" failonerror="true" dir="${javaBaseDir}" parallel="true">
			<arg value="${javaBaseDir}/buildLauncherWindows.php" />
			<fileset dir="${javaBaseDir}">
				<include name="WEB-INF/cgi/launcher.exe" />
			</fileset>
		</apply>
	</target>
@


1.17
log
@New FastCGI implementation
@
text
@d3 9
a11 8
  <target name="init">
    <property name="javaBaseDir" value="${basedir}/server" />
    <property name="javaSourceDir" value="${javaBaseDir}" />
    <property name="javaClassDir" value="${basedir}/bin" />
    <property name="distDir" value="${basedir}/dist" />
    <property name="libDir" value="${basedir}/unsupported" />
    <property name="cgiDir" value="${javaBaseDir}/WEB-INF/cgi" />
    <property name="sampleWebDir" value="${basedir}/examples/php+jsp" />
d13 5
a17 5
    <path id="compilePath">
      <fileset dir="${libDir}" >
	<include name="*.jar" />
      </fileset>
    </path>
d19 3
a21 3
    <mkdir dir="${distDir}" />
    <mkdir dir="${javaClassDir}" />
  </target>
d23 19
a41 19
  <target name="clean" depends="init">
    <delete dir="server/documentation" />
    <delete dir="documentation" />
    <delete dir="dist" />
    <delete dir="bin" />
    <delete file="server/META-INF/java/Java.inc" />
    <delete file="server/META-INF/java/JavaProxy.php" />
    <delete file="server/php/java/bridge/generated/JavaInc.java" />
    <delete file="server/php/java/bridge/generated/JavaProxy.java" />
    <delete file="server/php/java/bridge/generated/PhpDebuggerPHP.java" />
    <delete file="server/php/java/bridge/generated/LauncherUnix.java" />
    <delete file="server/php/java/bridge/generated/LauncherWindows.java" />
    <delete file="server/php/java/bridge/generated/LauncherWindows2.java" />
    <delete file="server/php/java/bridge/generated/LauncherWindows3.java" />
    <delete file="server/php/java/bridge/generated/LauncherWindows4.java" />
    <delete file="server/php/java/bridge/generated/LauncherWindows5.java" />
    <delete file="server/php/java/bridge/generated/LauncherWindows6.java" />
    <delete file="server/php/java/bridge/generated/LauncherWindows7.java" />
  </target>
d43 236
a278 236
  <target name="compile" depends="init,JavaIncJava,JavaProxyPhpJava,PhpDebuggerPHPJava,LauncherUnix,LauncherWindows">
    <javac srcdir="${javaSourceDir}" source="1.5" target="1.5" destdir="${javaClassDir}" debug="true" deprecation="true">
            <exclude name="php/java/test/**/*.java" />	
      <classpath refid="compilePath" />
    </javac>
  </target>
  <target name="SrcZip" depends="init,JavaBridgeProperties,JavaInc,JavaProxyPhp">
    <zip zipfile="${distDir}/src.zip" compress="true">
      <fileset dir="${javaSourceDir}">
    <include name="php/java/**/*.java" />	
    <exclude name="php/java/test/**/*.java" />	
    <include name="javax/script/*.java" />
	<include name="php/java/bridge/global.properties" />
	<include name="WEB-INF/cgi/launcher.c" />
	<include name="WEB-INF/cgi/launcher.sh" />
	<include name="WEB-INF/cgi/README.sh" />
      </fileset>
      <fileset dir="${javaClassDir}">
	<include name="php/java/bridge/global.properties" />
      </fileset>
      <fileset dir="${javaBaseDir}/META-INF">
	<include name="java/*.inc" />
	<include name="java/*.php" />
      </fileset>
    </zip>
  </target>
  <target name="JavaBridgeJar" depends="init,compile,JavaInc,JavaProxyPhp,JavaBridgeProperties">
    <jar jarfile="${distDir}/JavaBridge.jar" manifest="${javaSourceDir}/META-INF/MANIFEST.MF" compress="true">
      <fileset dir="${javaClassDir}">
	<include name="php/java/bridge/*.class" />
	<include name="php/java/bridge/global.properties" />
	<include name="php/java/bridge/classloader/*.class" />
	<include name="php/java/bridge/generated/*.class" />
	<include name="php/java/bridge/http/*.class" />
 	<include name="php/java/bridge/parser/*.class" />
 	<include name="php/java/bridge/util/*.class" />
	</fileset>
      <metainf dir="${javaBaseDir}/META-INF">
	<include name="java/*.inc" />
	<include name="java/*.php" />
   	<include name="SSLServerSocketHelperKeystore" />
      </metainf>
    </jar>
  </target>
  <target name="PhpScriptJar" depends="init,compile">
    <jar jarfile="${distDir}/php-script.jar" compress="true">
      <fileset dir="${javaClassDir}">
	<include name="php/java/script/*.class" />
      </fileset>
      <metainf dir="${javaBaseDir}/META-INF">
	<include name="services/javax.script.ScriptEngineFactory" />
      </metainf>
    </jar>
  </target>
  <target name="ScriptApiJar" depends="init,compile">
    <jar jarfile="${distDir}/script-api.jar" compress="true">
      <fileset dir="${javaClassDir}">
	<include name="javax/script/*.class" />
      </fileset>
    </jar>
  </target>
  <target name="PhpServletJar" depends="init,compile">
    <jar jarfile="${distDir}/php-servlet.jar" compress="true">
      <fileset dir="${javaClassDir}">
	<include name="php/java/servlet/*.class" />
	<include name="php/java/servlet/fastcgi/*.class" />
	<include name="php/java/script/servlet/*.class" />
      </fileset>
    </jar>
  </target>
  <target name="JavaInc" depends="init">
    <apply executable = "php" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="buildJavaInc.php" />
      <arg value="META-INF/java/Java.inc" />
      <arg value="META-INF/java/JavaBridge.inc" />
      <arg value="META-INF/java/Options.inc" />
      <arg value="META-INF/java/Client.inc" />
      <arg value="META-INF/java/GlobalRef.inc" />
      <arg value="META-INF/java/NativeParser.inc" />
      <arg value="META-INF/java/Parser.inc" />
      <arg value="META-INF/java/Protocol.inc" />
      <arg value="META-INF/java/SimpleParser.inc" />
      <fileset dir="${javaBaseDir}" >
	<include name="META-INF/java/JavaProxy.inc" />
      </fileset>
    </apply>
    <copy file="${javaBaseDir}/META-INF/java/Java.inc" todir="${distDir}" />
  </target>
  <target name="JavaIncJava" depends="JavaInc,init">
    <apply executable = "php" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildClassFromTextFile.php" />
      <arg value="${javaBaseDir}/php/java/bridge/generated/JavaInc.java" />
      <arg value="JavaInc" />
      <fileset dir="${javaBaseDir}" >
	<include name="META-INF/java/Java.inc" />
      </fileset>
    </apply>
  </target>
  <target name="JavaProxyPhp" depends="JavaInc,init">
    <apply executable = "php" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildJavaProxy.php" />
      <arg value="${javaBaseDir}/META-INF/java/JavaProxy.php" />
      <fileset dir="${javaBaseDir}" >
	<include name="META-INF/java/Java.inc" />
      </fileset>
    </apply>
  </target>
  <target name="JavaProxyPhpJava" depends="JavaProxyPhp,init">
    <apply executable = "php" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildClassFromTextFile.php" />
      <arg value="${javaBaseDir}/php/java/bridge/generated/JavaProxy.java" />
      <arg value="JavaProxy" />
      <fileset dir="${javaBaseDir}" >
	<include name="META-INF/java/JavaProxy.php" />
      </fileset>
    </apply>
  </target>
  <target name="PhpDebuggerPHPJava" depends="init">
    <apply executable = "php" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildClassFromTextFile.php" />
      <arg value="${javaBaseDir}/php/java/bridge/generated/PhpDebuggerPHP.java" />
      <arg value="PhpDebuggerPHP" />
      <fileset dir="${javaBaseDir}" >
	<include name="META-INF/java/PHPDebugger.php" />
      </fileset>
    </apply>
  </target>
  <target name="LauncherUnix" depends="init">
    <apply executable = "php" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildClassFromTextFile.php" />
      <arg value="${javaBaseDir}/php/java/bridge/generated/LauncherUnix.java" />
      <arg value="LauncherUnix" />
      <fileset dir="${javaBaseDir}" >
	<include name="WEB-INF/cgi/launcher.sh" />
      </fileset>
    </apply>
  </target>
  <target name="LauncherWindows" depends="init">
    <apply executable = "php" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildLauncherWindows.php" />
      <fileset dir="${javaBaseDir}" >
	<include name="WEB-INF/cgi/launcher.exe" />
      </fileset>
    </apply>
  </target>
  <target name="JavaBridgeProperties" depends="init">
    <apply executable = "php" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildJavaBridgeProperties.php" />
      <arg value="${javaBaseDir}/php/java/bridge/global.properties" />
      <fileset dir="${javaBaseDir}" >
	<include name="php/java/bridge/global.properties.in" />
      </fileset>
    </apply>
    <move file="${javaBaseDir}/php/java/bridge/global.properties" tofile="${javaClassDir}/php/java/bridge/global.properties" />
  </target>
  <target name="JavaBridgeTemplateWar" depends="JavaBridgeJar,PhpServletJar,PhpScriptJar,JavaInc,JavaProxyPhp,init">
    <copy file="${sampleWebDir}/settings.php" tofile="./index.php" />
    <war destfile="${distDir}/JavaBridgeTemplate.war" webxml="${javaBaseDir}/example-web.xml">
      <fileset dir=".">
	<include name="index.php" />
      </fileset>
      <lib dir="${distDir}">
	<include name="JavaBridge.jar" />
	<include name="php-script.jar" />
	<include name="php-servlet.jar" />
      </lib>
    </war>
    <delete file="./index.php" />
  </target>
  <target name="JavaDoc" depends="init">
    <javadoc access="public" author="true" classpath="unsupported/servlet-api.jar" destdir="server/documentation/API" doctitle="PHP/Java Bridge" nodeprecated="false" nodeprecatedlist="false" noindex="false" nonavbar="false" notree="false" packagenames="php.java.servlet,javax.script,php.java.servlet.fastcgi,php.java.bridge,php.java.script,php.java.script.servlet,php.java.bridge.http" source="1.4" sourcepath="server" splitindex="true" use="true" version="true"/>
  </target>
  <target name="PhpDoc" depends="init">
    <apply executable = "phpdoc" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="-c" />
      <arg value="PHPDocConfig.ini" />
      <fileset dir="${javaBaseDir}" >
	<include name="META-INF/java/JavaBridge.inc" />
	<include name="META-INF/java/Options.inc" />
	<include name="META-INF/java/Client.inc" />
	<include name="META-INF/java/GlobalRef.inc" />
	<include name="META-INF/java/NativeParser.inc" />
	<include name="META-INF/java/Parser.inc" />
	<include name="META-INF/java/Protocol.inc" />
	<include name="META-INF/java/SimpleParser.inc" />
	<include name="META-INF/java/JavaProxy.inc" />
	<include name="META-INF/java/PHPDebugger.php" />
      </fileset>
    </apply>
    <delete file="documentation/API/errors.html" />
  </target>
  <target name="JavaBridgeWar" depends="JavaBridgeJar,PhpServletJar,ScriptApiJar,PhpScriptJar,JavaInc,JavaProxyPhp,init">
    <war destfile="${distDir}/JavaBridge.war" webxml="${javaBaseDir}/WEB-INF/web.xml">
      <fileset dir="${javaBaseDir}">
    	<include name="WEB-INF/weblogic.xml" />
	  </fileset>
      <fileset dir="${javaClassDir}">
	<include name="*.class" />
      </fileset>
      <fileset dir="${sampleWebDir}">
	<include name="*.php" />
	<include name="*.jsp" />
    	<include name="**/*.rptdesign" />
    	<include name="**/*.rptlibrary" />
	<include name="locale/**/*" />
      </fileset>
      <fileset dir="${basedir}">
	<include name="*test.php" />
      </fileset>
      <lib dir="${libDir}">
	<include name="*.jar" />
	<exclude name="log4j.jar" />
	<exclude name="servlet-api.jar" />
      </lib>
      <lib dir="${libDir}/eclipse.birt.lib">
	<include name="*" />
      </lib>
      <lib dir="${distDir}">
	<include name="JavaBridge.jar" />
	<include name="php-script.jar" />
	<include name="php-servlet.jar" />
	<include name="script-api.jar" />
      </lib>
      <lib dir="${sampleWebDir}">
	<include name="*.jar" />
      </lib>
      <webinf dir="${javaBaseDir}/WEB-INF">
	<include name="cgi/**/*" />
	<include name="cgi/README" />
	<exclude name="cgi/launcher.*"/>
      </webinf>
      <webinf dir="${libDir}">
	<include name="platform/**/*" />
      </webinf>
    </war>
  </target>
@


1.16
log
@New FastCGI implementation
@
text
@d43 1
a43 1
    <javac srcdir="${javaSourceDir}" source="1.4" target="1.4" destdir="${javaClassDir}" debug="true" deprecation="true">
@


1.15
log
@Renamed PHP_FCGI_CHILDREN to PHP_JAVA_BRIDGE_FCGI_CHILDREN to avoid PHP7 spawning PHP_FCGI_CHILDREN  childs by itself
@
text
@d29 11
a39 11
    <delete file="server/php/java/bridge/JavaInc.java" />
    <delete file="server/php/java/bridge/JavaProxy.java" />
    <delete file="server/php/java/bridge/PhpDebuggerPHP.java" />
    <delete file="server/php/java/bridge/LauncherUnix.java" />
    <delete file="server/php/java/bridge/LauncherWindows.java" />
    <delete file="server/php/java/bridge/LauncherWindows2.java" />
    <delete file="server/php/java/bridge/LauncherWindows3.java" />
    <delete file="server/php/java/bridge/LauncherWindows4.java" />
    <delete file="server/php/java/bridge/LauncherWindows5.java" />
    <delete file="server/php/java/bridge/LauncherWindows6.java" />
    <delete file="server/php/java/bridge/LauncherWindows7.java" />
d73 2
d76 3
a78 1
      </fileset>
d133 1
a133 1
      <arg value="${javaBaseDir}/php/java/bridge/JavaInc.java" />
d152 1
a152 1
      <arg value="${javaBaseDir}/php/java/bridge/JavaProxy.java" />
d162 1
a162 1
      <arg value="${javaBaseDir}/php/java/bridge/PhpDebuggerPHP.java" />
d172 1
a172 1
      <arg value="${javaBaseDir}/php/java/bridge/LauncherUnix.java" />
@


1.14
log
@Version 7.0.0 for PHP 7 released
@
text
@d37 3
@


1.13
log
@use a self-signed certificate
@
text
@a220 1
	<include name="META-INF/java/PHPDebugger.inc" />
@


1.12
log
@*** empty log message ***
@
text
@d75 1
@


1.11
log
@*** empty log message ***
@
text
@d264 1
@


1.10
log
@Release-6-2-1
@
text
@d237 2
a238 2
    	<include name="*.rptdesign" />
    	<include name="*.rptlibrary" />
@


1.9
log
@Release-6-2-1
@
text
@d237 2
a238 1
	<include name="*.rptdesign" />
@


1.8
log
@Release-6-2-1
@
text
@d13 3
a15 1
      <fileset dir="${libDir}" />
@


1.7
log
@Release-6-2-1
@
text
@d226 3
@


1.6
log
@x64 support
@
text
@d39 1
d46 2
a47 1
	<include name="php/java/**/*.java" />	
@


1.5
log
@Release-6-1-2-1
@
text
@a50 1
	<include name="WEB-INF/cgi/rename*" />
d254 1
a254 1
	<include name="cgi/php*" />
@


1.4
log
@Release-6-0-4
@
text
@a204 1
      <arg value="-j" />
d217 2
@


1.3
log
@Release-6-0-3
@
text
@d20 17
d207 1
d209 9
a217 1
	<include name="PHPDocConfig.ini" />
@


1.2
log
@Release-6-0-0
@
text
@d21 1
a21 1
    <javac srcdir="${javaSourceDir}" source="1.4" target="1.4" destdir="${javaClassDir}" debug="false" deprecation="false">
d85 11
a95 2
    <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="buildJavaInc.sh" />
d97 1
a97 2
	<include name="META-INF/java/*.inc" />
	<exclude name="META-INF/java/Java.inc" />
d103 4
a106 2
    <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildJavaIncJava.sh" />
d113 3
a115 2
    <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildJavaProxyPhp.sh" />
d122 4
a125 2
    <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildJavaProxyPhpJava.sh" />
d132 4
a135 2
    <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildPhpDebuggerPHPJava.sh" />
d142 4
a145 2
    <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildLauncherUnix.sh" />
d152 2
a153 2
    <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildLauncherWindows.sh" />
d160 3
a162 2
    <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
      <arg value="${javaBaseDir}/buildJavaBridgeProperties.sh" />
@


1.1
log
@Release-6-0-0
@
text
@d3 8
a10 8
	<target name="init">
		<property name="javaBaseDir" value="${basedir}/server" />
		<property name="javaSourceDir" value="${javaBaseDir}" />
		<property name="javaClassDir" value="${basedir}/bin" />
		<property name="distDir" value="${basedir}/dist" />
		<property name="libDir" value="${basedir}/unsupported" />
		<property name="cgiDir" value="${javaBaseDir}/WEB-INF/cgi" />
		<property name="sampleWebDir" value="${basedir}/examples/php+jsp" />
d12 3
a14 3
		<path id="compilePath">
			<fileset dir="${libDir}" />
		</path>
d16 3
a18 3
		<mkdir dir="${distDir}" />
		<mkdir dir="${javaClassDir}" />
	</target>
d20 198
a217 162
	<target name="compile" depends="init,JavaIncJava,JavaProxyPhpJava,LauncherUnix,LauncherWindows">
		<javac srcdir="${javaSourceDir}" source="1.4" target="1.4" destdir="${javaClassDir}" debug="false" deprecation="false">
			<classpath refid="compilePath" />
		</javac>
	</target>
	<target name="SrcZip" depends="init,JavaBridgeProperties,JavaInc,JavaProxyPhp">
	  <zip zipfile="${distDir}/src.zip" compress="true">
	    <fileset dir="${javaClassDir}">
	      <include name="php/java/**/*.java" />
	      <include name="php/java/bridge/global.properties" />
	      <include name="WEB-INF/cgi/launcher.c" />
	      <include name="WEB-INF/cgi/launcher.sh" />
	      <include name="WEB-INF/cgi/README.sh" />
	      <include name="WEB-INF/cgi/rename*" />
	    </fileset>
	    <fileset dir="${javaBaseDir}/META-INF">
	      <include name="java/*.inc" />
	      <include name="java/*.php" />
	    </fileset>
	  </zip>
	</target>
	<target name="JavaBridgeJar" depends="init,compile,JavaInc,JavaProxyPhp,JavaBridgeProperties">
	  <jar jarfile="${distDir}/JavaBridge.jar" manifest="${javaSourceDir}/META-INF/MANIFEST.MF" compress="true">
	    <fileset dir="${javaClassDir}">
	      <include name="php/java/bridge/*.class" />
	      <include name="php/java/bridge/global.properties" />
	      <include name="php/java/bridge/http/*.class" />
	    </fileset>
	    <metainf dir="${javaBaseDir}/META-INF">
	      <include name="java/*.inc" />
	      <include name="java/*.php" />
	    </metainf>
	  </jar>
	</target>
	<target name="PhpScriptJar" depends="init,compile">
	  <jar jarfile="${distDir}/php-script.jar" compress="true">
	    <fileset dir="${javaClassDir}">
	      <include name="php/java/script/*.class" />
	    </fileset>
	    <metainf dir="${javaBaseDir}/META-INF">
	      <include name="services/javax.script.ScriptEngineFactory" />
	    </metainf>
	  </jar>
	</target>
	<target name="PhpServletJar" depends="init,compile">
	  <jar jarfile="${distDir}/php-servlet.jar" compress="true">
	    <fileset dir="${javaClassDir}">
	      <include name="php/java/servlet/*.class" />
	      <include name="php/java/servlet/fastcgi/*.class" />
	      <include name="php/java/script/servlet/*.class" />
	    </fileset>
	  </jar>
	</target>
	<target name="JavaInc" depends="init">
	  <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
	    <arg value="buildJavaInc.sh" />
	    <fileset dir="${javaBaseDir}" >
	      <include name="META-INF/java/*.inc" />
	      <exclude name="META-INF/java/Java.inc" />
	    </fileset>
	  </apply>
	</target>
	<target name="JavaIncJava" depends="JavaInc,init">
	  <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
	    <arg value="${javaBaseDir}/buildJavaIncJava.sh" />
	    <fileset dir="${javaBaseDir}" >
	      <include name="META-INF/java/Java.inc" />
	    </fileset>
	  </apply>
	</target>
	<target name="JavaProxyPhp" depends="JavaInc,init">
	  <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
	    <arg value="${javaBaseDir}/buildJavaProxyPhp.sh" />
	    <fileset dir="${javaBaseDir}" >
	      <include name="META-INF/java/Java.inc" />
	    </fileset>
	  </apply>
	</target>
	<target name="JavaProxyPhpJava" depends="JavaProxyPhp,init">
	  <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
	    <arg value="${javaBaseDir}/buildJavaProxyPhpJava.sh" />
	    <fileset dir="${javaBaseDir}" >
	      <include name="META-INF/java/JavaProxy.php" />
	    </fileset>
	  </apply>
	</target>
	<target name="BuildCgi" depends="init">
	  <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
	    <arg value="${javaBaseDir}/buildCgi.sh" />
	    <fileset dir="${javaBaseDir}" >
	      <include name="buildCgi.sh" />
	    </fileset>
	  </apply>
	</target>
	<target name="LauncherUnix" depends="init">
	  <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
	    <arg value="${javaBaseDir}/buildLauncherUnix.sh" />
	    <fileset dir="${javaBaseDir}" >
	      <include name="WEB-INF/cgi/launcher.sh" />
	    </fileset>
	  </apply>
	</target>
	<target name="LauncherWindows" depends="init">
	  <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
	    <arg value="${javaBaseDir}/buildLauncherWindows.sh" />
	    <fileset dir="${javaBaseDir}" >
	      <include name="WEB-INF/cgi/launcher.exe" />
	    </fileset>
	  </apply>
	</target>
	<target name="JavaBridgeProperties" depends="init">
	  <apply executable = "/bin/sh" failonerror = "true" dir="${javaBaseDir}" parallel="true">
	    <arg value="${javaBaseDir}/buildJavaBridgeProperties.sh" />
	    <fileset dir="${javaBaseDir}" >
	      <include name="php/java/bridge/global.properties.in" />
	    </fileset>
	  </apply>
	  <move file="${javaBaseDir}/php/java/bridge/global.properties" tofile="${javaClassDir}/php/java/bridge/global.properties" />
	</target>
	<target name="JavaBridgeTemplateWar" depends="JavaBridgeJar,PhpServletJar,PhpScriptJar,JavaInc,JavaProxyPhp,BuildCgi,init">
	  <copy file="${sampleWebDir}/settings.php" tofile="./index.php" />
	  <war destfile="${distDir}/JavaBridgeTemplate.war" webxml="${javaBaseDir}/example-web.xml">
	    <fileset dir=".">
	      <include name="index.php" />
	    </fileset>
	    <lib dir=".">
	      <include name="JavaBridge.jar" />
	      <include name="php-script.jar" />
	      <include name="php-servlet.jar" />
	    </lib>
	  </war>
	  <delete file="./index.php" />
	</target>
	<target name="JavaBridgeWar" depends="JavaBridgeJar,PhpServletJar,PhpScriptJar,JavaInc,JavaProxyPhp,BuildCgi,init">
	  <war destfile="${distDir}/JavaBridge.war" webxml="${javaBaseDir}/WEB-INF/web.xml">
	    <fileset dir="${sampleWebDir}">
	      <include name="*/.php" />
	      <include name="*/.jsp" />
	      <include name="locale/**/*" />
	    </fileset>
	    <lib dir="${libDir}">
	      <include name="*.jar" />
	      <include name="platform/**/*" />
	      <exclude name="log4j.jar" />
	      <exclude name="servlet-api.jar" />
	    </lib>
	    <lib dir="${libDir}/eclipse.birt.lib">
	      <include name="*" />
	    </lib>
	    <lib dir=".">
	      <include name="JavaBridge.jar" />
	      <include name="php-script.jar" />
	      <exclude name="php-servlet.jar" />
	    </lib>
	    <webinf dir="${javaBaseDir}/WEB-INF">
	      <include name="cgi/php*" />
	      <include name="cgi/launcher.exe" />
	      <include name="cgi/launcher.sh" />
	      <include name="cgi/README" />
	    </webinf>
	  </war>
	</target>
@

