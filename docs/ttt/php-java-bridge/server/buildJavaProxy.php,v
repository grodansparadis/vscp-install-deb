head	1.4;
access;
symbols
	Release-7-1-1:1.4.0.2
	Root_Release-7-1-1:1.4
	Root_Release_7-0-1:1.3
	Release_7-0-1:1.3.0.12
	Release_7-0-0:1.3.0.10
	Root_Release_7-0-0:1.3
	Release-6-2-2:1.3.0.8
	Release-6-1-2-3:1.3
	Root_Release-6-1-2-3:1.3
	Release-6-1-2-2:1.3.0.6
	Root_Release-6-1-2-2:1.3
	debian_version_6_1_2_1-1:1.3
	upstream_version_6_1_2_1:1.3
	Release-6-1-2-1_new:1.3.0.4
	Root_Release-6-1-2-1_new:1.3
	Release-6-1-2-1:1.3.0.2
	Root_Release-6-1-2-1:1.3
	upstream_version_6_1_2:1.1
	debian_version_6_1_2-1:1.1
	Release-6-1-2:1.1.0.10
	Root_Release-6-1-2:1.1
	debian_version_6_1_1-2:1.1
	debian_version_6_1_1-1:1.1
	upstream_version_6_1_1:1.1
	Release-6-1-1:1.1.0.8
	Root_Release-6-1-1:1.1
	Release-6-0-4:1.1.0.6
	Root_Release-6-0-4:1.1
	Release-6-0-3_NEW:1.1.0.2
	Root_Release-6-0-3_NEW:1.1
	Root_Release-6-0-0:1.1
	Release-6-0-3:1.1.0.4
	Root_Release-6-0-3:1.1;
locks; strict;
comment	@# @;


1.4
date	2017.03.02.17.40.37;	author jost_boekemeier;	state Exp;
branches;
next	1.3;

1.3
date	2010.04.28.20.56.30;	author jost_boekemeier;	state Exp;
branches;
next	1.2;

1.2
date	2010.04.24.14.20.08;	author jost_boekemeier;	state Exp;
branches;
next	1.1;

1.1
date	2010.02.28.15.20.43;	author jost_boekemeier;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Release-7.0.1
@
text
@<?php
$s = <<<EOF
<?php
/* wrapper for Java.inc and PHPDebugger.inc */

\$java_include_only=str_pad(javaproxy_getHeader("X_JAVABRIDGE_INCLUDE_ONLY", \$_SERVER), 2, "0", false);
if(\$java_include_only[1]=='1') { // include PHPDebugger.php
	require_once("PHPDebugger.php");
}
if(\$java_include_only[0]=='1') { // include Java.inc
	require_once("Java.inc");
}

if (\$java_script_orig = \$java_script = javaproxy_getHeader("X_JAVABRIDGE_INCLUDE", \$_SERVER)) {

	if (\$java_script!="@@") {
		if ((\$_SERVER['REMOTE_ADDR']=='127.0.0.1') || ((\$java_script = realpath(\$java_script)) && (!strncmp(\$_SERVER['DOCUMENT_ROOT'], \$java_script, strlen(\$_SERVER['DOCUMENT_ROOT']))))) {
			chdir (dirname (\$java_script));
			if (     (\$java_include_only[0]=='1') || 
					((\$java_include_only[1]=='1') && !(isset(\$_SERVER["SCRIPT_FILENAME"]) && isset(\$_SERVER["QUERY_STRING"])&&!extension_loaded("Zend Debugger")))) {
					// if Java.inc is enabled or if PHPDebugger.php is enabled but not requested, require original script
					// otherwise the debugger will load the file, if necessary.
					require_once(\$java_script);
			}
		} else {
			trigger_error("illegal access: ".\$java_script_orig, E_USER_ERROR);
		}
	}

	if (\$java_include_only[0]=='1') { // Java.inc
		java_call_with_continuation();
	}
	if (\$java_include_only[1]=='1') { // PHPDebugger
		\$pdb_dbg->handleRequests();
	}
}
function javaproxy_getHeader(\$name,\$array) {
	if (array_key_exists(\$name,\$array)) return \$array[\$name];
	\$name="HTTP_\$name";
	if (array_key_exists(\$name,\$array)) return \$array[\$name];
	return null;
}

?>
EOF;

file_put_contents($argv[1], $s);
?>
@


1.3
log
@Release-6-1-2-1
@
text
@d3 2
a4 2
<?php 
/* wrapper for Java.inc */ 
d6 7
a12 1
if(!function_exists("java_get_base")) require_once("Java.inc"); 
d14 1
a14 1
if (\$java_script_orig = \$java_script = java_getHeader("X_JAVABRIDGE_INCLUDE", \$_SERVER)) {
d16 27
a42 8
  if (\$java_script!="@@") {
    if ((\$_SERVER['REMOTE_ADDR']=='127.0.0.1') || ((\$java_script = realpath(\$java_script)) && (!strncmp(\$_SERVER['DOCUMENT_ROOT'], \$java_script, strlen(\$_SERVER['DOCUMENT_ROOT']))))) {
      chdir (dirname (\$java_script));
      require_once(\$java_script);
    } else {
      trigger_error("illegal access: ".\$java_script_orig, E_USER_ERROR);
    }
  }
a43 2
  java_call_with_continuation();
}
a44 1

@


1.2
log
@Release-6-1-2-1
@
text
@d8 9
a16 4
if (\$java_script = java_getHeader("X_JAVABRIDGE_INCLUDE", \$_SERVER)) {
  if (\$java_script!="@@" && ((\$_SERVER['REMOTE_ADDR']=='127.0.0.1') || (!strncmp(\$_SERVER['DOCUMENT_ROOT'], \$java_script, strlen(\$_SERVER['DOCUMENT_ROOT']))))) {
    chdir (dirname (\$java_script));
    require_once(\$java_script);
d18 1
@


1.1
log
@Release-6-0-3
@
text
@a2 1

d9 1
a9 1
  if (\$java_script!="@@") {
@

