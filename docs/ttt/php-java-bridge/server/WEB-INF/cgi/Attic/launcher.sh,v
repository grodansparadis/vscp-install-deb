head	1.10;
access;
symbols
	Root_Release_7-0-1:1.4
	Release_7-0-1:1.4.0.10
	Release_7-0-0:1.4.0.8
	Root_Release_7-0-0:1.4
	Release-6-2-2:1.4.0.6
	Release-6-1-2-3:1.4
	Root_Release-6-1-2-3:1.4
	Release-6-1-2-2:1.4.0.4
	Root_Release-6-1-2-2:1.4
	debian_version_6_1_2_1-1:1.4
	upstream_version_6_1_2_1:1.4
	Release-6-1-2-1_new:1.4.0.2
	Root_Release-6-1-2-1_new:1.4
	Release-6-1-2-1:1.3.0.12
	Root_Release-6-1-2-1:1.3
	upstream_version_6_1_2:1.3
	debian_version_6_1_2-1:1.3
	Release-6-1-2:1.3.0.10
	Root_Release-6-1-2:1.3
	debian_version_6_1_1-2:1.3
	debian_version_6_1_1-1:1.3
	upstream_version_6_1_1:1.3
	Release-6-1-1:1.3.0.8
	Root_Release-6-1-1:1.3
	Release-6-0-4:1.3.0.6
	Root_Release-6-0-4:1.3
	Release-6-0-3_NEW:1.3.0.2
	Root_Release-6-0-3_NEW:1.3
	Release-6-0-3:1.3.0.4
	Root_Release-6-0-3:1.3
	Release-6-0-0:1.1.0.72
	Root_Release-6-0-0:1.3
	Release-5-5-4-1:1.1.0.70
	Root_Release-5-5-4-1:1.1
	Release-5-5-4:1.1.0.68
	Root_Release-5-5-4:1.1
	Release-5-5-3:1.1.0.66
	ROOT_Release-5-5-3:1.1
	Release-5-5-2:1.1.0.64
	Root_Release-5-5-2:1.1
	debian_version_5_5_1-1:1.1
	Release-5-5-1:1.1.0.60
	upstream_version_5_5_1:1.1
	ROOT_Release-5-5-1:1.1
	debian_version_5_5-1:1.1
	upstream_version_5_5:1.1
	ROOT_Release-5-5:1.1
	Release-5-5:1.1.0.62
	debian_version_5_4_4_2-3:1.1
	Release-5-4-4-2-1:1.1.0.56
	debian_version_5_4_4_2-2:1.1
	debian_version_5_4_4_2-1:1.1
	upstream_version_5_4_4_2:1.1
	debian_version_5_4_4_1-1:1.1
	upstream_version_5_4_4_1:1.1
	debian_version_5_4_4-1:1.1
	upstream_version_5_4_4:1.1
	Release-5-4-4:1.1.0.58
	Root_Release-5-4-4:1.1
	debian_version_5_4_3_2-1:1.1
	upstream_version_5_4_3_2:1.1
	Release_5-4-3-2:1.1.0.54
	Root_Release_5-4-3-2:1.1
	upstream_version_5_4_3_1:1.1
	debian_version_5_4_3_1-1:1.1
	Release-5-4-3:1.1.0.52
	Root_Release-5-4-3:1.1
	Root_Release-5-4-1:1.1
	Release-5-4-1:1.1.0.50
	Root_Release-5-4:1.1
	Release-5-4:1.1.0.48
	upstream_version_5_3_4:1.1
	debian_version_5_3_4-1:1.1
	ROOT_Release-5-3-4:1.1
	Release-5-3-4:1.1.0.46
	ROOT_Release-5-3-3:1.1
	Release-5-3-3:1.1.0.42
	debian_version_5_3_2_1_2-1:1.1
	upstream_version_5_3_2_1_2:1.1
	debian_version_5_3_2_1_1-1:1.1
	debian_version_5_3_2_1_1:1.1
	upstream_version_5_3_2_1_1:1.1
	Root_Release-5-3-2-1:1.1
	Release-5-3-2-1:1.1
	ROOT_RELEASE-5-3-2-1:1.1
	RELEASE-5-3-2-1:1.1.0.44
	Release-5-3-2:1.1.0.40
	Root_Release-5-3-2:1.1
	Root_Release-5-3-1:1.1
	Release-5-3-1:1.1.0.38
	Release-5-2-3-1:1.1.0.36
	Root_Release-5-2-3-1:1.1
	Release-5-2-2-4:1.1.0.34
	Root_Release-5-2-2-4:1.1
	Release-5-2-2-1:1.1.0.32
	Root_Release-5-2-2-1:1.1
	upstream_version_5_2_2:1.1
	debian_version_5_2_2-1:1.1
	Release-5-2-2:1.1.0.30
	ROOT_Release-5-2-2:1.1
	ROOT_Release-5-2-1:1.1
	Release-5-2-1:1.1.0.28
	Release-5-2-0:1.1.0.26
	ROOT_Release-5-2-0:1.1
	ROOT_Release-5-1-2:1.1
	Release-5-1-2:1.1.0.24
	Version-5-1-1:1.1.0.22
	ROOT_Version-5-1-1:1.1
	debian_version_5_1_0-1:1.1
	upstream_version_5_1_0:1.1
	ROOT_Release-5-1-0:1.1
	Release-5-1-0:1.1.0.20
	ROOT_Release-5-0-0:1.1
	Release-5-0-0:1.1.0.18
	Release-4-3-3:1.1.0.16
	ROOT_Release-4-3-3:1.1
	upstream_version_4_3_2:1.1
	debian_version_4_3_2-1:1.1
	ROOT_Release-4-3-2:1.1
	Release-4-3-2:1.1.0.14
	Release-4-3-1:1.1.0.12
	ROOT_Release-4-3-1:1.1
	debian_version_4_3_0-1:1.1
	upstream_version_4_3_0:1.1
	ROOT_Release-4-3-0:1.1
	Release-4-3-0:1.1.0.10
	debian_version_4_2_2-1:1.1
	upstream_version_4_2_2:1.1
	Release-4-1-2:1.1.0.8
	Release-4-0-8:1.1.0.6
	debian_version_4_0_8a-1:1.1
	upstream_version_4_0_8a:1.1
	jostb-debian-ubuntu-patch:1.1.0.4
	debian_version_4_0_8-1:1.1
	upstream_version_4_0_8:1.1
	debian_version_4_0_7-1:1.1
	upstream_version_4_0_7:1.1
	debian_version_4_0_6-1:1.1
	upstream_version_4_0_6:1.1
	debian_version_4_0_2-1:1.1
	upstream_version_4_0_2:1.1
	Release-4-0-2_Root:1.1
	Release-4-0-2:1.1.0.2;
locks; strict;
comment	@# @;
expand	@b@;


1.10
date	2017.04.09.14.35.24;	author jost_boekemeier;	state dead;
branches;
next	1.9;

1.9
date	2017.04.02.17.09.49;	author jost_boekemeier;	state Exp;
branches;
next	1.8;

1.8
date	2017.03.26.21.30.43;	author jost_boekemeier;	state Exp;
branches;
next	1.7;

1.7
date	2017.03.23.21.37.37;	author jost_boekemeier;	state Exp;
branches;
next	1.6;

1.6
date	2017.03.19.18.22.24;	author jost_boekemeier;	state Exp;
branches;
next	1.5;

1.5
date	2017.03.18.20.14.40;	author jost_boekemeier;	state Exp;
branches;
next	1.4;

1.4
date	2010.05.03.11.18.59;	author jost_boekemeier;	state Exp;
branches;
next	1.3;

1.3
date	2010.02.28.20.38.54;	author jost_boekemeier;	state Exp;
branches;
next	1.2;

1.2
date	2010.02.28.20.37.42;	author jost_boekemeier;	state dead;
branches;
next	1.1;

1.1
date	2007.03.19.13.03.18;	author jost_boekemeier;	state Exp;
branches;
next	;


desc
@@


1.10
log
@*** empty log message ***
@
text
@#!/bin/sh
# php fcgi launcher
set -x

PHP_FCGI_CHILDREN="$PHP_JAVA_BRIDGE_FCGI_CHILDREN"
export PHP_FCGI_CHILDREN

strace -s 1024 -ff "$@@" 1>&2 &
trap "kill $! && exit 0;" 1 2 15
read result 1>&2
kill $!
@


1.9
log
@Revert: On windows PHP_FCGI_CHILDREN=5 php-cgi -b 9876 manages its children using AssignProcessToJobObject. However, when php-cgi is started from Java, the job object is that of the Java process. To fix this CreateProcess has a new flag CREATE_BREAKAWAY_FROM_JOB (since Vista). Unfortunately we cannot set this flag from Java  (using ProcessBuilder), so we have to use our own wrapper. Instead of using a wrapper like php-fpm (for which we would have to supply our own windows 32/64 bit binary anyway), we decided to use our existing wrapper "launcher.exe".
@
text
@@


1.8
log
@New fastcgi implementation
@
text
@d5 3
@


1.7
log
@New FastCGI implementation
@
text
@a4 3
PHP_FCGI_CHILDREN="$PHP_JAVA_BRIDGE_FCGI_CHILDREN"
export PHP_FCGI_CHILDREN

@


1.6
log
@New FastCGI implementation.
@
text
@d8 1
a8 1
"$@@" 1>&2 &
@


1.5
log
@New FastCGI implementation
@
text
@d5 3
a7 1
export PHP_FCGI_CHILDREN="$PHP_JAVA_BRIDGE_FCGI_CHILDREN"
@


1.4
log
@Release-6-2-1-2
@
text
@d3 1
a3 1
#set -x
d5 1
@


1.3
log
@Release-6-0-3
@
text
@d1 8
a8 8
#!/bin/sh
# php fcgi launcher
#set -x

"$@@" 1>&2 &
trap "kill $! && exit 0;" 1 2 15
read result 1>&2
kill $!
@


1.2
log
@Release-6-0-3
@
text
@d1 8
a8 8
#!/bin/sh
# php fcgi launcher
#set -x

"$@@" 1>&2 &
trap "kill $! && exit 0;" 1 2 15
read result 1>&2
kill $!
@


1.1
log
@Release-4-0-2
@
text
@@

