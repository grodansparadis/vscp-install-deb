head	1.13;
access;
symbols
	Release-2-0-6-branch:1.8.0.2
	Version-1:1.3.0.6
	Version-2:1.3.0.4
	Release-2:1.3.0.2
	PHP-5:1.1.0.4
	Release-1-0-6:1.1.0.6;
locks; strict;
comment	@# @;


1.13
date	2005.06.27.23.13.14;	author jost2345;	state dead;
branches;
next	1.12;

1.12
date	2005.06.21.20.17.36;	author jost2345;	state Exp;
branches;
next	1.11;

1.11
date	2005.06.19.20.45.43;	author jost2345;	state Exp;
branches;
next	1.10;

1.10
date	2005.06.16.16.10.50;	author jost2345;	state Exp;
branches;
next	1.9;

1.9
date	2005.06.15.15.18.05;	author jost2345;	state Exp;
branches;
next	1.8;

1.8
date	2005.04.27.18.21.29;	author jost2345;	state Exp;
branches;
next	1.7;

1.7
date	2005.03.07.19.36.52;	author jost2345;	state Exp;
branches;
next	1.6;

1.6
date	2005.02.19.13.29.25;	author jost2345;	state Exp;
branches;
next	1.5;

1.5
date	2005.02.15.19.10.32;	author jost2345;	state Exp;
branches;
next	1.4;

1.4
date	2005.02.13.21.43.29;	author jost2345;	state Exp;
branches;
next	1.3;

1.3
date	2005.01.28.16.32.55;	author jost2345;	state Exp;
branches;
next	1.2;

1.2
date	2004.11.24.23.18.18;	author jost2345;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.26.23.00.48;	author jost2345;	state Exp;
branches;
next	;


desc
@@


1.13
log
@compiles with jdk1.5 + gnu java
@
text
@# -*- mode: Makefile; -*-

lib_LTLIBRARIES = libnatcJavaBridge.la
libnatcJavaBridge_la_SOURCES = natcJavaBridge.c
libnatcJavaBridge_la_LDFLAGS = -shared -avoid-version -prefer-pic
libnatcJavaBridge_la_LIBADD =

if COND_GCJ
# create java executable with GNU GCC when --with-java was given
bin_PROGRAMS=$(VM_BINARIES)
EXTRA_PROGRAMS=java RunJavaBridge MonoBridge.exe RunMonoBridge

RunJavaBridge_SOURCES= RunJavaBridge.c
java_SOURCES= java.c php/java/bridge/GlobalRef.java php/java/bridge/IDocHandler.java php/java/bridge/ISocketFactory.java php/java/bridge/JavaBridgeClassLoader.java php/java/bridge/JavaBridge.java php/java/bridge/LocalServerSocket.java php/java/bridge/LocalSocketInputStream.java php/java/bridge/LocalSocket.java php/java/bridge/LocalSocketOutputStream.java php/java/bridge/NotImplementedException.java php/java/bridge/Parser.java php/java/bridge/ParserString.java php/java/bridge/ParserTag.java php/java/bridge/PhpMap.java php/java/bridge/Request.java php/java/bridge/Response.java php/java/bridge/Session.java php/java/bridge/TCPServerSocket.java php/java/bridge/Util.java php/java/bridge/global.properties

MonoBridge.exe: $(PHP_MONO)
	$(GCJ) -C php/java/bridge/*.java
	fastjar cMf JavaBridge.jar META-INF/MANIFEST.MF php/java/bridge/*.class php/java/bridge/*.properties
	mono $(PHP_MONO) JavaBridge.jar
	mv JavaBridge.exe MonoBridge.exe
	rm -f JavaBridge.jar

java_LDADD=libnatcJavaBridge.la
java_LDFLAGS=-rpath $(EXTENSION_DIR)
AM_GCJFLAGS=-fjni

else 
# use a real VM when --with-java=$JAVA_HOME was given

bin_PROGRAMS=RunJavaBridge
RunJavaBridge_SOURCES=RunJavaBridge.c

dist_data_DATA=JavaBridge.jar $(JAVA_BRIDGE_WAR)
EXTRA_DATA=JavaBridge.war

JavaBridge.jar:
	$(PHP_JAVA)/bin/javac php/java/bridge/*.java
	$(PHP_JAVA)/bin/jar cMf JavaBridge.jar META-INF/MANIFEST.MF php/java/bridge/*.class  php/java/bridge/*.properties

JavaBridge.war: JavaBridge.jar $(SERVLET)
	$(PHP_JAVA)/bin/javac -classpath $(SERVLET) php/java/bridge/*.java php/java/servlet/*.java
	-mkdir WEB-INF/lib WEB-INF/classes
	cp JavaBridge.jar WEB-INF/lib
	cp -r php WEB-INF/classes
	$(PHP_JAVA)/bin/jar cMf JavaBridge.war META-INF/MANIFEST.MF WEB-INF/web.xml WEB-INF/lib/JavaBridge.jar WEB-INF/classes/php/java/servlet/*.class

endif
@


1.12
log
@Release-2.0.7pre
@
text
@@


1.11
log
@Release-2.0.7-pre
@
text
@d14 1
a14 1
java_SOURCES= java.c php/java/bridge/GlobalRef.java php/java/bridge/IDocHandler.java php/java/bridge/ISocketFactory.java php/java/bridge/JavaBridgeClassLoader.java php/java/bridge/JavaBridge.java php/java/bridge/LocalServerSocket.java php/java/bridge/LocalSocketInputStream.java php/java/bridge/LocalSocket.java php/java/bridge/LocalSocketOutputStream.java php/java/bridge/NotImplementedException.java php/java/bridge/Parser.java php/java/bridge/ParserString.java php/java/bridge/ParserTag.java php/java/bridge/PhpMap.java php/java/bridge/Request.java php/java/bridge/Response.java php/java/bridge/Session.java php/java/bridge/TCPServerSocket.java php/java/bridge/Util.java
d18 1
a18 1
	fastjar cMf JavaBridge.jar META-INF/MANIFEST.MF php/java/bridge/*.class
d38 1
a38 1
	$(PHP_JAVA)/bin/jar cMf JavaBridge.jar META-INF/MANIFEST.MF php/java/bridge/*.class
@


1.10
log
@Tomcat 5
@
text
@d10 3
a12 1
bin_PROGRAMS=java RunJavaBridge
d14 1
a14 2
java_SOURCES= java.c php/java/bridge/GlobalRef.java php/java/bridge/IDocHandler.java php/java/bridge/ISocketFactory.java php/java/bridge/JavaBridgeClassLoader.java php/java/bridge/JavaBridge.java php/java/bridge/LocalServerSocket.java php/java/bridge/LocalSocketInputStream.java php/java/bridge/LocalSocket.java php/java/bridge/LocalSocketOutputStream.java php/java/bridge/NotImplementedException.java php/java/bridge/Parser.java php/java/bridge/ParserString.java php/java/bridge/ParserTag.java php/java/bridge/PhpMap.java php/java/bridge/Request.java php/java/bridge/Response.java php/java/bridge/Session.java php/java/bridge/TCPServerSocket.java php/java/bridge/Util.java php/java/bridge/Listener.java

d16 6
d33 2
a34 1
dist_data_DATA=JavaBridge.jar JavaBridge.war
d40 2
a41 2
JavaBridge.war: JavaBridge.jar j2ee.jar
	$(PHP_JAVA)/bin/javac -classpath j2ee.jar  php/java/bridge/*.java php/java/servlet/*.java
@


1.9
log
@Tomcat 5 support / multicasts removed
@
text
@d32 1
a32 1
JavaBridge.war: JavaBridge.jar
d34 1
a34 1
	-mkdir WEB-INF/lib
d36 2
a37 1
	$(PHP_JAVA)/bin/jar cMf JavaBridge.war META-INF/MANIFEST.MF WEB-INF/web.xml WEB-INF/lib/JavaBridge.jar php/java/servlet/*.class
@


1.8
log
@include Listener
@
text
@d26 1
a26 1
dist_data_DATA=JavaBridge.jar
d32 6
@


1.7
log
@Release-2.0.1
@
text
@d12 1
a12 1
java_SOURCES= java.c php/java/bridge/GlobalRef.java php/java/bridge/IDocHandler.java php/java/bridge/ISocketFactory.java php/java/bridge/JavaBridgeClassLoader.java php/java/bridge/JavaBridge.java php/java/bridge/LocalServerSocket.java php/java/bridge/LocalSocketInputStream.java php/java/bridge/LocalSocket.java php/java/bridge/LocalSocketOutputStream.java php/java/bridge/NotImplementedException.java php/java/bridge/Parser.java php/java/bridge/ParserString.java php/java/bridge/ParserTag.java php/java/bridge/PhpMap.java php/java/bridge/Request.java php/java/bridge/Response.java php/java/bridge/Session.java php/java/bridge/TCPServerSocket.java php/java/bridge/Util.java
@


1.6
log
@Protocol update
@
text
@d12 1
a12 2
java_SOURCES= java.c php/java/bridge/GlobalRef.java php/java/bridge/IDocHandler.java php/java/bridge/ISocketFactory.java php/java/bridge/JavaBridgeClassLoader.java php/java/bridge/JavaBridge.java php/java/bridge/LocalServerSocket.java php/java/bridge/LocalSocketInputStream.java php/java/bridge/LocalSocket.java php/java/bridge/LocalSocketOutputStream.java php/java/bridge/NotImplementedException.java php/java/bridge/Parser.java php/java/bridge/ParserString.java php/java/bridge/ParserTag.java php/java/bridge/PhpMap.java php/java/bridge/Request.java php/java/bridge/Response.java php/java/bridge/TCPServerSocket.java php/java/bridge/Util.java

@


1.5
log
@Replaced JNI with XML protocol
@
text
@d12 2
a13 1
java_SOURCES= java.c php/java/bridge/GlobalRef.java php/java/bridge/IDocHandler.java php/java/bridge/JavaBridgeClassLoader.java php/java/bridge/JavaBridge.java php/java/bridge/Parser.java php/java/bridge/ParserString.java php/java/bridge/ParserTag.java php/java/bridge/PhpMap.java php/java/bridge/Request.java php/java/bridge/Response.java php/java/bridge/Util.java
d27 1
a27 3
dist_data_DATA=php/java/bridge/GlobalRef.class php/java/bridge/IDocHandler.class php/java/bridge/JavaBridge$$1.class php/java/bridge/JavaBridge$$2.class php/java/bridge/JavaBridge$$3.class php/java/bridge/JavaBridge.class php/java/bridge/JavaBridgeClassLoader.class php/java/bridge/Parser.class php/java/bridge/ParserString.class php/java/bridge/ParserTag.class php/java/bridge/PhpMap.class php/java/bridge/Request.class php/java/bridge/Response.class php/java/bridge/Util.class


d29 3
a31 2
.java.class:
	$(PHP_JAVA)/bin/javac $?
@


1.4
log
@Replaced JNI with XML protocol
@
text
@d1 33
@


1.3
log
@Release-1.0.8
@
text
@a0 28
# -*- mode: Makefile; -*-

lib_LTLIBRARIES = libnatcJavaBridge.la
libnatcJavaBridge_la_SOURCES = natcJavaBridge.c
libnatcJavaBridge_la_LDFLAGS = -shared -avoid-version -prefer-pic
libnatcJavaBridge_la_LIBADD =

if COND_GCJ
# create java executable with GNU GCC when --with-java was given
bin_PROGRAMS=java RunJavaBridge
RunJavaBridge_SOURCES= RunJavaBridge.c
java_SOURCES= java.c JavaBridge.java
java_LDADD=libnatcJavaBridge.la
java_LDFLAGS=-rpath $(EXTENSION_DIR)
AM_GCJFLAGS=-fjni

else 
# use a real VM when --with-java=$JAVA_HOME was given

bin_PROGRAMS=RunJavaBridge
RunJavaBridge_SOURCES=RunJavaBridge.c

dist_data_DATA=JavaBridge.class JavaBridge$$1.class JavaBridge$$2.class JavaBridge$$3.class JavaBridge$$4.class JavaBridge$$PhpMap.class

JavaBridge.class: JavaBridge.java
	$(PHP_JAVA)/bin/javac JavaBridge.java

endif
@


1.2
log
@PHP5 iterator/array
@
text
@d10 2
a11 1
bin_PROGRAMS=java
d20 3
@


1.1
log
@*** empty log message ***
@
text
@d19 1
a19 1
dist_data_DATA=JavaBridge.class JavaBridge$$1.class #JavaBridge.$$2.class
@

