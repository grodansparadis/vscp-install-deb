head	1.13;
access;
symbols
	Release-7-1-1:1.12.0.52
	Root_Release-7-1-1:1.12
	Root_Release_7-0-1:1.12
	Release_7-0-1:1.12.0.50
	Release_7-0-0:1.12.0.48
	Root_Release_7-0-0:1.12
	Release-6-2-2:1.12.0.46
	Release-6-1-2-3:1.12
	Root_Release-6-1-2-3:1.12
	Release-6-1-2-2:1.12.0.44
	Root_Release-6-1-2-2:1.12
	debian_version_6_1_2_1-1:1.12
	upstream_version_6_1_2_1:1.12
	Release-6-1-2-1_new:1.12.0.42
	Root_Release-6-1-2-1_new:1.12
	Release-6-1-2-1:1.12.0.40
	Root_Release-6-1-2-1:1.12
	upstream_version_6_1_2:1.12
	debian_version_6_1_2-1:1.12
	Release-6-1-2:1.12.0.38
	Root_Release-6-1-2:1.12
	debian_version_6_1_1-2:1.12
	debian_version_6_1_1-1:1.12
	upstream_version_6_1_1:1.12
	Release-6-1-1:1.12.0.36
	Root_Release-6-1-1:1.12
	Release-6-0-4:1.12.0.34
	Root_Release-6-0-4:1.12
	Release-6-0-3_NEW:1.12.0.30
	Root_Release-6-0-3_NEW:1.12
	Release-6-0-3:1.12.0.32
	Root_Release-6-0-3:1.12
	Release-6-0-0:1.12.0.28
	Root_Release-6-0-0:1.12
	Release-5-5-4-1:1.12.0.26
	Root_Release-5-5-4-1:1.12
	Release-5-5-4:1.12.0.24
	Root_Release-5-5-4:1.12
	Release-5-5-3:1.12.0.22
	ROOT_Release-5-5-3:1.12
	Release-5-5-2:1.12.0.20
	Root_Release-5-5-2:1.12
	debian_version_5_5_1-1:1.12
	Release-5-5-1:1.12.0.16
	upstream_version_5_5_1:1.12
	ROOT_Release-5-5-1:1.12
	debian_version_5_5-1:1.12
	upstream_version_5_5:1.12
	ROOT_Release-5-5:1.12
	Release-5-5:1.12.0.18
	debian_version_5_4_4_2-3:1.12
	Release-5-4-4-2-1:1.12.0.12
	debian_version_5_4_4_2-2:1.12
	debian_version_5_4_4_2-1:1.12
	upstream_version_5_4_4_2:1.12
	debian_version_5_4_4_1-1:1.12
	upstream_version_5_4_4_1:1.12
	debian_version_5_4_4-1:1.12
	upstream_version_5_4_4:1.12
	Release-5-4-4:1.12.0.14
	Root_Release-5-4-4:1.12
	debian_version_5_4_3_2-1:1.12
	upstream_version_5_4_3_2:1.12
	Release_5-4-3-2:1.12.0.10
	Root_Release_5-4-3-2:1.12
	upstream_version_5_4_3_1:1.12
	debian_version_5_4_3_1-1:1.12
	Release-5-4-3:1.12.0.8
	Root_Release-5-4-3:1.12
	Root_Release-5-4-1:1.12
	Release-5-4-1:1.12.0.6
	Root_Release-5-4:1.12
	Release-5-4:1.12.0.4
	upstream_version_5_3_4:1.12
	debian_version_5_3_4-1:1.12
	ROOT_Release-5-3-4:1.12
	Release-5-3-4:1.12.0.2
	ROOT_Release-5-3-3:1.10
	Release-5-3-3:1.10.0.18
	debian_version_5_3_2_1_2-1:1.10
	upstream_version_5_3_2_1_2:1.10
	debian_version_5_3_2_1_1-1:1.10
	debian_version_5_3_2_1_1:1.10
	upstream_version_5_3_2_1_1:1.10
	Root_Release-5-3-2-1:1.10
	Release-5-3-2-1:1.10
	ROOT_RELEASE-5-3-2-1:1.10
	RELEASE-5-3-2-1:1.10.0.20
	Release-5-3-2:1.10.0.16
	Root_Release-5-3-2:1.10
	Root_Release-5-3-1:1.10
	Release-5-3-1:1.10.0.14
	Release-5-2-3-1:1.10.0.12
	Root_Release-5-2-3-1:1.10
	Release-5-2-2-4:1.10.0.10
	Root_Release-5-2-2-4:1.10
	Release-5-2-2-1:1.10.0.8
	Root_Release-5-2-2-1:1.10
	upstream_version_5_2_2:1.10
	debian_version_5_2_2-1:1.10
	Release-5-2-2:1.10.0.6
	ROOT_Release-5-2-2:1.10
	ROOT_Release-5-2-1:1.10
	Release-5-2-1:1.10.0.4
	Release-5-2-0:1.10.0.2
	ROOT_Release-5-2-0:1.10
	ROOT_Release-5-1-2:1.9
	Release-5-1-2:1.9.0.10
	Version-5-1-1:1.9.0.8
	ROOT_Version-5-1-1:1.9
	debian_version_5_1_0-1:1.9
	upstream_version_5_1_0:1.9
	ROOT_Release-5-1-0:1.9
	Release-5-1-0:1.9.0.6
	ROOT_Release-5-0-0:1.9
	Release-5-0-0:1.9.0.4
	Release-4-3-3:1.9.0.2
	ROOT_Release-4-3-3:1.9
	upstream_version_4_3_2:1.8
	debian_version_4_3_2-1:1.8
	ROOT_Release-4-3-2:1.8
	Release-4-3-2:1.8.0.6
	Release-4-3-1:1.8.0.4
	ROOT_Release-4-3-1:1.8
	debian_version_4_3_0-1:1.8
	upstream_version_4_3_0:1.8
	ROOT_Release-4-3-0:1.8
	Release-4-3-0:1.8.0.2
	debian_version_3_2_1b-2:1.5
	debian_version_4_2_2-1:1.7
	upstream_version_4_2_2:1.7
	debian_version_3_2_1b-1:1.5
	upstream_version_3_2_1b:1.5
	Release-4-1-2:1.7.0.8
	Release-4-0-8:1.7.0.6
	debian_version_4_0_8a-1:1.7
	upstream_version_4_0_8a:1.7
	jostb-debian-ubuntu-patch:1.7.0.4
	debian_version_4_0_8-1:1.7
	upstream_version_4_0_8:1.7
	debian_version_4_0_7-1:1.7
	upstream_version_4_0_7:1.7
	debian_version_4_0_6-1:1.7
	upstream_version_4_0_6:1.7
	debian_version_4_0_2-1:1.7
	upstream_version_4_0_2:1.7
	Release-4-0-2_Root:1.7
	Release-4-0-2:1.7.0.2
	upstream_version_4_0_1:1.6
	debian_version_4_0_1-2:1.6
	Release-3-2-1:1.5.0.4
	Release-3-1-8:1.5.0.2
	Release-3-0-8_root:1.1.2.1
	Release-3-0-8_Root:1.2
	Release-3-0-8:1.1.0.2;
locks; strict;
comment	@# @;


1.13
date	2017.04.14.13.01.10;	author jost_boekemeier;	state dead;
branches;
next	1.12;

1.12
date	2008.11.27.21.00.26;	author jost_boekemeier;	state Exp;
branches;
next	1.11;

1.11
date	2008.11.15.14.27.51;	author jost_boekemeier;	state Exp;
branches;
next	1.10;

1.10
date	2008.03.02.21.36.52;	author jost_boekemeier;	state Exp;
branches
	1.10.18.1;
next	1.9;

1.9
date	2007.12.28.13.56.42;	author jost_boekemeier;	state Exp;
branches;
next	1.8;

1.8
date	2007.09.19.10.12.27;	author jost_boekemeier;	state Exp;
branches;
next	1.7;

1.7
date	2007.03.19.13.03.17;	author jost_boekemeier;	state Exp;
branches;
next	1.6;

1.6
date	2007.03.09.20.28.11;	author andremachado;	state Exp;
branches;
next	1.5;

1.5
date	2006.08.27.14.40.11;	author jost2345;	state Exp;
branches;
next	1.4;

1.4
date	2006.08.21.17.41.52;	author jost2345;	state Exp;
branches;
next	1.3;

1.3
date	2006.06.19.20.37.16;	author jost2345;	state Exp;
branches;
next	1.2;

1.2
date	2006.04.20.17.16.08;	author jost2345;	state Exp;
branches;
next	1.1;

1.1
date	2006.02.18.15.42.49;	author jost2345;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2006.04.23.19.09.08;	author jost2345;	state Exp;
branches;
next	;

1.10.18.1
date	2008.11.15.14.22.31;	author jost_boekemeier;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Removed JavaProxy.php
@
text
@<?php require_once("java/Java.inc");
$session = java_session();

/* The name of the remote document */
$name = "RMIdocument";

/* continue session? */
if(!java_values($doc=$session->get("$name")))
  $session->put("$name", $doc=createDocument("$name", array()));

try {
  /* add pages to the remote document */
  $doc->addPage(new java("Page", 0, "this is page 1"));
  $doc->addPage(new java("Page", 0, "this is page 2"));

  /* and print a summary */
  print java_values($doc->analyze()) . "\n";
} catch (JavaException $ex) {
  $cause = $ex->getCause();
  echo "Could not access remote document. <br>\n";
  echo "$cause <br>\nin file: {$ex->getFile()}<br>\nline:{$ex->getLine()}\n";
  $session->destroy();
  exit (2);
}
/* destroy the remote document and remove the session */
if($_GET['logout']) {
  echo "bye...\n";
  destroyDocument($doc);
  $session->destroy();
 }

/* Utility procedures */

/*
 * convenience function which connects to the AS server using the URL
 * $url, looks up the service $jndiname and returns a new remote
 * document.
 * @@param jndiname The name of the remote document, see sun-ejb-jar.xml
 * @@param serverArgs An array describing the connection parameters.
 */
function createDocument($jndiname, $serverArgs) {
  // find initial context
  $initial = new java("javax.naming.InitialContext", $serverArgs);
  
  try {
    // find the service
    $objref  = $initial->lookup("$jndiname");
    
    // access the home interface
    $home = java("javax.rmi.PortableRemoteObject")->narrow($objref, java("DocumentHome"));
    if(java_is_null($home)) throw new Exception("home");

    // create a new remote document and return it
    $doc = $home->create();
  } catch (JavaException $ex) {
    $cause = $ex->getCause();
    echo "Could not create remote document. Have you deployed documentBean.jar?<br>\n";
    echo "$cause <br>\nin file: {$ex->getFile()}<br>\nline:{$ex->getLine()}\n";
    exit (1);
  }
  
  return $doc;
}

/*
 * convenience function which destroys the reference to the remote
 * document
 * @@param The remote document.
 */
function destroyDocument($doc) {
  $doc->remove();
}

?>
@


1.12
log
@Release 5.3.3.1
@
text
@@


1.11
log
@Release 5.3.3
@
text
@a3 2
java_autoload();

d13 2
a14 2
  $doc->addPage(new Page(0, "this is page 1"));
  $doc->addPage(new Page(0, "this is page 2"));
d43 1
a43 1
  $initial = new javax_naming_InitialContext($serverArgs);
d50 1
a50 2
    $home = javax_rmi_PortableRemoteObject::type()->narrow($objref, 
						   DocumentHome::type());
@


1.10
log
@Release-5-2-0
@
text
@d54 1
a54 1
    if(is_null(java_values($home))) throw new Exception("home");
@


1.10.18.1
log
@Release 5.3.3
@
text
@d54 1
a54 1
    if(java_is_null($home)) throw new Exception("home");
@


1.9
log
@Release-4-3-3
@
text
@d10 1
a10 1
if(!$doc=$session->get("$name"))
d54 1
a54 1
    if(is_null($home)) throw new Exception("home");
@


1.8
log
@Release-4-3-0
@
text
@d2 2
a5 2
$session = java_session();

@


1.7
log
@Release-4-0-2
@
text
@d1 2
a2 3
<?php

if(!extension_loaded('java')) require_once("java/Java.inc");
a4 1
$System = new JavaClass("java.lang.System");
d15 2
a16 2
  $doc->addPage(new Java ("Page", 0, "this is page 1"));
  $doc->addPage(new Java ("Page", 0, "this is page 2"));
d21 1
a21 1
  $cause = $ex->getCause(); if(is_null($ex->getCause())) $cause = $ex;
d45 1
a45 1
  $initial = new Java("javax.naming.InitialContext", $serverArgs);
d52 3
a54 4
    $DocumentHome = new JavaClass("DocumentHome");
    $PortableRemoteObject = new JavaClass("javax.rmi.PortableRemoteObject");
    $home = $PortableRemoteObject->narrow($objref, $DocumentHome);
    if(is_null($home)) throw new JavaException("java.lang.NullPointerException", "home");
d59 1
a59 1
    $cause = $ex->getCause(); if(is_null($ex->getCause())) $cause = $ex;
@


1.6
log
@Files update 3.2.2 to 4.0.1. Extracted from the src.tar.gz downloaded from sf.net, uploaded by Jost Boekemeier. Update to repository by Andre Felipe Machado.
@
text
@d3 1
a3 1
require_once("java/Java.inc");
@


1.5
log
@Release-3-1-8rc
@
text
@d3 1
a3 1
require_once("java/Java.php");
@


1.4
log
@Release-3-1-8devel1
@
text
@d21 1
a21 1
  print $doc->analyze() . "\n";
@


1.3
log
@Release-3-1-0
@
text
@d3 2
d17 2
a18 2
  $doc->addPage(new java ("Page", 0, "this is page 1"));
  $doc->addPage(new java ("Page", 0, "this is page 2"));
d47 1
a47 1
  $initial = new java("javax.naming.InitialContext", $serverArgs);
@


1.2
log
@3.1-branch
@
text
@d13 14
a26 7
/* add pages to the remote document */
$doc->addPage(new java ("Page", 0, "this is page 1"));
$doc->addPage(new java ("Page", 0, "this is page 2"));

/* and print a summary */
print $doc->analyze() . "\n";

d55 2
a56 1
    
d60 1
d62 1
a62 1
    echo "{$ex->getCause()} <br>\nin file: {$ex->getFile()}<br>\nline:{$ex->getLine()}\n";
@


1.1
log
@Release-3.0.7a
@
text
@a7 3
try { 				// jboss uses DocumentEJB ...
  if($System->getProperty("jboss.server.name")) $name="DocumentEJB";
} catch (JavaException $e) {/*ignore*/}
@


1.1.2.1
log
@Release-3-0-8-1
@
text
@d8 3
@


